"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4099],{10912:(e,t,i)=>{i.d(t,{Z:()=>x});var o=i(23174),n=i.n(o),r=(i(57658),i(67294)),a=i(83355),s=i(27531),d=i(41432),l=i(80951),c=i(95538),m=i(21202),u=i(97880),g=i(78316),p=i(17311),v=i(35328),f=i(57559),y=i(865),h=i(12981),S=i(81865),b=i(35541);function w(e){return"number"==typeof e}class C extends a.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:i}=this.props,o=f.G.createChildStore(t,{table:m.iU,id:e}),r=o.getType(),a=i&&void 0!==r?(0,b.u)(o):(0,y.h)(o);if(a)return n()(s.D,{value:this.restrictedContentStore},void 0,n()(a,{store:o,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,v.BX)(o),style:{fontSize:12,opacity:.8,pointerEvents:"none"},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))},e))},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,g.NU)(e,t);return i.image?i.image:i.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,g.wK)(e,t);return i.image?void 0:i.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,i=[];if(Array.isArray(t)){let o=0;for(;o<t.length;){let n=t[o],r=f.G.createChildStore(e,{table:m.iU,id:n});if(r.getType()===d.Ti.numberedList){const a=[{blockId:n,idx:1}],s=[{id:n,format:void 0,depth:a.length-1,index:a[0].idx}];for(o+=1;o<t.length&&(n=t[o],r=f.G.createChildStore(e,{table:m.iU,id:n}),r.getType()===d.Ti.numberedList);){{const e=r.getParentId();if(r.getParentId()===a[a.length-1].blockId)a.push({blockId:n,idx:1});else{let t=a[a.length-1].idx;for(;a.length>0&&a[a.length-1].blockId!==e;)t=a[a.length-1].idx,a.pop();a.push({blockId:n,idx:t+1})}s.push({id:n,format:void 0,depth:a.length-1,index:a[a.length-1].idx})}o+=1}i.push(s)}else o+=1}}return i}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,i=null===(e=t.getCover())||void 0===e?void 0:e.cover;return i?n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{url:i,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(e){if(!Array.isArray(e))return n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getPageContentImageStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder());if(e.length>0)return r.createElement(r.Fragment,null,n()("div",{style:this.getContentWrapStyle()},void 0,t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&n()("div",{style:this.getContentFadedOverlayStyle()})));if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,i=(0,l.g)(t.getPropertyValue(e)).find((e=>(0,c.SR)({url:e.url})));return i?n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:i.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return n()("div",{style:{height:this.getCoverHeight(),...this.props.emptyGalleryCoverStyle}})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return n()("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,u.t1)(this.props.variant)}}get imagePosition(){const{coverPosition:e,store:t}=this.props;if(w(e))return e;if(t.getFormatStore().isDefined()){const{page_cover_position:e,card_cover_position:i}=t.getFormat();if(w(i))return i;if(w(e))return e}return.5}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const i of t)if(i.find((t=>t.id===e)))return i;return[]}getImageStyle(){return this.props.style||{}}getCoverHeight(){const{coverHeight:e,coverSizeFormat:t}=this.props;if(e)return e;switch(t){case"large":return p.Z.card.desktop.large.height;case"small":return p.Z.card.desktop.small.height;case"medium":default:return p.Z.card.desktop.medium.height}}getCoverWidth(){const{coverWidth:e,coverSizeFormat:t}=this.props;return e||(0,g.rD)(t)}getImageCoverWrapStyle(){return{height:this.getCoverHeight(),position:"relative",pointerEvents:"none",overflow:"hidden"}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,u.t1)(this.props.variant)}}getContentWrapStyle(){return{height:this.getCoverHeight(),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,u.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:this.getCoverHeight(),...this.getCoverVariantStyle(),objectPosition:"center"}}getCoverAspectStyle(){const{coverAspectFormat:e}=this.props;return{objectFit:void 0===e?"cover":e}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}C.displayName="CollectionItemCover";const x=C},86249:(e,t,i)=>{i.d(t,{ZP:()=>Q,UV:()=>X,f4:()=>J});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=(i(57658),i(67294)),d=i(24405),l=i(56666),c=i(44495),m=i(37612),u=i(5366),g=i(97880),p=i(47307),v=i(40394),f=i(42922),y=i(52275),h=i(53695),S=i(64369),b=i(480),w=i(86628),C=i(50906),x=i(54642),k=i(33954),M=i(52507),I=i(50506),F=i(13991),D=i(82990),T=i(74194),Z=i(68785);const P=(0,u.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const _=function(e){let{handleAddNewDomain:t,loading:i,verificationType:o}=e;window.__c={n:"AddNewDomain"};const[r,l]=(0,s.useState)(""),c=!Boolean(r),m=(0,s.useCallback)((e=>{l(e.target.value)}),[]),p=(0,d.yK)((()=>({title:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:c?.5:1}})),[c]);let v;switch(o){case"integration":v=P.integrationSubtitle;break;case"saml_config":v=P.samlConfigSubtitle;break;default:(0,g.t1)(o)}return a()(s.Fragment,{},void 0,a()(S.Z,{style:p.title},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})),a()(S.Z,{style:p.subtitle,isMultiline:!0},void 0,s.createElement(u.FormattedMessage,n()({},v,{values:{br:a()("br",{})}}))),a()(T.Z,{value:r,style:p.input,placeholder:"notion.so",onChange:m}),a()(f.Z,{onClick:()=>t(r),style:p.button,isLarge:!0,disabled:c},void 0,i?a()(Z.Z,{}):a()(u.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})))};var A=i(63296);const E=function(e){let{domain:t,isExpired:i,onClose:o}=e;window.__c={n:"InvalidDomain"};const n=(0,d.yK)((e=>({title:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return a()(s.Fragment,{},void 0,a()(S.Z,{style:n.title,isMultiline:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})),a()(S.Z,{style:n.subtitle,isMultiline:!0},void 0,a()(u.FormattedMessage,i?{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}:{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})),a()(A.Z,{onClick:o,style:{width:"100%"}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"Okay"})))},B=(0,u.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const V=function(e){let{domain:t,onClose:i,verificationType:o}=e;window.__c={n:"VerifyDomain"};const r=(0,d.yK)((()=>({title:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let l;switch(o){case"saml_config":l=B.samlConfigSubtitle;break;case"integration":l=B.integrationSubtitle;break;default:(0,g.t1)(o)}return a()(s.Fragment,{},void 0,a()(S.Z,{style:r.title,isMultiline:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})),a()(S.Z,{style:r.subtitle,isMultiline:!0},void 0,s.createElement(u.FormattedMessage,n()({},l,{values:{br:a()("br",{})}}))),a()(A.Z,{onClick:i,style:{width:"100%"}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"Okay"})))};var R=i(75553),O=i(63143),W=i(14871),L=i(16402),U=i(64921);const K=function(e){let{handleVerifyDomain:t,domainVerification:i,loading:o}=e;window.__c={n:"VerifyExistingDomain"};const n=(0,b.O7)(),r=i.expiresAt-Date.now()<2*O.U6,l=(0,d.yK)((e=>({title:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",marginBottom:12},expiresSoonText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:D.Z.getCompositeFontFamily(F.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,fontFamily:D.Z.getCompositeFontFamily(F.SP).mono,fontSize:14,fontWeight:400,lineHeight:"18px"},codeContainer:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3,marginTop:4,marginBottom:8}})),[]);return a()(s.Fragment,{},void 0,a()(S.Z,{style:l.title},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})),a()(S.Z,{style:l.subtitle},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})),a()(S.Z,{isSmall:!0,style:{marginTop:22}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"})),a()("div",{style:l.codeContainer},void 0,a()(S.Z,{style:l.code},void 0,`notion-domain-verification=${i.verificationCode}`),a()(U.Z,{onClick:function(){W.RD({environment:n,stringValue:`notion-domain-verification=${i.verificationCode}`,copiedMessage:W.tq.copiedLinkToClipboard})},style:l.copyButton},void 0,(0,R.U)(l.copyIcon),a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",defaultMessage:"Copy"}))),a()(S.Z,{style:r?l.expiresSoonText:void 0,isSmall:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"Expires on {timeLeft}",values:{timeLeft:(0,L.gs)(i.expiresAt)}})),a()("ol",{style:l.list},void 0,a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Navigate to the DNS record section of your domain host."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a new TXT record and paste in the code above as the value."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify" to notify Notion to check your DNS record.'}))),a()(A.Z,{style:{width:"100%"},onClick:()=>t(i),disabled:o},void 0,o?a()(Z.Z,{}):a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify"})))};const H=function(e){window.__c={n:"VerifyDomainModal"};const t=(0,b.O7)(),i=(0,u.useIntl)(),o=(0,d.Fg)(),[n,r]=(0,w.AF)(e.store,M.ZP),{verificationType:l,verificationTargetId:c,refreshDomains:m}=e,v=(0,s.useCallback)((()=>{r((e=>({...e,loading:!1,modalOpen:!1})))}),[r]),f=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const o="integration"===l?{type:l,integrationId:c,domain:e}:{type:l,spaceId:c,domain:e},n=await x.createDomainVerificationCode(t,o);if("success"===n.type){m(),C.G7$(t,{type:l});const e=n.data.domainVerification,i=(0,M.Hs)(e);r((e=>({...e,domainVerification:i,loading:!1})))}else p.showErrorMessage((0,k.wf)(i,n)),r((e=>({...e,loading:!1})))}),[t,r,c,m,l,i]),y=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const o=await x.verifyDomain(t,{verificationId:e.id});if(C.DoK(t,{type:l}),"success"===o.type){m(),C.aOs(t,{type:l});const i={type:"verified",domain:e.domain};r((e=>({...e,domainVerification:i,loading:!1})))}else p.showErrorMessage((0,k.wf)(i,o)),r((e=>({...e,loading:!1})))}),[t,i,r,m,l]),h=(0,s.useCallback)((()=>{if(!n.domainVerification)return a()(_,{handleAddNewDomain:f,loading:n.loading,verificationType:l});switch(n.domainVerification.type){case"invalid":return a()(E,{domain:n.domainVerification.domain,isExpired:Date.now()>n.domainVerification.expiresAt,onClose:v});case"unverified":return a()(K,{handleVerifyDomain:y,domainVerification:n.domainVerification,loading:n.loading});case"verified":return a()(V,{domain:n.domainVerification.domain,onClose:v,verificationType:l});default:(0,g.t1)(n.domainVerification)}}),[n.domainVerification,n.loading,y,f,v,l]);return a()(I.Z,{open:n.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:v,render:()=>a()("div",{style:{background:o.popoverBackground,width:410,padding:24,borderRadius:3}},void 0,h())})};var z=i(5478);const N=[{id:"domain",headerTitle:a()(u.FormattedMessage,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>a()(S.Z,{},void 0,e.domain),widthData:{width:100},sortable:!1},{id:"status",headerTitle:a()(u.FormattedMessage,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>a()(q,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>a()($,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],j=(0,u.defineMessages)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),G={fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},Y={fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"};function q(e){let{status:t}=e;window.__c={n:"VerificationToken"};const i=(0,d.yK)((e=>{const i={[z.YF.Success]:e.statusTokenBackground.green,[z.YF.Pending]:e.statusTokenBackground.yellow,[z.YF.Failure]:e.statusTokenBackground.red},o={[z.YF.Success]:e.statusTokenIndicator.green,[z.YF.Pending]:e.statusTokenIndicator.yellow,[z.YF.Failure]:e.statusTokenIndicator.red},n={[z.YF.Success]:e.statusTokenText.green,[z.YF.Pending]:e.statusTokenText.yellow,[z.YF.Failure]:e.statusTokenText.red};return{container:{background:i[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:o[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return a()("div",{style:i.container},void 0,a()("div",{style:i.dot}),function(e){switch(e){case z.YF.Success:return a()(u.FormattedMessage,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case z.YF.Pending:return a()(u.FormattedMessage,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case z.YF.Failure:return a()(u.FormattedMessage,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,g.t1)(e)}}(t))}function $(e){let{onShowDetails:t,onRemove:i}=e;window.__c={n:"DropdownMenu"};const o=(0,d.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[]),r=[];return t&&r.push({key:"details",action:()=>t(),render:e=>s.createElement(y.Z,n()({},e,{style:o.menuItem,focused:!1,icon:(0,c.D)(o.menuIcon),title:a()(u.FormattedMessage,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:a()(u.FormattedMessage,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0}))}),i&&r.push({key:"remove",action:()=>i(),render:e=>s.createElement(y.Z,n()({},e,{style:o.menuItem,focused:!1,icon:(0,m.y)(o.menuIcon),title:a()(u.FormattedMessage,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:a()(u.FormattedMessage,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0}))}),0===r.length?null:a()(h.N,{hideDropdownIcon:!0,title:(0,l.o)(o.primaryIcon),items:r})}function J(e){return{domain:e,status:z.YF.Success,data:{type:"verified",domain:e}}}function X(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:z.YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:z.YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const Q=function(e){window.__c={n:"DomainVerificationTable"};const{disabled:t,domains:i,domainVerificationStore:o,verificationType:n,verificationTargetId:r,refreshDomains:l,onRemoveDomain:c,onClickAddDomain:m,renderOverrideAddDomainButton:y}=e,h=(0,d.yK)((e=>(0,v.b)({columnRenderInfo:N,theme:e,containerMarginTop:0})),[]);function b(){t||(m&&m(),o.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}const w=i.map((e=>{let{domain:i,status:r,data:d}=e;return{id:"verified"===d.type?i:d.id,isClickable:!1,domain:i,status:r,onShowDetails:t?void 0:()=>function(e){t||o.setState({domainVerification:e,loading:!1,modalOpen:!0})}(d),onRemove:t?void 0:()=>async function(e,t){let i;if(t===z.YF.Failure)return void c(e);t===z.YF.Pending?i=j.unverifiedDomainWarning:t===z.YF.Success?i="saml_config"===n?j.verifiedSAMLWarning:j.verifiedIntegrationsWarning:(0,g.t1)(t),await p.confirmUserAction({message:a()("div",{style:G},void 0,a()(u.FormattedMessage,{defaultMessage:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})),description:a()("div",{style:Y},void 0,s.createElement(u.FormattedMessage,i)),acceptLabel:a()(u.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:a()(u.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})})&&c(e)}(d,r)}}));return a()(s.Fragment,{},void 0,y?y(b):a()(f.Z,{isLarge:!0,disabled:t,onClick:b,style:{margin:"4px 0px 16px",width:"fit-content"}},void 0,a()(u.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})),a()(v.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:N,rows:w,styles:h,renderNoRowsComponent:()=>a()(S.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,a()(u.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."}))}),a()(H,{store:o,verificationTargetId:r,verificationType:n,refreshDomains:l}))}},69255:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var o=i(23174),n=i.n(o),r=i(10434),a=i.n(r),s=(i(57658),i(67294)),d=i(480),l=i(86628),c=i(77657),m=i(62208),u=i(60291),g=i(77420),p=i(97880),v=i(5366),f=i(49386),y=i(39699),h=i(61202),S=i(87279),b=i(30874),w=i(93405),C=i(78140),x=i(32163),k=i(72495);const M=function(e){window.__c={n:"ExternalObjectInstanceBlockMenu"};const{titleForReloadMenuOption:t,store:i,parentBlockStore:o,onAccept:r,onDismiss:M,extraSecondaryItemKey:I,token:F}=e,D=(0,d.O7)(),T=(0,s.useCallback)((e=>{const t={blocks:[i],environment:D,publicEditMode:void 0};return{key:e.key,render:(i,o)=>e.render(i,t,{onAccept:r,onFocus:o.onFocus}),action:i=>{let{event:o}=i;return e.action(t,o)}}}),[r,D,i]),Z=[];(0,l.VK)((()=>{const e=i.getFormat().bot_id,t=b.Z.getBotsAsRecordMap();if(e&&!0===b.Z.state.loaded){const i=t.getValue({table:g.cZ,id:e});if(i&&i.integration_id&&i.integration_id===c.U9)return!1}return!0}),[i])&&Z.push({key:0,render:e=>s.createElement(k.Z,a()({},e,{style:{paddingTop:0,paddingBottom:0}})),items:[{key:"reload external instance object",render:e=>s.createElement(w.Z,a()({},e,{title:t,svg:u.b})),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h.qK({environment:D,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const P=(0,l.VK)((()=>{switch(I){case"preview_to_mention":return[T(f.OH)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];return[{key:"turn preview into block",render:e=>s.createElement(w.Z,a()({},e,{title:n()(v.FormattedMessage,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:m.z})),action:()=>{o&&F&&y.createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:D,perform:e=>{h.aV({block:i,parentStore:o,transaction:e,token:F}),e.postSubmitCallbacks.push((e=>{e||null==M||M()}))}})}}];default:(0,p.t1)(I)}}),[I,T,i,o,F,D,M]);return Z.push({key:1,render:e=>s.createElement(k.Z,a()({},e,{style:{paddingTop:0,paddingBottom:0}})),items:[...P,T(f.IK)]}),n()(C.Z,{menuType:S.og.Popup},void 0,n()(x.Z,{type:x.i.Vertical,initialFocus:void 0,onAccept:r,sections:Z,style:{paddingTop:3,paddingBottom:3}}))}},98567:(e,t,i)=>{i.d(t,{D5:()=>_e,s6:()=>Ie});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(1302),l=i(13991),c=i(480),m=i(86628),u=i(24405),g=i(15145),p=i(1800),v=i(7057),f=i(78601),y=i(66673),h=i(69651),S=i(75553),b=i(56666),w=i(40462),C=i(11751),x=i(64572),k=i(76725),M=i(72126),I=i(4615),F=i(515),D=i(21202),T=i(70279),Z=i(70203),P=i(18613),_=i(82990),A=i(44876),E=i(5366),B=i(50906),V=i(14871),R=i(45990),O=i(97444),W=i(24539),L=i(95477),U=i(60682),K=i(24990),H=i(49616),z=i(4708),N=i(73744),j=i(41232),G=i(6398),Y=i(88804),q=i(75024),$=i(4023),J=i(15723),X=i(80444),Q=i(77080),ee=i(96049),te=i(42653),ie=i(72014),oe=i(57559),ne=i(48588),re=i(10912),ae=i(18746),se=i(64921),de=i(31945),le=i(51077),ce=i(73063),me=i(12981),ue=i(53437),ge=i(31278),pe=i(76798),ve=i(94096),fe=i(27186),ye=i(19987),he=i(69255),Se=i(25735),be=i(19889),we=i(36517);function Ce(e){window.__c={n:"HoverUserPreviewOverlayRenderer"};const t=(0,m.VK)((()=>X.default.state.currentSpaceStore),[]),i=(0,m.VK)((()=>{var t;return null===(t=e.state)||void 0===t?void 0:t.annotation}),[e.state]),o=(0,y.Rm)(i,void 0,600,Object.is),n=(0,m.VK)((()=>{if(t&&o)return oe.U6.createChildStore(t,{id:o[1],table:be.KJ})}),[t,o]),r=(0,m.VK)((()=>!!n&&n.isDefined()),[n]);return n&&r&&t?a()(we.Z,{targetUserStore:n}):null}var xe=i(29551),ke=i(74169);const Me=(0,E.defineMessages)({aiSummary:{defaultMessage:"Summary",id:"hoverPreviewOverlay.aiSummary.label"}});function Ie(e){window.__c={n:"HoverPreviewOverlay"};const t=(0,m.Kw)(ee.Z,{debugName:"HoverPreviewOverlay"}),{state:i,pinPopup:o,unpinPopup:n,hasBeenHovering:r,isPinned:d}=function(){const[e]=(0,m.AF)(ne.Z),t=(0,y.Kt)(e,400,Object.is),[i,o]=(0,s.useState)(void 0),n=i||t,r=(0,s.useCallback)((()=>o(n)),[n]),a=(0,s.useCallback)((()=>{o(void 0)}),[]);return{state:n,pinPopup:r,unpinPopup:a,hasBeenHovering:e&&e===n,isPinned:Boolean(i)}}(),l=(0,m.VK)((()=>Q.default.checkGate("first_party_links")),[]),u=(0,m.VK)((()=>(0,z.En)()),[]),g=function(e){const t=(0,c.O7)();return(0,m.VK)((()=>!!e&&(0,Y.E)(t,e.store)),[e,t])}(i),p=(0,s.useMemo)((()=>Boolean(i&&function(e,t,i){return t&&(e.annotations.some(Z.j0F)||e.annotations.some(Z.nSN)||i&&e.annotations.some(Z.STW))}(i,g,l))),[i,g,l]),v=!!p||Boolean(!t&&r),f=(0,s.useMemo)((()=>i&&i.token.node.getBoundingClientRect()),[i]),[,h]=(0,m.AF)(te.Z);(0,s.useEffect)((()=>(h({isPinned:d}),()=>h({isPinned:!1}))),[d,h]);const S=!(null!=i&&i.annotations.some(Z.nSN))&&l&&!(null!=i&&i.annotations.some(Z.STW)),b=(u&&(null==i?void 0:i.annotations.some(Z.IWo)))??!1;return a()(ue.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!p,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:ue.ZP.PopupType.Popup,open:v,originRect:f,originGap:8,alignmentToOrigin:b?ue.ZP.Alignment.End:ue.ZP.Alignment.Start,placementToOrigin:b?ue.ZP.Placement.Top:ue.ZP.Placement.Bottom,useLightBoxShadow:S,render:()=>i&&a()("div",{onMouseEnter:o,onMouseLeave:n},void 0,a()(Fe,{state:i,isHoveredTokenEditable:g,onDismiss:n}))})}function Fe(e){window.__c={n:"HoverPreviewOverlayRenderer"};const t=(0,m.VK)((()=>Q.default.checkGate("first_party_links")),[]),i=(0,m.VK)((()=>(0,z.En)()),[]);(0,s.useEffect)((()=>{const e=M.P2(W.l,200,{leading:!0});return N.lj(window,"scroll",e,!0),()=>N.ZV(window,"scroll",e,!0)}),[]);const o=(0,c.Fy)(),r=(0,m.VK)((()=>{const{currentSpaceStore:e}=X.default.state;return e?e.getPermissionGroups():[]}),[]),d=(0,u.yK)((e=>({noMembersInGroupStyle:{fontSize:_.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),l=e.state.annotations,g=l.find(Z.j0F),p=l.find(Z.fpG),v=l.find(Z._bk),f=l.find(Z.aq),y=Z.frE(l),h=t?l.find(Z.STW):void 0,S=i?l.find(Z.IWo):void 0;if(g&&e.state.store.table!==T.x_)return s.createElement(De,n()({},e,{state:{...e.state,annotation:g}}));if(p)return s.createElement(Te,n()({},e,{state:{...e.state,annotation:p}}));if(v){const e=Z.kxk(v);if(e){const t=e.groupId,i=r.find((e=>e.id===t));if(i)return a()(Se.Y,{group:i,limit:10,color:"white_background",trackHover:!0,noMembersMessage:a()(xe.gq,{style:d.noMembersInGroupStyle},void 0,a()("div",{style:_.Z.textOverflowStyle},void 0,a()(E.FormattedMessage,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})))})}}return f?s.createElement(Ze,n()({},e,{state:{...e.state,annotation:f}})):y&&!o.isMobile?s.createElement(_e,n()({},e,{state:{...e.state,annotation:y},onDismiss:e.onDismiss})):t&&h&&!o.isMobile?s.createElement(Ee,n()({},e,{state:{...e.state,annotation:h},onDismiss:e.onDismiss})):S&&!o.isMobile?s.createElement(Ce,n()({},e,{state:{...e.state,annotation:S},onDismiss:e.onDismiss})):null}function De(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{onDismiss:t}=e,{annotation:i,store:o,token:n}=e.state,r=(0,c.O7)(),l=(0,u.Fg)(),v=Z.zW$(i),f=(0,x.A5)({url:v,baseUrl:L.default.domainBaseUrl,publicDomainName:L.default.publicDomainName}),y=(0,s.useCallback)((async()=>{t(),O.AE({token:n,store:o,readOnly:!1}),await d.default.afterNextFlush(),R.dz({type:"focusOnly",focus:!0})}),[t,o,n]),h=(0,s.useCallback)((async()=>{t(),await d.default.afterNextFlush();const e=V.tq.copiedLinkToClipboard;let i=v;const n=(0,F.Wj)({url:v,baseUrl:L.default.domainBaseUrl,publicDomainName:L.default.publicDomainName,isMobile:r.device.isMobile,protocol:L.default.protocol,currentUrl:window.location.href});if("page"===n.name){const e=oe.G.createChildStore(o,{table:D.iU,id:n.blockId});i=(0,p.Z)({pageId:n.blockId,pageModel:e.getModel(),baseUrl:L.default.domainBaseUrl,discussionId:n.discussionId,scrollToBlockId:n.scrollToBlockId,peekViewBlockId:n.peekViewBlockId,peekMode:n.peekMode,pageVisitSource:g.tY.CopyLink})}V.RD({environment:r,stringValue:i,copiedMessage:e})}),[r,t,o,v]),b=(0,u.yK)((e=>({wrapper:{fontSize:_.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:_.Z.fontWeight.regular,fill:e.mediumIconColor},destination:{padding:"4px 0 4px 6px"},button:{display:"flex",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:3,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,..._.Z.textOverflowStyle},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),C=(0,m.VK)((()=>{if(!f)return;const e=oe.G.createChildStore(o,{table:D.iU,id:f});return{pageIcon:(0,P.tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:L.default.domainBaseUrl,getRecordModel:o.getRecordModel,emojiType:(0,U.e_)(r),isSafariOrIOS:r.device.isSafari||r.device.isIOS,isClient:!0,showEmojiInline:r.device.isWindows,currentUserId:r.currentUser.id,theme:l,emojiData:K.Z.state}),title:a()(pe.Z,{style:b.destinationText,store:e})}}),[r,o,f,b,l])||{pageIcon:(0,w.o)(b.icon),title:a()("div",{style:b.destinationText},void 0,v)};return a()(xe.gq,{style:b.wrapper,alignItems:"center"},void 0,a()(xe.gq,{style:b.destination,alignItems:"center"},void 0,C.pageIcon,C.title),a()(ce.Z,{onClick:h,icon:S.U,isDarkIconColor:!0}),e.isHoveredTokenEditable&&a()(se.Z,{style:b.button,onClick:y},void 0,a()(E.FormattedMessage,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})))}function Te(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{annotation:t}=e.state,i=Z.zyO(t),o=(0,u.yK)((e=>({container:{fontSize:_.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),n=(0,E.useIntl)(),r="relative"===i.date_format?"ll":"relative",s=(0,v.ZV)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:n});return s===(0,v.ZV)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:n})?null:a()(xe.gq,{style:o.container,alignItems:"center"},void 0,(0,h.C)(o.icon),a()("div",{style:_.Z.textOverflowStyle},void 0,s))}function Ze(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{annotation:t}=e.state,i=Z.fsE(t),o=(0,E.useIntl)(),n=Z.Z08(i.type,o),r=(0,u.yK)((e=>({container:{fontSize:_.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return a()(xe.gq,{style:r.container,alignItems:"center"},void 0,a()("div",{style:_.Z.textOverflowStyle},void 0,n))}function Pe(e){var t;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:i,store:o}=e,r=(0,u.yK)((e=>({title:{color:e.regularTextColor,fontWeight:_.Z.fontWeight.medium,whiteSpace:"initial"},header:{color:e.mediumTextColor,fontSize:_.Z.fontSize.UISmall.desktop},dictionaryKey:{color:e.mediumTextColor,fontWeight:_.Z.fontWeight.regular,fontSize:_.Z.fontSize.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:_.Z.fontSize.UIRegular.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return s.createElement(s.Fragment,null,i.title&&a()(xe.gq,{},void 0,s.createElement(G.ox,n()({},i.title,{store:o,style:r.title}))),i.headerAttributes&&i.headerAttributes.length>0&&a()(xe.gq,{alignItems:"center",style:{...r.header,marginBottom:3}},void 0,(0,k.Z)(i.headerAttributes.map(((e,t)=>s.createElement(G.ox,n()({key:`attribute-${t}`},e,{store:o,style:{...r.header,..._.Z.textOverflowStyle}}))))||[],(e=>a()("span",{},`dot-${e}`," ","·"," ")))),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&a()(xe.Ht,{},void 0,i.dictionaryAttributes.map(((e,t)=>{var d;let{key:l,value:c}=e;return a()(xe.gq,{style:{marginBottom:t!==((null===(d=i.dictionaryAttributes)||void 0===d?void 0:d.length)??0)-1?3:0}},t,a()("div",{style:{marginRight:10,width:"30%",display:"flex",alignItems:"center"}},void 0,a()("span",{style:r.dictionaryKey},void 0,s.createElement(E.FormattedMessage,n()({},l.formatter,{values:{value:c.attribute.name}})))),a()("div",{style:{width:"70%",display:"flex",alignItems:"center"}},void 0,c.icon&&(0,A.li)(c.icon)&&a()(le.Z,{type:"image_url",imageURL:c.icon.values[0],size:16,style:{marginRight:4}}),s.createElement(G.ox,n()({},c,{store:o,style:r.dictionaryValue,avatarStyle:{marginRight:4}}))))}))),i.bodyAttribute&&a()(xe.gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{}},void 0,a()(G.hx,{attribute:i.bodyAttribute})),i.previewImageAttribute&&a()("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"}},void 0,a()("div",{},void 0,a()(me.Z,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}}))))}function _e(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{state:{annotation:t,store:i,token:o},onDismiss:r}=e,d=Z.frW(t),l=(0,c.O7)(),g=(0,u.Fg)(),p=(0,s.useRef)(null),v=(0,m.VK)((()=>{const t=oe.G.createChildStore(i,{table:D.iU,id:d,spaceId:i.pointer.spaceId}),c=t.canEdit(),m=(0,j._F)({store:t,isInDarkMode:"dark"===g.mode,canEdit:c,currentUserId:l.currentUser.id,getRenderFn:e=>t=>{var i,o;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(o=f.j.hover)||void 0===o?void 0:o.call(f.j,t))},showAction:void 0});if(!m)return;const{renderConfig:u,integration:v}=m,y=Boolean(m.action),h=e.isHoveredTokenEditable,S=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof oe.G?i.recordStoreUIParentStore:void 0;return s.createElement("div",{style:{display:"flex",flexDirection:"column"},ref:p},a()(xe.gq,{alignItems:"center",style:{fontSize:12}},void 0,a()(le.Z,{type:"image_url",imageURL:v.icon,size:16,style:{marginRight:"4px"}}),a()("div",{style:{flexGrow:1,fontWeight:_.Z.fontWeight.medium}},void 0,v.name),o&&!y&&h&&a()("div",{},void 0,a()(de.ZP,{popupType:de.Z4.Popup,placementToOrigin:$.u.Right,alignmentToOrigin:$.v.Start,originGap:4,onClose:()=>{let e=!1;const t=p.current;t&&(e=(0,J.uh)(t.getBoundingClientRect(),fe.IL.x,fe.IL.y)),e||null==r||r()},renderOrigin:e=>s.createElement(se.Z,n()({style:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3}},e),(0,b.o)({width:14})),render:e=>a()(he.default,{titleForReloadMenuOption:a()(E.FormattedMessage,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:S,store:t,token:o,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})}))),y&&h?a()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"}},void 0,a()(ye.Z,{canEdit:c,store:t,isHoverPreview:!0,postActionCallback:r})):a()(Pe,{renderConfig:u,store:t}))}),[d,i,l,g,o,r,e.isHoveredTokenEditable,p]);return v?a()("div",{style:{padding:"8px 16px",minWidth:300,maxWidth:350}},void 0,v):null}function Ae(e){window.__c={n:"HoverPagePreviewContent"};const t=(0,c.O7)(),i=(0,E.useIntl)(),{store:o}=e,n=(0,m.VK)((()=>H.TP(o)),[o]),r=(0,u.yK)((e=>({icon:{height:16,width:16,fill:e.icon.purple,marginRight:2},title:{fontSize:12,color:e.icon.purple},summary:{...(0,q.pd)(4),fontSize:12,color:e.text.primary},contentCover:{color:e.text.primary,backgroundColor:e.accentColors.gray[30],borderColor:e.stroke.deemphasized,padding:"8px 12px",borderWidth:1,borderStyle:"solid",borderRadius:4}})),[]),d=n&&Z.Vkf(n)>=20,l=(0,s.useMemo)((()=>(0,I.ZP)()),[]);return(0,s.useEffect)((()=>{const e=ie.$g.getCurrentPageVisitId();return B.piO(t,{hover_session_id:l,mentioned_page_id:o.pointer.id,hover_content_type:d?"ai_summary":"content_preview",page_visit_id:e}),()=>{B.Yo0(t,{hover_session_id:l,hover_content_type:d?"ai_summary":"content_preview",mentioned_page_id:o.pointer.id,page_visit_id:e})}}),[t,l,d,o.pointer.id]),d?a()("div",{},void 0,a()(xe.gq,{alignItems:"center"},void 0,(0,C.t)(r.icon),a()("div",{style:r.title},void 0,i.formatMessage(Me.aiSummary))),a()("div",{style:r.summary},void 0,a()(ae.A,{textValue:n,parentStore:o}))):a()(re.Z,{variant:"default",store:o,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverHeight:160,contentWrapStyle:r.contentCover,showEmptyGalleryCover:!1,onLoadProxiedImage:()=>{}})}function Ee(e){window.__c={n:"HoverPagePreviewOverlayRenderer"};const t=(0,E.useIntl)(),i=(0,u.yK)((e=>({wrapper:{width:320},content:{padding:"12px 16px 16px"},breadcrumb:{color:e.text.secondary},pageTitle:{display:"inline",fontWeight:_.Z.fontWeight.semibold,color:e.text.primary},pageTitleIcon:{display:"inline",float:"left",marginTop:2,marginRight:4,lineHeight:1},pageTitleContainer:{...(0,q.pd)(2),verticalAlign:"top",fontSize:16,lineHeight:1.25},description:{fontSize:_.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:2}})),[]),o=(0,m.VK)((()=>{const t=X.default.state.currentSpaceStore;if(!t)return;const i=oe.G.createChildStore(t,{id:e.state.annotation[1],table:"block"});return i.isNavigableBlock()&&i.isDefined()?i:void 0}),[e.state.annotation]),[n,r,s,d]=(0,m.VK)((()=>{if(!o)return[void 0,!1,null,null];const e=o.getLastEditedTime(),i=o.getLastEditedByStore(),n=e&&i?a()(E.FormattedMessage,{id:"hoverPreview.pagePreview.editedBy",defaultMessage:"Edited {timeAgo} by {editedBy}",values:{timeAgo:(0,v.tv)(e,l.SP),editedBy:i.getDisplayName(t)}}):null,r=a()(Ae,{store:o});return[o.getIcon(),o.isEmptyPage(),n,r]}),[o,t]);return o?a()("div",{style:i.wrapper},void 0,a()(ke.Z,{store:o,disabled:!0,paddingLeft:0,paddingRight:0,height:60,proxyWidth:320}),a()(xe.Ht,{gap:10,style:i.content},void 0,a()(ve.Z,{store:o,style:i.breadcrumb}),a()("div",{},void 0,a()("div",{style:i.pageTitleContainer},void 0,n&&a()(ge.Z,{disabled:!0,icon:n,isEmptyPage:r,isLarge:!0,disableShrinking:!0,size:16,emojiSize:16,style:i.pageTitleIcon}),a()(pe.Z,{shouldWrap:!0,maxLines:2,store:o,style:i.pageTitle})),a()("div",{style:i.description},void 0,s)),d)):null}},36517:(e,t,i)=>{i.d(t,{Z:()=>_});var o=i(23174),n=i.n(o),r=(i(57658),i(67294)),a=i(480),s=i(86628),d=i(24405),l=i(6695),c=i(72126),m=i(4615),u=i(21202),g=i(19889),p=i(82990),v=i(5366),f=(i(95477),i(66890)),y=i(80444),h=i(886),S=i(88632),b=i(77080),w=i(19671),C=i(57559),x=i(78291),k=i(25225),M=i(97039),I=i(78030),F=i(45653),D=i(29551),T=i(49778);const Z=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],P={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function _(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const i=(0,d.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:p.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:p.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:p.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),o=(0,s.VK)((()=>y.default.state.currentSpaceStore),[]),c=(0,s.VK)((()=>y.default.state.currentUserStore),[]),g=(0,s.VK)((()=>!!t&&t.isDefined()),[t]),v=(0,s.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const i=b.default.getConfigKey("notion_people_block_id","data")[e];if(!i)return;return C.G.createChildStore(t,{table:u.iU,id:(0,m.Mt)(i)})}),[t]),{collectionStore:S,schema:x,format:k}=(0,T.d)(v),F=function(e){let{collectionStore:t,format:i,schema:o,userPeopleCollectionPage:r}=e;return(0,s.VK)((()=>{var e;if(!(t&&i&&o&&r))return;const a=l.iB(i,o,void 0,l.j5.Collection),s=null==a||null===(e=a.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const i=null===(t=o[e.property])||void 0===t?void 0:t.name;return void 0!==i&&Z.includes(i)}));if(!s)return;const d={};return s.forEach((e=>{var i;d[(null===(i=o[e.property])||void 0===i?void 0:i.name)||""]=n()(M.Z,{store:r,property:e.property,locked:!0,disabled:!0,format:I.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:w.Z,showRelationTooltip:!1,collectionStore:t})})),d}),[t,o,i,r])}({collectionStore:S,format:k,schema:x,userPeopleCollectionPage:v}),P=(0,a.O7)(),_=(0,r.useMemo)((()=>new h.Z(P)),[P]);(0,r.useEffect)((()=>{S&&_.setContext({type:"collectionPage",collectionStore:S})}),[_,S]);const V=(0,s.VK)((()=>!!(t&&c&&g)&&t.id===c.id),[t,c,g]);return t&&g&&o?n()("div",{style:i.wrapper},void 0,v&&_&&F?n()(f.L1,{value:_},void 0,n()(D.Ht,{},void 0,n()(D.gq,{gap:3,alignItems:"center",style:i.profile},void 0,n()(A,{userStore:t,styles:i})),n()("div",{style:i.description},void 0,n()(E,{userProfile:F,styles:i}),V?n()(D.gq,{gap:1,alignItems:"center"},void 0,n()(B,{spaceStore:o,limit:5,styles:i})):void 0))):n()(D.Ht,{},void 0,n()(D.gq,{gap:3,alignItems:"center",style:i.profile},void 0,n()(A,{userStore:t,styles:i})),V?n()("div",{style:i.description},void 0,n()(D.gq,{gap:1,alignItems:"center"},void 0,n()(B,{spaceStore:o,limit:5,styles:i}))):void 0)):null}function A(e){let{userStore:t,styles:i}=e;window.__c={n:"UserContactCard"};const o=(0,v.useIntl)(),{name:a,email:d}=(0,s.VK)((()=>({name:t.getFullName(o),email:t.getEmail()})),[t,o]);return r.createElement(r.Fragment,null,n()(F.Z,{userStore:t,size:70,borderStyle:"none"}),n()(D.Ht,{gap:1},void 0,n()("div",{style:i.profileTitle},void 0,a),n()("div",{style:i.profileSubtitle},void 0,d)))}function E(e){let{userProfile:t,styles:i}=e;return t?r.createElement(r.Fragment,null,Z.filter((e=>t[e])).map((e=>n()(D.gq,{gap:1,alignItems:"center"},e,n()(D.Ht,{},void 0,n()(D.gq,{style:i.profileKeyRow},void 0,n()("div",{style:i.profileKeyText},void 0,P[e]?P[e]:e))),n()(D.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"}},void 0,t[e]))))):null}function B(e){let{spaceStore:t,limit:i,styles:o}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:r}=(0,s.VK)((()=>{var e,o;const n=null===(e=x.default.state)||void 0===e?void 0:e.data,r=n?k.CM(n):[],a=(null==n?void 0:n.userSimilarity)||{},s=r.map((e=>{const t=a[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,i),d=[],l=c.yW(s.map((e=>{const i=C.U6.createChildStore(t,{table:g.KJ,id:e.id});return d.push({id:e.id,similarity:e.similarity,userStore:i}),i.isReady()})));return{isOnline:S.Z.state.online,subscriptionDataStoreData:n,userSimilarityData:(null===(o=x.default.state.data)||void 0===o?void 0:o.userSimilarity)||{},visibleUsersLoaded:l,visibleUsers:r,userSimilarityList:d}}),[t,i]);return t&&r&&0!==r.length?n()(D.gq,{gap:1,alignItems:"center",style:{paddingTop:4}},void 0,n()(D.Ht,{},void 0,n()(D.gq,{style:o.profileKeyRow},void 0,n()("div",{style:o.profileKeyText},void 0,"Coworkers"))),n()(D.Ht,{},void 0,n()(D.gq,{gap:5},void 0,n()("div",{},void 0,n()("div",{style:{display:"flex",position:"relative",float:"right"}},void 0,r.map((e=>n()("div",{style:{marginLeft:1.5}},e.id,n()(F.Z,{userStore:e.userStore,size:18}))))))))):null}},46978:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(23174),n=i.n(o),r=i(67294),a=i(24405);function s(e,t){let{isSelected:i}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:o,dotStyle:s}=(0,a.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:i?e.blueColor:e.whiteButtonBackground,border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return r.createElement("div",{ref:t,style:o},n()("div",{style:s}))}const d=r.forwardRef(s)},5478:(e,t,i)=>{i.d(t,{YF:()=>u,ZP:()=>p});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(24405),l=i(4023),c=i(26388),m=i(85567);const u={Success:"success",Pending:"pending",Failure:"failure"};const g={display:"flex",justifyContent:"center",alignItems:"baseline"},p=function(e){let{status:t,value:i,renderTooltip:o,...r}=e;window.__c={n:"StatusToken"};const p=(0,d.Fg)(),v={[u.Success]:p.statusTokenBackground.green,[u.Pending]:p.statusTokenBackground.yellow,[u.Failure]:p.statusTokenBackground.red},f={[u.Success]:p.statusTokenIndicator.green,[u.Pending]:p.statusTokenIndicator.yellow,[u.Failure]:p.statusTokenIndicator.red},y={[u.Success]:p.statusTokenText.green,[u.Pending]:p.statusTokenText.yellow,[u.Failure]:p.statusTokenText.red};return o?s.createElement(m.Z,n()({},r,{backgroundColor:v[t],color:y[t],value:a()(c.Z,{placement:l.u.Bottom,alignment:l.v.Start,renderTooltip:o,render:e=>s.createElement("div",n()({style:g},e),a()("div",{style:{background:f[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)})})):s.createElement(m.Z,n()({},r,{backgroundColor:v[t],color:y[t],value:a()("div",{style:g},void 0,a()("div",{style:{background:f[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)}))}},719:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(83355),l=i(98742),c=i(74194);class m extends d.Z{constructor(){super(...arguments),this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}}renderComponent(){const{device:e}=this.environment;return a()("div",{className:this.props.readOnly?void 0:"notion-focusable-within",onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return s.createElement(c.Z,n()({format:c.Z.Format.Transparent},(0,l.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}m.displayName="TokenInput",m.inputStyle={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const u=m},25735:(e,t,i)=>{i.d(t,{Y:()=>v});var o=i(23174),n=i.n(o),r=i(67294),a=i(480),s=i(86628),d=i(24405),l=i(5366),c=i(82990),m=i(50906),u=i(16639),g=i(80444),p=i(29302);function v(e){window.__c={n:"GroupMembersListTooltip"};const{group:t,limit:i,noMembersMessage:o,color:v,trackHover:f}=e,y=(0,d.yK)((e=>({container:{marginBottom:4,..."white_background"===v?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===v?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[v]),h=(0,s.VK)((()=>g.default.state.currentSpaceStore),[]),S=(0,a.O7)();(0,s.VK)((()=>{f&&m.iHH(S,{group_id:t.id})}),[f,t.id,S]);const{countRemainingUsers:b,limitedUserStores:w}=(0,s.VK)((()=>(0,u.rm)({group:t,spaceStore:h,limit:i})),[t,h,i]);return 0===w.length?r.createElement(r.Fragment,null,o):n()("div",{style:y.container},void 0,w.map((e=>n()("div",{style:y.userContainer},e.id,n()(p.Z,{style:y.user,userStore:e,avatarSize:18})))),b>0&&n()("div",{style:y.moreMessage},void 0,n()(l.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:b}})))}},88804:(e,t,i)=>{i.d(t,{E:()=>d,N:()=>s});var o=i(83212),n=i(57559),r=i(98165),a=i(67669);function s(e,t){const i=t.getRecordStoreUIRoot(),s=i instanceof n.G&&i.isPageBlock()&&i.isLocked(),d=(0,r.n3)(i)&&o.Z.getMode(e,i),l=Boolean((0,a.YF)(d));return!t.canEdit()||s||l}function d(e,t){return!s(e,t)}},52507:(e,t,i)=>{i.d(t,{AS:()=>d,Hs:()=>l,ZP:()=>c});var o=i(49085),n=i(59753),r=i(44312),a=i(97880);class s extends o.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const d=(0,a.AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function l(e){const t=n.kk.fromValue(r.Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}const c=s},39248:(e,t,i)=>{i.d(t,{E:()=>s});var o=i(4615),n=i(89101),r=i(64002);function a(e,t){const i=t.trim().toLowerCase(),o=(0,r.Of)(i).replace(/\./g,"-");return o?`${o}-${e}`:e}function s(e,t){if(!(0,o.e)(e))return`${n._j.integrations}/${e}`;const i=a(e,void 0===t?"":t);return`${n._j.integrations}/${i}`}}}]);