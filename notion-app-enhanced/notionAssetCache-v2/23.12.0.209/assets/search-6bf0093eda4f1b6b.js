"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6464],{3043:(e,t,r)=>{r.d(t,{Qe:()=>n.Z,Yo:()=>s.Z,fY:()=>i.f});var i=r(87686),s=r(24946),n=r(7692)},92660:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(23174),s=r.n(i),n=(r(67294),r(83355)),o=r(50506),l=r(53437);class a extends n.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,r=this.props.modalStore.state;return t.isMobile?s()(l.ZP,{ariaLabel:this.props.ariaLabel,open:r.open,popupType:l.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):s()(o.Z,{ariaLabel:this.props.ariaLabel,open:r.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}a.displayName="DefaultPopupOrModal"},36507:(e,t,r)=>{r.d(t,{Z:()=>m});var i=r(23174),s=r.n(i),n=r(10434),o=r.n(n),l=r(67294),a=r(83355),d=r(82990),c=r(87279),u=r(75024),h=r(28992);class p extends a.Z{constructor(){super(...arguments),this.styles={menuItem:{minHeight:void 0,...this.environment.device.isMobile&&{background:void 0,boxShadow:void 0},paddingTop:32,paddingBottom:32},text:{textAlign:"center"},title:{margin:0,fontWeight:d.Z.fontWeight.medium,fontSize:u.yv(this.environment,"UIRegular"),lineHeight:u.Dp(this.environment,"UIRegular")},caption:{fontSize:u.yv(this.environment,"UIRegular")}}}renderComponent(){const{style:e,captionStyle:t,...r}=this.props,i={...this.styles.menuItem,...e},s={...this.styles.caption,...t};return l.createElement(h.Z,o()({},r,{title:this.renderTitle(),caption:this.renderCaption(s),textWrapperStyle:this.styles.text,style:i,captionStyle:s}))}renderTitle(){const{title:e}=this.props;if(!e)return;const t=this.styles,r=this.getThemeColors(),i={...t.title,...r.title};return s()("h4",{role:"alert",style:i},void 0,e)}renderCaption(e){const{caption:t}=this.props;if(!t)return;const r={...e,...this.getThemeColors().caption};return s()("div",{style:r},void 0,t)}getThemeColors(){return{title:{color:this.theme.mediumTextColor},caption:{color:this.theme.lightTextColor}}}}p.displayName="ErrorMenuItem",p.contextTypes={...c.mw,...a.w};const m=p},30676:(e,t,r)=>{r.d(t,{F:()=>u});var i=r(10434),s=r.n(i),n=r(23174),o=r.n(n),l=r(67294),a=r(86628),d=r(52275),c=r(93686);function u(e){window.__c={n:"TeamMenuItem"};const{teamStore:t}=e,{name:r}=(0,a.VK)((()=>({name:t.getName()})),[t]);return l.createElement(d.Z,s()({},e,{icon:o()(c.p,{size:14,store:t,disabled:!0}),title:r}))}},97680:(e,t,r)=>{r.d(t,{Z:()=>S});var i=r(10434),s=r.n(i),n=r(23174),o=r.n(n),l=r(67294),a=r(83355),d=r(66897),c=r(97880),u=r(33929),h=r(87279),p=r(98742),m=r(52275),g=r(26388),v=r(70301),f=r(45653);class y extends a.Z{renderComponent(){const{actor:e,userTitle:t,useEmailAsTooltip:r,tooltip:i,tooltipPlacement:n}=this.props,a=u.default.getIntl(),h=e.asActor&&e.isUser()?e.email:void 0,y=r&&h?h:i,S=this.environment.device.isMobile?24:20;let b;return(0,d.YU)(e)?b=o()(v.Z,{botValue:null==e?void 0:e.asActor,size:S}):(0,d.$S)(e)?b=o()(f.Z,{userValue:null==e?void 0:e.asActor,size:S}):(0,d.Iq)(e)?b=o()(f.Z,{userValue:void 0,size:S}):(0,c.t1)(e),o()(g.Z,{placement:n??g.Z.Placement.Bottom,alignment:g.Z.Alignment.Start,textWrap:!0,render:r=>l.createElement(m.Z,s()({},(0,p.Z)(r,this.props),{icon:b,title:t??(0,d.$4)(a,e),className:"notranslate"})),disableTooltip:!y,renderTooltip:()=>y})}}y.displayName="UserMenuItem",y.contextTypes={...h.mw,...a.w};const S=y},22715:(e,t,r)=>{r.d(t,{Z:()=>o});r(23174);var i=r(67294),s=r(480),n=r(24405);r(58047);function o(){window.__c={n:"WebComponentNotSupportedInMobileNativeWarning"};(0,s.O7)(),(0,n.yK)((e=>({container:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return i.createElement(i.Fragment,null)}},83890:(e,t,r)=>{r.d(t,{Z:()=>M});var i=r(10434),s=r.n(i),n=r(23174),o=r.n(n),l=r(67294),a=r(83355),d=r(66897),c=r(22686),u=r(19889),h=r(7928),p=r(5366),m=r(31299),g=r(57559),v=r(92864),f=r(93044),y=r(255),S=r(97680),b=r(8319);class C extends a.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:r,onRemove:i,onClick:s}=t;const n=this.styles,l=this.getUserValue(e),a=o()(y.Z,{disabled:r,onClick:i});return o()(S.Z,{disabled:r,focused:!1,actor:(0,d.m3)(l),right:a,style:n.menuItem,desktopTitleStyle:n.menuItemTitle,onClick:s},e)},this.renderItemForSummary=e=>(0,h.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:r}=this.props,i=1===r.length,s=this.getUserValue(e);if(s)return o()(v.ZP,{format:this.environment.device.isMobile?f.lP.Large:f.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,d.m3)(s),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const r=this.getUserValue(e);return l.createElement(S.Z,s()({},t,{key:e,actor:(0,d.m3)(r)}))},this.performRequest=async e=>{let{query:t,current:r}=e;const i=new Set(r);return(await m.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return g.U6.createChildStore(t,{table:u.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:r,onChange:i,disabled:s,focused:n,onMenuDismiss:l,intl:a}=this.props;return o()(b.Z,{mode:e,title:t,icon:c.f,iconStyles:this.styles.recordIcon,items:r,onChange:i,disabled:s,focused:n,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:o()(p.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:(null==r?void 0:r.length)>0})}}C.displayName="SearchPersonFilter";const M=(0,p.injectIntl)(C)},9102:(e,t,r)=>{r.r(t),r.d(t,{SearchStaticContext:()=>Qi,SearchStoresContext:()=>Ji,default:()=>Xi});var i=r(23174),s=r.n(i),n=(r(57658),r(67294)),o=r(83355),l=r(18466),a=r(49085),d=r(15145),c=r(12174),u=r(72126),h=r(4615),p=r(97880);var m=r(70203),g=r(63143),v=r(50906),f=r(75018),y=r(87531),S=r(74647),b=r(81598),C=r(95477),M=r(73744),x=r(69988),I=r(98165),P=r(65598),T=r(65496),w=r(95697),k=r(80444),R=r(24042),F=r(77080),Z=r(32470),B=r(55320),E=r(2342),O=r(30857),A=r(87956),L=r(29026),D=r(25225),q=r(9019),N=r(10434),V=r.n(N),_=r(480),z=r(86628),W=r(24405),H=r(29477),U=r(43250),K=r(87279),j=r(82063),$=r(5162),G=r(88632),Q=r(69454),J=r(36488),Y=r(56940),X=r(78140),ee=r(40721),te=r(83785),re=r(22715),ie=r(67220),se=r(69651),ne=r(64275),oe=r(6637),le=r(60291),ae=r(37612),de=r(83303),ce=r(53772),ue=r(82990),he=r(5366),pe=r(61766),me=r(23063),ge=r(64921),ve=r(52275),fe=r(31945),ye=r(60458),Se=r(89728),be=r(72495),Ce=r(93481),Me=r(84619),xe=r(90028),Ie=r(21202),Pe=r(31299),Te=r(33929),we=r(15447),ke=r(57559),Re=r(31278),Fe=r(11470),Ze=r(76798),Be=r(255),Ee=r(85567),Oe=r(8319);const Ae=(0,he.defineMessages)({searchPages:{defaultMessage:"Search pages",id:"searchPageFilter.searchTokenFilter.tokenInput.placeholder"},selectAPage:{defaultMessage:"Select a page",id:"searchPageFilter.searchTokenFilter.resultSection.title"}});class Le extends o.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:r,onRemove:i,onClick:n}=t;const o=this.styles,l=this.createBlockStore(e),a=s()(Be.Z,{disabled:r,onClick:i});return s()(Fe.Z,{disabled:r,focused:!1,store:l,right:a,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:n})},this.renderItemForSummary=e=>s()(Ze.Z,{store:this.createBlockStore(e),shouldWrap:!0,maxLength:50}),this.renderToken=(e,t)=>{const{blockIds:r}=this.props,i=this.tokenStyles,n=1===r.length,o=this.createBlockStore(e),l=s()("div",{style:i.token},void 0,s()(Re.Z,{disabled:!0,icon:o.getIcon(),isEmptyPage:!1,size:20,style:i.icon}),s()(Ze.Z,{store:o}));return s()(Ee.Z,{format:this.environment.device.isMobile?Me.l.Large:Me.l.Small,value:l,showRemoveButton:!0,onClickRemove:t.onRemove,isSingle:n,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1},e)},this.renderResultMenuItem=(e,t)=>{const r=this.createBlockStore(e);return n.createElement(Fe.Z,V()({},t,{key:e,store:r}))},this.performRequest=async e=>{let{query:t,current:r}=e;const{currentSpaceStore:i}=k.default.state;if(!i)return[];const s=t?(await Pe.nJ({environment:this.environment,query:t,limit:20,spaceId:i.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ancestor_filter_page_search",boostRecentlyViewedPages:!0})).results:we.X4.state.map((e=>e.pageId)),n=new Set(r);return s.filter((e=>!n.has(e)))},this.createBlockStore=e=>{const{parentStore:t}=this.props;return ke.G.createChildStore(t,{table:Ie.iU,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{fill:"currentColor"}},this.tokenStyles={token:{display:"flex",alignItems:"center"},icon:{marginRight:4}}}renderComponent(){const{mode:e,title:t,blockIds:r,onChange:i,disabled:n,focused:o,onMenuDismiss:l}=this.props;return s()(Oe.Z,{mode:e,hasItemsSelected:(null==r?void 0:r.length)>0,title:t,icon:xe.j,iconStyles:this.styles.recordIcon,items:r,onChange:i,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:s()(he.FormattedMessage,{defaultMessage:"Add another page",id:"searchPageFilter.searchTokenFilter.addAPage.button"}),labelText:{title:t,tokenInputPlaceholder:Te.default.formatMessage(Ae.searchPages),componentDebugName:"SearchPageFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,disabled:n,onMenuDismiss:l})}}Le.displayName="SearchPageFilter";const De=Le;var qe=r(83890),Ne=r(88507),Ve=r(29369),_e=r(92338),ze=r(30397),We=r(93044),He=r(30676);class Ue extends o.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:r,onRemove:i,onClick:n}=t;const o=this.styles,l=this.createTeamStore(e),a=s()(Be.Z,{disabled:r,onClick:i});return s()(He.F,{disabled:r,focused:!1,teamStore:l,right:a,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:n},e)},this.renderItemForSummary=e=>this.createTeamStore(e).getName(),this.renderAvatarFactory=e=>{const t=e.getIcon();return e=>s()(Re.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:e})},this.renderToken=(e,t)=>{const{teamIds:r}=this.props,i=(0,_e.iY)(r),n=1===(null==i?void 0:i.length),o=this.createTeamStore(e);if(!o)return;const l=o.getName();return s()(We.ZP,{format:this.environment.device.isMobile?We.lP.Large:We.lP.Small,showRemoveButton:!0,isSingle:n,onClickRemove:t.onRemove,renderAvatar:this.renderAvatarFactory(o),title:l,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const r=this.createTeamStore(e);return n.createElement(He.F,V()({},t,{key:e,teamStore:r}))},this.performRequest=async e=>{var t;let{query:r,current:i}=e;const s=new Set(i),n=k.default.state.currentSpaceViewStore,o=k.default.state.currentSpaceStore,l=null===(t=k.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!n||!o||!l)return[];if(!r){const e=new Set(n.getTeamsStores().map((e=>e.id)));if(ze.Z.state.teams.map((e=>e.id)).forEach((t=>e.add(t))),e.size>0)return[...e]}const a=await(0,w.qX)({environment:this.environment,spaceStore:o,currentUserId:l});return(await Pe.zf({query:r,spaceViewStore:n,teamStores:a})).filter((e=>!s.has(e.id))).slice(0,20).map((e=>e.id))},this.createTeamStore=e=>{const{parentStore:t}=this.props;return ke.zX.createChildStore(t,{table:Ve.e0,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:6,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,teamIds:r,onChange:i,disabled:n,focused:o,onMenuDismiss:l,intl:a}=this.props,d=(0,_e.iY)(r);return s()(Oe.Z,{mode:e,title:t,icon:Ne.I,iconStyles:this.styles.recordIcon,items:d||[],onChange:i,disabled:n,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:s()(he.FormattedMessage,{defaultMessage:"Add a teamspace",id:"search.filterMenu.addATeamButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search teamspaces",id:"search.filterMenu.searchTeams.placeholder"}),componentDebugName:"SearchTeamFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:Boolean(d&&(null==d?void 0:d.length)>0)})}}Ue.displayName="SearchTeamFilter";const Ke=(0,he.injectIntl)(Ue);var je=r(33338),$e=r(86825),Ge=r(75689),Qe=r(91642);class Je extends o.Z{constructor(){super(...arguments),this.handleToggle=()=>{const{value:e,onChange:t}=this.props;t(!e)},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},sectionMenuItem:{display:"flex"}}}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){return s()(Qe.Z,{marginAfter:!1,style:this.styles.sectionMenuItem},void 0,this.renderSwitcherMenuItem(e))}renderMobile(e){const{title:t,value:r,disabled:i}=this.props;return e===Oe.z.Button?this.renderSwitcherMenuItem(e):s()(Ge.Z,{disabled:i,onClick:this.handleToggle,label:t,isToggle:!0,isToggleActive:r})}renderSwitcherMenuItem(e){const{title:t,icon:r,value:i,style:o,...l}=this.props,a=this.styles,d=this.getThemeColors(),c={...a.menuItem,...d.menuItem,...o};return e===Oe.z.Pill?s()(je.Z,{on:i,hideChevron:!0,title:s()("span",{},void 0,t),onClick:this.handleToggle,icon:r(a.pillIcon)}):n.createElement($e.Z,V()({title:t,icon:r(a.icon),on:i,onClick:this.handleToggle,style:c},l))}getThemeColors(){return{menuItem:{color:this.theme.mediumTextColor}}}}Je.displayName="SearchToggleFilter",Je.Mode=Oe.z;const Ye=Je;var Xe=r(8848),et=r(42853),tt=r(32163);function rt(e){window.__c={n:"SearchExperimentFilterPopupButton"};const t=(0,_.Fy)();return s()(fe.ZP,{popupType:t.isMobile?fe.Z4.SlideUp:fe.Z4.Popup,renderOrigin:t=>n.createElement(st,V()({events:t},e)),render:t=>n.createElement(it,V()({parent:t},e))})}function it(e){let{parent:t,experiment:r,searchExperimentOverrides:i,onChange:o}=e;window.__c={n:"SearchExperimentFilterMenu"};const l=(0,_.Fy)(),a=(0,W.yK)((()=>({menuOptionStyle:{color:Xe.ZP.mediumTextColor}})),[]);let d;d=l.isMobile?{menuType:K.og.Modal,title:r.experimentId,right:s()(he.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:K.og.Popup,width:250};const c=r.groups.map((e=>({key:e,action:i=>{o({experimentId:r.experimentId,group:e}),t.close()},render:(t,r)=>n.createElement(ve.Z,V()({},t,{title:e,style:a.menuOptionStyle}))})));return n.createElement(X.Z,d,s()(tt.Z,{type:tt.i.Vertical,initialFocus:void 0,sections:[{key:r.experimentId,render:e=>n.createElement(be.Z,e),items:c}]}))}function st(e){let{experiment:t,events:r,searchExperimentOverrides:i}=e;window.__c={n:"SearchExperimentFilterMenuButton"};const o=(0,W.yK)((e=>({experimentGroupButtonChevronStyle:{width:10,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left",overflow:"hidden",marginLeft:6,color:e.mediumTextColor},rowContainer:{display:"flex",overflow:"hidden",flexDirection:"row"},groupCell:{overflow:"hidden",marginRight:4}})),[]);return n.createElement(Se.Z,V()({},r,{isSmall:!0,key:t.experimentId,style:o.experimentGroupButtonStyle}),s()("div",{style:o.rowContainer},void 0,s()("div",{style:o.groupCell},void 0,i[t.experimentId]||t.group),s()("div",{},void 0,(0,et.i)(o.experimentGroupButtonChevronStyle))))}const nt=e=>({fontSize:14,lineHeight:1.2,color:e.mediumTextColor,marginRight:4,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),ot=function(e){window.__c={n:"SearchExperimentFilter"};const{experiment:t}=e,{leftOverrides:r,rightOverrides:i,experimentDiffers:o,experimentAgreesButNondefault:l}=(0,z.VK)((()=>{const e=Z.v_.state.searchExperimentOverrides,r=Z.BJ.state.searchExperimentOverrides,i=(e[t.experimentId]??t.group)!==(r[t.experimentId]??t.group);return{leftOverrides:e,rightOverrides:r,experimentDiffers:i,experimentAgreesButNondefault:!i&&void 0!==r[t.experimentId]&&e[t.experimentId]!==t.group}}),[t]),a=(0,W.yK)((e=>({rowContainer:{backgroundColor:o?e.equationErrorPlaceholderBackground:l?e.accentColors.yellow[100]:void 0},titleCell:{...nt(e),maxWidth:180,textOverflow:"ellipsis",overflow:"hidden"}})),[l,o]),d=(0,n.useCallback)((e=>{const{experimentId:t,group:r,store:i}=e;i.setState({...i.state,searchExperimentOverrides:{...i.state.searchExperimentOverrides,[t]:r}})}),[]);return n.createElement(n.Fragment,null,s()("div",{style:{...a.titleCell,...a.rowContainer}},void 0,t.experimentId.replace("search-","")),s()("div",{style:a.rowContainer},void 0,s()(rt,{experiment:t,searchExperimentOverrides:r,onChange:e=>{d({...e,store:Z.v_})}})),s()("div",{style:a.rowContainer},void 0,s()(rt,{experiment:t,searchExperimentOverrides:i,onChange:e=>{d({...e,store:Z.BJ})}})))};var lt=r(53877),at=r(42875),dt=r(22686);let ct=function(e){return e[e.Button=0]="Button",e[e.MenuItem=1]="MenuItem",e}({});class ut extends o.Z{constructor(){super(...arguments),this.handleFilterClick=e=>{const{onMenuDismiss:t}=this.props;this.applyFilter(e),this.openSidebar(),t&&t()},this.applyFilter=e=>{L.ZP.updateFilters(e)},this.openSidebar=()=>{L.ZP.isDebugSidebarOpen()||L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},buttonFilter:{padding:"4px 8px",display:"flex",alignItems:"center",overflow:"hidden"},buttonText:{...ue.Z.textOverflowStyle},icon:{display:"inline-block",height:14,width:14,fill:"currentColor"},buttonIcon:{marginRight:6}}}renderComponent(){const{mode:e}=this.props;return e===ct.Button?this.renderAsButton():e===ct.MenuItem?this.renderAsMenuItem():void(0,p.t1)(e)}renderAsButton(){const{icon:e,title:t,filter:r}=this.props,i=this.styles,n=this.getThemeColors();return s()(ge.Z,{style:{...i.buttonFilter,...n.buttonFilter},onClick:()=>this.handleFilterClick(r)},void 0,e&&e({...i.icon,...i.buttonIcon}),s()("span",{style:i.buttonText},void 0,t))}renderAsMenuItem(){const{icon:e,title:t,filter:r,focused:i}=this.props,n=this.styles,o=this.getThemeColors(),l={...n.menuItem,...o.menuItem};return s()(ve.Z,{icon:e&&e(n.icon),focused:i,title:t,onClick:()=>this.handleFilterClick(r),style:l})}getThemeColors(){const{device:e}=this.environment;return{menuItem:{color:e.isDesktop?this.theme.mediumTextColor:void 0,...this.props.isLastInSection&&{boxShadow:void 0}},buttonFilter:{color:this.theme.mediumTextColor}}}}ut.displayName="SearchFilterPreset",ut.Mode=ct;class ht extends o.Z{renderComponent(){const e=ht.getCurrentPageFilter();if(e)return n.createElement(ut,V()({icon:xe.j,title:s()(he.FormattedMessage,{id:"search.filterMenu.quickFilters.inCurrentPage",defaultMessage:"In current page"}),filter:e},this.props))}static isActive(e){const t=ht.getCurrentPageFilter();if(!t)return!1;if(!t.ancestors)return!1;const r=t.ancestors[0];return-1!==e.ancestors.indexOf(r)}}ht.displayName="InCurrentPagePreset",ht.getCurrentPageFilter=()=>{const{mainEditorCurrentBlockStore:e}=k.default.state;if(e&&e.id)return{ancestors:[e.id]}};class pt extends o.Z{renderComponent(){const e=pt.getCurrentUserFilter(this.environment);if(e)return n.createElement(ut,V()({icon:dt.f,title:s()(he.FormattedMessage,{id:"search.filterMenu.quickFilters.createdByMe",defaultMessage:"Created by me"}),filter:e},this.props))}static isActive(e,t){const r=pt.getCurrentUserFilter(e);if(!r)return!1;if(!r.createdBy)return!1;const i=r.createdBy[0];return-1!==t.createdBy.indexOf(i)}}pt.displayName="CreatedByMePreset",pt.getCurrentUserFilter=e=>{const{id:t}=e.currentUser;if(t)return{createdBy:[t]}};class mt extends o.Z{renderComponent(){const e=mt.getPastWeekFilter();if(e)return n.createElement(ut,V()({icon:se.C,title:s()(he.FormattedMessage,{id:"search.filterMenu.quickFilters.editedLastWeek",defaultMessage:"Edited last week"}),filter:e},this.props))}static isActive(e){const{lastEditedTime:t}=mt.getPastWeekFilter();return u.Xy(t,e.lastEditedTime)}}mt.displayName="EditedLastWeekPreset",mt.getPastWeekFilter=()=>({lastEditedTime:{starting:lt.Oo((0,at.r)()),ending:lt.Lg((0,at.r)())}});var gt=r(1743),vt=r(74194);function ft(e){window.__c={n:"SearchStringOverrideControls"};const{leftValue:t,rightValue:r,setLeftValue:i,setRightValue:o,placeholder:l,label:a}=e,{titleCell:d,rightTitleCell:c,leftTitleCell:u}=(0,W.yK)((e=>{const i=nt(e);return{titleCell:i,rightTitleCell:{...i,color:r?i.color:e.lightTextColor,width:"95%"},leftTitleCell:{...i,color:t?i.color:e.lightTextColor,width:"95%"}}}),[t,r]),[h,p]=(0,n.useState)(r),[m,g]=(0,n.useState)(t);(0,n.useEffect)((()=>{void 0===r&&p(void 0),void 0===t&&g(void 0)}),[r,t]);const v=(0,n.useCallback)((()=>{o(h)}),[o,h]),f=(0,n.useCallback)((()=>{i(m)}),[i,m]),y=(0,n.useCallback)((e=>{p(e.target.value)}),[]),S=(0,n.useCallback)((e=>{g(e.target.value)}),[]);return n.createElement(n.Fragment,null,s()("div",{style:d},void 0,a),s()(gt.Z,{capture:!0,allowMenuList:!1},void 0,s()(vt.Z,{style:u,onBlur:f,value:m,onChange:S,placeholder:l}),s()(vt.Z,{style:c,onBlur:v,value:h,onChange:y,placeholder:l})))}let yt=function(e){return e.Button="Button",e.Section="Section",e}({});class St extends o.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:pe.Z},this.renderAddFilterOrigin=e=>{const t=this.styles;return n.createElement(Se.Z,V()({},e,{style:t.addFilterButtonMobile,icon:oe.I,isBlue:!0}),s()(he.FormattedMessage,{defaultMessage:"Add filter",id:"search.addFilter.button.label"}))},this.renderAddFilterMenu=()=>s()(X.Z,{menuType:K.og.ActionSheet},void 0,this.renderSuggestedFilters(),s()(Qe.Z,{title:this.renderMoreFiltersTitle()},void 0,this.renderCreatedByFilter(Oe.Z.Mode.Button),this.renderCreatedTimeFilter(Oe.Z.Mode.Button),this.renderLastEditedTimeFilter(Oe.Z.Mode.Button),this.renderAncestorFilter(Oe.Z.Mode.Button),this.renderInTeamFilter(Oe.Z.Mode.Button))),this.searchExperimentsToToggle=this.createComputedStore((()=>Object.entries(c.g6).map((e=>{let[t,r]=e;return{experimentId:t,experimentVersion:1,group:F.default.getGroup(t),groups:["control",...r]}})))),this.closeAddFilterMenu=()=>{const{buttonPopupStore:e}=this.stores;e.setState({...e.state,open:!1})},this.callTitleFilterUpdateFns=e=>{L.ZP.updateFilters({navigableBlockContentOnly:e})},this.closeSidebar=()=>L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!1}),this.styles={sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 250px",minHeight:400},sidebarHidden:{display:"none"},addFilterButtonMobile:{fontSize:this.props.isMobile?ue.Z.fontSize.UISmall.mobile:ue.Z.fontSize.UISmall.desktop,fontWeight:ue.Z.fontWeight.medium,marginRight:-8}}}renderComponent(){return this.props.isMobile?this.props.mode===yt.Button?this.renderAddButtonMobile():this.props.mode===yt.Section?this.renderActiveFiltersMobile():void(0,p.t1)(this.props.mode):this.renderSidebar()}renderActiveFiltersMobile(){const{state:e}=L.ZP,t=T.De(e.query.filters);return s()(be.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,this.renderTitlesOnlyFilter(Oe.z.Section),this.renderDeletedOnlyFilter(Oe.z.Section),this.renderActiveFilters(t,Oe.Z.Mode.Section))}renderAddButtonMobile(){const{buttonPopupStore:e}=this.stores;return s()(fe.ZP,{popupType:fe.Z4.SlideUp,buttonPopupStore:e,renderOrigin:this.renderAddFilterOrigin,render:this.renderAddFilterMenu})}renderActiveFilters(e,t){return s()(n.Fragment,{},void 0,e.createdBy&&this.renderCreatedByFilter(t),e.createdTime&&this.renderCreatedTimeFilter(t),e.lastEditedTime&&this.renderLastEditedTimeFilter(t),e.ancestors&&this.renderAncestorFilter(t),e.inTeams&&this.renderInTeamFilter(t))}renderSuggestedFilters(){const{filters:e}=L.ZP.state.query,t=pt.isActive(this.environment,e),r=mt.isActive(e),i=ht.isActive(e);if(!(t&&r&&i))return s()(Qe.Z,{title:s()(he.FormattedMessage,{id:"search.filterMenu.quickFiltersSection.title",defaultMessage:"Quick filters"}),marginAfter:!0},void 0,!t&&s()(pt,{mode:ct.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!r&&s()(mt,{mode:ct.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!i&&s()(ht,{mode:ct.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu,isLastInSection:!0}))}renderSidebar(){const e=this.styles,t=this.getThemeColors(),r={...e.sidebar,...t.sidebar,...!L.ZP.isDebugSidebarOpen()&&e.sidebarHidden};return s()("aside",{style:r},void 0,s()(ge.Z,{onClick:this.closeSidebar,style:{display:"flex",alignItems:"center",justifyContent:"center",background:void 0,borderRadius:6,width:16,height:16,position:"absolute",top:10,right:10}},void 0,(0,ne.D)({width:14,fill:this.theme.mediumTextColor})),this.renderDevToolsSection())}renderForcedClusterPatternInput(){return null}renderShowDebugInfoToggle(){return s()(Ye,{mode:Oe.z.Button,focused:!1,title:"Show debug info",icon:ie.S,value:Z.ZP.state.showDebugInfo,onChange:e=>{Z.ZP.setState({...Z.ZP.state,showDebugInfo:Boolean(e)})}})}renderShowDebugSearchToggle(){return s()(Ye,{mode:Oe.z.Button,focused:!1,title:"Profile query",icon:ie.S,value:"everything"===Z.ZP.state.debug,onChange:e=>{Z.ZP.setState({...Z.ZP.state,debug:e?"everything":void 0})}})}renderDevToolsSection(){if((0,ce.x)(C.default))return s()(Qe.Z,{title:"Dev Tools"},void 0,s()(me.Z,{isVisible:!0,animationStyle:{height:"100%"},render:()=>s()("div",{style:{overflow:"scroll"}},void 0,this.renderShowDebugInfoToggle(),this.renderShowDebugSearchToggle(),this.renderForcedClusterPatternInput(),s()(Qe.Z,{style:{marginTop:16},title:"Quick Switch"},void 0,s()(Ct,{title:"No local at all",searchExperimentOverrides:{"search-no-local-blending":"on","search-debug-only-no-recent-boosting":"on"}}),s()(Ct,{title:"No local results",searchExperimentOverrides:{"search-no-local-blending":"on"}}),s()(Ct,{title:"No local boosting",searchExperimentOverrides:{"search-debug-only-no-recent-boosting":"on"}}),s()(Ct,{title:"Vector only",searchExperimentOverrides:{"search-vectors":"log-norm"}})),s()(Qe.Z,{style:{marginTop:16},title:"Dev Experiments",right:s()(Se.Z,{onClick:()=>{Z.v_.reset(),Z.BJ.reset()},style:{paddingLeft:0,paddingRight:0,height:"unset"}},void 0,(0,le.b)({width:12}))},void 0,s()("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr 1fr",minWidth:"100%",maxWidth:"100%",paddingLeft:14}},void 0,s()("div",{}),s()("div",{}),s()(bt,{columnStore:Z.BJ}),this.searchExperimentsToToggle.state.map((e=>s()(ot,{experiment:e},e.experimentId))),s()(ft,{leftValue:Z.v_.state.forcedClusterPattern,rightValue:Z.BJ.state.forcedClusterPattern,setLeftValue:Z.v_.updateForcedClusterPattern,setRightValue:Z.BJ.updateForcedClusterPattern,placeholder:"cluster-pattern",label:"forced cluster pattern"}),s()(ft,{leftValue:Z.v_.state.forcedBlockIds,rightValue:Z.BJ.state.forcedBlockIds,setLeftValue:Z.v_.updateForcedBlockIds,setRightValue:Z.BJ.updateForcedBlockIds,placeholder:"block ids",label:"forced block ids"}))))}))}renderTitlesOnlyFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ye,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"}),icon:de.c,value:t.navigableBlockContentOnly||!1,onChange:this.callTitleFilterUpdateFns})}renderDeletedOnlyFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ye,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.deletedOnlyToggle.label",defaultMessage:"Deleted only"}),icon:ae.y,value:t.isDeletedOnly||!1,onChange:this.createUpdateFunction("isDeletedOnly")})}renderMoreFiltersTitle(){return s()(he.FormattedMessage,{id:"search.filterMenu.moreFiltersSection.title",defaultMessage:"More filters"})}renderAncestorFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ji.Consumer,{},void 0,(r=>{let{parentStore:i}=r;return s()(De,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"}),parentStore:i,blockIds:t.ancestors,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("ancestors")})}))}renderCreatedByFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ji.Consumer,{},void 0,(r=>{let{parentStore:i}=r;return s()(qe.Z,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.createdBy",defaultMessage:"Created by"}),parentStore:i,userIds:t.createdBy,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("createdBy")})}))}renderCreatedTimeFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ce.Z,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"}),icon:se.C,value:t.createdTime,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("createdTime")})}renderLastEditedTimeFilter(e){const{filters:t}=L.ZP.state.query;return s()(Ce.Z,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),icon:se.C,value:t.lastEditedTime,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("lastEditedTime")})}renderInTeamFilter(e){if(!(0,w.bq)())return;const{filters:t}=L.ZP.state.query;return s()(Ji.Consumer,{},void 0,(r=>{let{parentStore:i}=r;return s()(Ke,{mode:e,focused:!1,title:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"}),parentStore:i,teamIds:t.inTeams,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("inTeams")})}))}createUpdateFunction(e){return t=>L.ZP.updateFilters({[e]:t})}getThemeColors(){return{sidebar:{backgroundColor:this.theme.sidebarSecondaryBackground,borderLeft:`1px solid ${this.theme.regularDividerColor}`}}}}function bt(e){let{columnStore:t}=e;window.__c={n:"ExperimentColumnShowHeader"};const r=(0,z.VK)((()=>t.state.visible),[t]);return s()(ve.Z,{icon:s()(ye.Z,{checked:r,size:14,onClick:()=>t.update((e=>({...e,visible:!e.visible})))}),focused:!1,title:"Show",onClick:()=>t.update((e=>({...e,visible:!e.visible})))})}function Ct(e){let{title:t,searchExperimentOverrides:r}=e;return s()(ve.Z,{focused:!1,title:t,onClick:()=>{Z.BJ.update((e=>({...e,visible:!1}))),Z.v_.update((e=>({...e,searchExperimentOverrides:r})))}})}St.displayName="SearchFilterMenu";const Mt=St;var xt=r(28992),It=r(98519),Pt=r(4023),Tt=r(7931);const wt=function(e){window.__c={n:"SearchSortMenu"};const t=n.useRef(),r=(0,_.Fy)(),{isMobile:i}=r,{activeOption:o,items:l}=n.useMemo((()=>function(e){const{currentSortBy:t,setSortBy:r,sortOptions:i,selectButton:s}=e;let o=i[0];const l=i.map((e=>{const i=t.field,l=`${i}.${"relevance"===i?"":t.direction}`,a=e.key===l;return a&&(o=e),{key:e.key,action:()=>{r(e.sort),s&&s.current&&s.current.closeMenu()},render:t=>n.createElement(ve.Z,V()({},t,{title:e.formattedName,right:a&&(0,It.k)({fill:Xe.ZP.regularIconColor,width:14,height:14})}))}}));return{activeOption:o,items:l}}({...e,selectButton:t})),[e,t]),a=(0,W.yK)((e=>({selectedTitle:{color:e.mediumTextColor},label:{marginRight:2,fontSize:i?ue.Z.fontSize.UISmall.mobile:ue.Z.fontSize.UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e.mediumTextColor,fontWeight:ue.Z.fontWeight.semibold,fontSize:i?ue.Z.fontSize.UISmall.mobile:ue.Z.fontSize.UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}})),[i]),d=i?s()(he.FormattedMessage,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return n.createElement(Tt.Z,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:Pt.v.Start,selectedTitle:s()("div",{style:a.selectedTitle},void 0,o.formattedName),label:void 0,renderMenuSections:()=>[{key:"searchSortOrder",render:e=>n.createElement(Qe.Z,V()({},e,{title:d,desktopStyle:a.menu,disableDesktopPadding:!1})),items:l}],labelStyle:a.label,innerButtonStyle:a.innerButton})};class kt extends o.Z{constructor(){super(...arguments),this.styles={menuItemMobile:{paddingBottom:0},titleWrapper:{flex:void 0,marginTop:-3,marginBottom:-1},showSidebarButton:()=>{const{device:e}=this.environment;return{padding:"0 4px",fontSize:e.isMobile?ue.Z.fontSize.UISmall.mobile:ue.Z.fontSize.UISmall.desktop,fontWeight:ue.Z.fontWeight.medium,borderRadius:3,height:20,lineHeight:"20px"}}}}renderComponent(){const{device:e}=this.environment,t=this.styles,r={...e.isMobile&&t.menuItemMobile},i=this.shouldAllowFilters()&&this.renderAddFilterButton();return s()(xt.Z,{title:this.renderSortMenu(),right:i,textWrapperStyle:t.titleWrapper,style:r})}renderSortMenu(){return s()(wt,{currentSortBy:L.ZP.state.query.sort,setSortBy:e=>{L.ZP.setState({...L.ZP.state,query:{...L.ZP.state.query,sort:e}})},sortOptions:Rt})}renderAddFilterButton(){const{device:e}=this.environment;if(e.isMobile)return s()(Mt,{isMobile:!0,mode:yt.Button})}shouldAllowFilters(){const{isPublicPageSearch:e}=this.props;return!e}}kt.displayName="SearchHeader";const Rt=[{key:"relevance.",formattedName:s()(he.FormattedMessage,{id:"search.sort.sortOrder.bestMatches",defaultMessage:"Best matches"}),sort:{field:"relevance"}},{key:"lastEdited.desc",formattedName:s()(he.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.newestFirst",defaultMessage:"Last edited: Newest first"}),sort:{field:"lastEdited",direction:"desc"}},{key:"lastEdited.asc",formattedName:s()(he.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.oldestFirst",defaultMessage:"Last edited: Oldest first"}),sort:{field:"lastEdited",direction:"asc"}},{key:"created.desc",formattedName:s()(he.FormattedMessage,{id:"search.sort.sortOrder.created.newestFirst",defaultMessage:"Created: Newest first"}),sort:{field:"created",direction:"desc"}},{key:"created.asc",formattedName:s()(he.FormattedMessage,{id:"search.sort.sortOrder.created.oldestFirst",defaultMessage:"Created: Oldest first"}),sort:{field:"created",direction:"asc"}}],Ft=kt;var Zt=r(1924),Bt=r(11751),Et=r(12921),Ot=r(69327),At=r(29798),Lt=r(88923),Dt=r(27724),qt=r(43145),Nt=r(94184),Vt=r.n(Nt),_t=r(75e3),zt=r(64369);function Wt(e,t){window.__c={n:"SearchActionMenuItem"};const{inline:r,title:i,focused:s,isBeforeFocused:o,className:l}=e,{icon:a,...d}=e,c=(0,W.yK)((e=>({hoveredStyle:{background:e.buttonHoveredBackground}})),[]),u=(0,W.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,...!r&&!o&&!s&&{boxShadow:`0 1px 0 ${e.lightDividerColor}`}},textWrapper:{marginLeft:4,alignItems:void 0,flex:void 0,width:"100%",display:"block",textOverflow:"ellipsis",...r&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor},enterIcon:{height:14,width:14,fill:e.mediumIconColor},iconContainer:{marginTop:1}})),[s,r,o]),h={title:i,icon:Ht(a,u.icon,u.iconContainer),style:u.style,textWrapperStyle:u.textWrapper,right:Ut(s,u.enterIcon),className:Vt()("notranslate",l),buttonStyle:{paddingLeft:2},hoveredStyle:c.hoveredStyle};return n.createElement(ve.Z,V()({ref:t},d,h,{disableTransition:!0,ignoreLocalHoverState:!0}))}function Ht(e,t,r){return s()(zt.Z,{style:r},void 0,e(t))}function Ut(e,t){const r={...t,opacity:e?1:0};return s()("div",{style:{display:"flex"}},void 0,(0,_t.U)(r))}const Kt=n.forwardRef(Wt);var jt=r(75024),$t=r(63296);class Gt extends o.Z{constructor(){super(...arguments),this.openSidebar=()=>L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!0}),this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?ue.Z.fontSize.UIRegular.mobile:ue.Z.fontSize.UIRegular.desktop}},footerWrapper:{flexShrink:0},footerText:{color:this.theme.lightTextColor,fontSize:jt.yv(this.environment,"UISmall"),...ue.Z.textOverflowStyle},footerDebugButton:{...Qt(this.theme),marginRight:6}}}renderComponent(){const e=this.styles;return s()("footer",{style:e.footerWrapper},void 0,s()(be.Z,{topBorder:!0,style:e.footer(),disableDesktopPadding:!0},void 0,n.createElement(xt.Z,V()({},this.props,{style:e.footerText})),(0,ce.x)(C.default)&&!L.ZP.state.isDebugSidebarOpen&&s()($t.Z,{onClick:this.openSidebar,style:e.footerDebugButton},void 0,"Open Debug Sidebar")))}}Gt.displayName="SearchFooterContainer";const Qt=e=>({fontSize:12,color:e.lightTextColor,marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),Jt=Gt;var Yt=r(22109),Xt=r(62134);function er(){window.__c={n:"SearchFooterNavigationHints"};const e=(0,_.O7)(),t=(0,he.useIntl)(),r=(0,W.yK)((t=>({upDownIcon:{marginRight:4,marginBottom:-2,display:"inline",width:12,height:12,fill:t.mediumIconColor},enterIcon:{marginRight:4,marginBottom:-2,display:"inline",width:11,height:11,fill:t.mediumIconColor},commandGlyph:{fontSize:.75*jt.yv(e,"UIRegular"),paddingRight:1,color:t.lightTextColor},footerText:{fontSize:jt.yv(e,"UISmall"),color:t.lightTextColor,...ue.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16}})),[e]),i={...jt.mK,...r.footerText},{command:n}=Xt.fg(e);return s()("ul",{style:i},void 0,s()("li",{style:r.inlineHint},void 0,(0,Yt.T)(r.upDownIcon),t.formatMessage({id:"searchFooter.helpText.selectHint",defaultMessage:"Select"})),s()("li",{style:r.inlineHint},void 0,(0,_t.U)(r.enterIcon),t.formatMessage({id:"searchFooter.helpText.openHint",defaultMessage:"Open"})),s()("li",{style:r.inlineHint},void 0,s()("span",{style:r.commandGlyph},void 0,n),(0,_t.U)(r.enterIcon),e.device.isElectron?t.formatMessage({id:"searchFooter.helpText.openNewWindow",defaultMessage:"Open in a new window"}):t.formatMessage({id:"searchFooter.helpText.openNewTab",defaultMessage:"Open in a new tab"})))}r(75553),r(32240);var tr=r(94308),rr=r(45168),ir=r(14871),sr=r(97820),nr=r(28020),or=r(84210),lr=r(98742),ar=r(16402),dr=r(77907),cr=r(35057),ur=r(24039),hr=r(90403),pr=r(64133),mr=(r(73063),r(50506)),gr=r(86176),vr=r(26388),fr=r(3043),yr=r(96525);function Sr(e){window.__c={n:"SearchBreadcrumbFilterPopup"};const{parent:t,store:r,onClick:i}=e,o=(0,_.O7)(),{device:l}=o;let a;a=l.isMobile?{menuType:K.og.Modal,title:s()(he.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:s()(ee.DoneMenuText,{}),onClickRight:t.close}:{menuType:K.og.Popup,width:240};const d=(0,n.useCallback)((()=>{null==i||i({store:r,action:"include"})}),[i,r]),c=(0,n.useCallback)((()=>{null==i||i({store:r,action:"exclude"})}),[i,r]),u=r instanceof ke.zX?"teamspace":"parent page",h={key:"results",render:e=>n.createElement(be.Z,e),items:[{key:"include-filter",render:e=>n.createElement(ve.Z,V()({},e,{title:`Add ${u} to filter`})),action:d},{key:"exclude-filter",render:e=>n.createElement(ve.Z,V()({},e,{title:`Exclude ${u} from results`})),action:c}]};return n.createElement(X.Z,a,s()(tt.Z,{type:tt.i.Vertical,onAccept:t.close,initialFocus:void 0,sections:[h]}))}class br extends o.Z{constructor(){super(...arguments),this.getFilterPopupRenderer=e=>t=>s()(Sr,{parent:t,store:e,onClick:this.props.onClick}),this.getBreadcrumbCommonProps=e=>({maxWidth:this.props.ancestorMaxWidth,popupRenderer:this.getFilterPopupRenderer(e),iconSize:this.props.iconSize,titleStyle:this.getTitleStyle(),iconStyle:br.iconStyle,highlighter:this.props.highlighter})}renderComponent(){const{store:e}=this.props,t=e.getTitleStore();if(t&&t.isReady())return s()("div",{style:this.getStyle(),className:"notranslate"},void 0,this.renderAncestors())}renderAncestors(){const{store:e,maxAncestorCount:t}=this.props,r=I.uJ(e),i=e.isNavigableBlock()?r.slice(1):[...r];if(i.reverse(),r.reverse(),i.length>t){const[e,s,o]=[i[0],i.slice(1,i.length-t+1),i.slice(i.length-t+1)];if((0,w.bq)()){const t=o.length;return[this.renderButtonForStore({store:e,showDivider:!this.props.isMobile}),this.renderBlocksAsPopup(this.props.isMobile?r:s),...o.map(((e,r)=>{const i=!this.props.hideCurrentPage||r!==t-1;return e instanceof ke.zX?n.createElement(fr.Yo,V()({store:e,showDivider:i},this.getBreadcrumbCommonProps(e))):n.createElement(fr.Qe,V()({store:e,showDivider:i},this.getBreadcrumbCommonProps(e)))}))]}{const e=i.filter((e=>e instanceof ke.G)),r=i.filter((e=>e instanceof ke.G)),s=e.length;return[n.createElement(fr.Qe,V()({key:e[0].id,store:e[0],showDivider:!this.props.isMobile},this.getBreadcrumbCommonProps(e[0]))),this.renderBlocksAsPopup(this.props.isMobile?r:e.slice(1,e.length-t+1)),...e.slice(e.length-t+1).map(((e,t)=>n.createElement(fr.Qe,V()({key:e.id,store:e,showDivider:!this.props.hideCurrentPage||t!==s-1},this.getBreadcrumbCommonProps(e)))))]}}{const e=i.length;return i.map(((t,r)=>this.renderButtonForStore({store:t,showDivider:!this.props.hideCurrentPage||r!==e-1})))}}renderButtonForStore(e){const{store:t,showDivider:r}=e;return t instanceof ke.zX?n.createElement(fr.Yo,V()({store:t,showDivider:r},this.getBreadcrumbCommonProps(t))):n.createElement(fr.Qe,V()({store:t,showDivider:r},this.getBreadcrumbCommonProps(t)))}getMenuListSections(e){const t=this.props.isMobile?fe.Z4.SlideUp:fe.Z4.Popup;return[{key:"results",render:e=>n.createElement(be.Z,e),items:e.map(((e,r)=>({key:e.id,render:i=>n.createElement(yr.Z,V()({},i,{stopClickPropagation:!0,popupType:t,renderOrigin:t=>n.createElement(Fe.Z,V()({},t,{isSubpage:0!==r,store:e,hidePath:!0,focused:!1})),render:t=>s()(Sr,{parent:t,store:e,onClick:this.props.onClick})})),action:()=>{}})))}]}renderBlocksAsPopup(e){return s()(fe.ZP,{popupType:this.props.isMobile?fe.Z4.SlideUp:fe.Z4.Popup,renderOrigin:e=>{var t;return this.props.isMobile?n.createElement(ge.Z,V()({style:{...br.dividerWrapStyle},mobileFeedback:!0},e),s()(fr.fY,{}),s()("div",{style:Cr},void 0,"..."),s()(fr.fY,{})):s()("div",{style:br.dividerWrapStyle},void 0,n.createElement(Se.Z,V()({isSmall:!0},e,{style:{paddingLeft:2,paddingRight:2,fontSize:null===(t=this.props.style)||void 0===t?void 0:t.fontSize}}),"..."),s()(fr.fY,{}))},render:t=>{let r;return r=this.props.isMobile?{menuType:K.og.Modal,title:s()(he.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:s()(ee.DoneMenuText,{}),onClickRight:t.close}:{menuType:K.og.Popup,width:240},n.createElement(X.Z,r,s()(tt.Z,{type:tt.i.Vertical,initialFocus:void 0,sections:this.getMenuListSections(e)}))}},"pages-popup")}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:this.props.isMobile?ue.Z.fontSize.UIRegular.mobile:ue.Z.fontSize.UIRegular.desktop,color:this.theme.text.tertiary,filter:"grayscale(70%)",...this.props.style}}getTitleStyle(){return{lineHeight:1.2,fontSize:this.props.isMobile?ue.Z.fontSize.UISmall.mobile:ue.Z.fontSize.UISmall.desktop,color:this.theme.text.tertiary}}}br.displayName="SearchPathBreadcrumb",br.iconStyle={marginRight:3},br.dividerWrapStyle={display:"flex",alignItems:"center",flexShrink:0};const Cr={marginLeft:3,marginRight:3};(0,he.defineMessages)({openInSidePeekButtonLabel:{id:"search.result.openInSidePeek.button.label",defaultMessage:"Open search result in side peek"},copySearchResultLinkButtonLabel:{id:"search.result.copyLink.button.label",defaultMessage:"Copy link to search result"}});class Mr extends o.Z{constructor(){super(...arguments),this.storeTypes={explanationModalOpen:a.default.createClass(!1)},this.renderTooltip=()=>s()(ur.Z,{store:this.props.store}),this.handleSearchPathBreadcrumbClick=e=>{let{store:t,action:r}=e;"block"===t.table?"include"===r?L.ZP.updateFilters({ancestors:u.jj(L.ZP.state.query.filters.ancestors.concat(t.id))}):L.ZP.updateFilters({dev_excludedPages:u.jj((L.ZP.state.query.filters.dev_excludedPages||[]).concat(t.id))}):"team"===t.table&&("include"===r?L.ZP.updateFilters({inTeams:u.jj((_e.iY(L.ZP.state.query.filters.inTeams)||[]).concat(t.id))}):L.ZP.updateFilters({dev_excludedTeams:u.jj((L.ZP.state.query.filters.dev_excludedTeams||[]).concat(t.id))}))},this.renderVerifiedBadge=()=>s()(hr.Z,{style:this.styles.badge,content:s()("div",{style:this.styles.badgeContent},void 0,(0,tr.f)(this.styles.verifiedBadgeIcon),s()("div",{style:this.styles.badgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.verified.badge.text",defaultMessage:"Verified"})))}),this.renderPopularThisWeekBadge=()=>s()(hr.Z,{style:this.styles.badge,content:s()("div",{style:this.styles.badgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.popularThisWeek.badge.text",defaultMessage:"Popular this week"}))}),this.renderMostViewedBadge=()=>s()(hr.Z,{style:this.styles.badge,content:s()("div",{style:this.styles.badgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.mostViewed.badge.text",defaultMessage:"Most viewed"}))}),this.renderIsTemplateBadge=()=>s()(hr.Z,{content:s()("div",{style:this.styles.grayedOutBadgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.template.badge.text",defaultMessage:"Template"}))}),this.getPageVisitSource=()=>"recent_pages"===this.props.type?d.tY.SearchRecents:d.tY.SearchQuery,this.handleOpenInSidePeek=()=>{const{store:e,queryId:t,result:r}=this.props,i=this.getPageVisitSource();r?f.navigateToSearchResult({searchResult:r,openInSidePeek:!0,environment:this.environment,pageVisitSource:i,queryId:t,openInNew:void 0}):f.navigateToPage({store:e,queryId:t,environment:this.environment,pageVisitSource:i,openInSidePeek:!0,peekMode:"s"})},this.handleCopy=()=>{const{store:e,queryId:t}=this.props,r=(0,or.ZP)({store:e,pageVisitSource:this.getPageVisitSource(),queryId:t});ir.RD({environment:this.environment,stringValue:r,copiedMessage:ir.tq.copiedLinkToClipboard})},this.styles={title:{fontWeight:ue.Z.fontWeight.medium,lineHeight:"20px"},titleContent:{display:"flex",...this.props.inline?{}:{width:0,flexGrow:1}},menuItem:{minHeight:36,paddingTop:this.environment.device.isMobile?12:8,paddingBottom:this.environment.device.isMobile?12:8},textWrapper:{marginLeft:4,alignItems:"center",width:"100%"},inlineTextWrapper:{alignItems:"center"},highlight:{fontWeight:ue.Z.fontWeight.medium},vectorHighlight:{fontWeight:ue.Z.fontWeight.medium,whiteSpace:"pre-wrap"},rightContentWrapper:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},rightIcon:{height:16,width:16},rightIconButtonIcon:{height:12,width:12},rightIconButtonWrapper:{height:18,width:18,marginRight:6},uniqueIDBadgeWrapper:{display:"flex",gap:8,marginRight:8,alignItems:"center"},caption:{marginTop:1},debugArea:{fontFamily:"monospace"},timestamp:{fontSize:ue.Z.fontSize.UISmall.desktop,fontWeight:ue.Z.fontWeight.regular},tooltip:{maxWidth:300},tooltipTitle:{fontWeight:ue.Z.fontWeight.medium,fontSize:ue.Z.fontSize.UISmall.desktop},tooltipText:{fontWeight:ue.Z.fontWeight.medium,fontSize:ue.Z.fontSize.UISmall.desktop,marginLeft:0,paddingRight:20},tooltipValue:{fontSize:ue.Z.fontSize.UISmall.desktop,fontWeight:ue.Z.fontWeight.regular},tooltipMenuItem:{minHeight:20},badge:{background:"light"===this.theme.mode?this.theme.accentColors.blue[30]:this.theme.accentColors.blue[200]},badgeContent:{display:"flex",alignItems:"center",width:"100%"},badgeCaption:{marginLeft:2,color:this.theme.blueColor},grayedOutBadgeCaption:{marginLeft:1},vectorBadge:{background:this.theme.invoiceGreen,color:this.theme.contentBackground},verifiedBadgeIcon:{width:10,height:10,fill:this.theme.blueColor},right:{display:"flex"},collectionTextMatchingProperty:{lineHeight:2}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:r}=e;if(2===r.length&&"_explanation"===r[0])return{element:n.createElement(n.Fragment,null,s()("button",{onClick:e=>{this.stores.explanationModalOpen.setState(!0),e.stopPropagation()}},void 0,"show simplified explanation")),expanded:!1};const i=t._ltrlog;if(i)return function(e){const t=Object.keys(e[0])[0],r=e[0][t].map(((e,t)=>{const r=t%2==0?Tr:Pr;return s()("tr",{},e.name,s()("td",{style:r},void 0,`${t}`),s()("td",{style:r},void 0,`${e.name}`),s()("td",{style:r},void 0,`${e.value}`))}));return{element:n.createElement(n.Fragment,null,s()("div",{},void 0,s()("b",{},void 0,`Featureset: ${t}`)),s()("div",{style:wr},void 0,s()("table",{style:kr},void 0,r))),expanded:!1}}(i);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:o,matched_queries:l}=t;return{element:n.createElement(n.Fragment,null,`score ${o}, ${(l??[]).length} matched query clauses`),expanded:!1}}}renderComponent(){const{focused:e,isLastInSection:t,isBeforeFocused:r,inline:i,className:o}=this.props,l=this.styles,a=this.getThemeColors(),d={...l.menuItem,...!i&&!t&&!r&&!e&&a.menuItemBorder},c={...l.caption,...a.caption},u={...l.timestamp,...a.timestamp},h={...l.textWrapper,...this.props.inline&&l.inlineTextWrapper},p={title:this.renderTitle(),icon:this.renderIcon(),caption:this.renderCaption(),body:this.renderPreview(),right:this.renderRight(),rightStyle:e?void 0:u,dontShrinkRight:!0,captionStyle:c,style:d,spacerStyle:this.hasPath()?void 0:Rr,textWrapperStyle:h,className:Vt()("notranslate",o),buttonStyle:{paddingLeft:2},hoveredStyle:{background:this.theme.tint.regular}};return(0,cr.Mk)()&&!B.default.state.intentBasedSearch.enablesSidePeekPanel?s()(vr.Z,{delayThreshold:50,placement:vr.Z.Placement.Right,originGap:18,renderTooltip:this.renderTooltip,style:l.tooltip,render:e=>n.createElement(ve.Z,V()({},this.props,p,{disableTransition:!0},(0,lr.Z)(this.props,e)))}):n.createElement(ve.Z,V()({},this.props,p,{disableTransition:!0,ignoreLocalHoverState:!0}))}renderTitle(){var e;const{store:t,result:r,placeholder:i,index:n}=this.props,o=this.styles,l=this.getThemeColors(),a=void 0===r,d={...o.title,...!a&&!this.props.focused&&l.nonHighlightedTextColor},c=[];if(r&&r.highlight)if(c.push(...(0,x.fe)(r.highlight.pathText)),this.isANonLocalResult())c.push(...(0,x.fe)(r.highlight.title));else{ke.G.createChildStore(this.props.store,{table:Ie.iU,id:r.id,spaceId:r.spaceId}).isNavigableBlock()&&c.push(...(0,x.fe)(r.highlight.text))}const u=this.props.focused?void 0:this.getWordHighlighter({words:c}),h=null===(e=(0,I.VP)(t))||void 0===e?void 0:e.isArchived(),p=(0,rr.e)(r),m=(0,nr.zj)(),g=m&&m===(null==r?void 0:r.id)&&"on"===F.default.getGroup("search-includes-current-page-in-local-search");const v=(0,cr.Mk)()&&!g&&!h?function(){function e(e){var t;return void 0!==(null==r||null===(t=r.badges)||void 0===t?void 0:t.find((t=>t.type===e)))}return e("is_template")?"is_template":e("verified")?"verified":e("popular_this_week")?"popular_this_week":e("most_viewed")?"most_viewed":void 0}():void 0,f={is_template:this.renderIsTemplateBadge,verified:this.renderVerifiedBadge,popular_this_week:this.renderPopularThisWeekBadge,most_viewed:this.renderMostViewedBadge};return s()("div",{style:{display:"flex",justifyContent:"space-between",...d}},void 0,s()("div",{style:o.titleContent},void 0,Z.ZP.state.showDebugInfo&&void 0!==n&&`${n+1}. `,p&&this.renderUniqueIdHighlight(r),s()(Ze.Z,{style:d,store:t,placeholder:i,highlighter:u}),!1,h&&s()(hr.Z,{content:s()("div",{style:this.styles.grayedOutBadgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.archived.badge.text",defaultMessage:"Archived"}))}),g&&s()(hr.Z,{content:s()("div",{style:this.styles.grayedOutBadgeCaption},void 0,s()(he.FormattedMessage,{id:"search.result.currentPage.badge.text",defaultMessage:"Current page"}))}),v&&f[v]()),Z.ZP.state.showDebugInfo&&this.renderDebugIcons())}renderUniqueIdHighlight(e){var t;const{focused:r}=this.props,i=null==e||null===(t=e.highlight)||void 0===t?void 0:t.uniqueId;if(!i)return;const n="dark"===this.environment.ThemeStore.state.mode,o=this.styles,l=this.getWordHighlighter({words:[i]}),a=r?n?Xe.FN.dark.translucentGray[300]:Xe.se.light.darkgray.alpha(.09):n?Xe.FN.dark.translucentGray[200]:Xe.se.light.darkgray.alpha(.06);return s()("div",{style:o.uniqueIDBadgeWrapper},void 0,s()("div",{},void 0,s()(pr.Z,{text:i,highlighter:l})),s()("div",{style:{borderRight:`1.5px solid ${a}`,height:14,borderRadius:1}}))}renderRight(){return s()("div",{style:this.styles.right},void 0,this.rightContent())}rightContent(){const{lastViewed:e,focused:t}=this.props;if(this.environment.device.isMobile)return;if(e&&!t)return(0,ar.IS)(e,{useCompactFormat:!0});const r=this.styles,i=this.getThemeColors(),s={...r.rightIcon,...i.enterIcon,opacity:t?1:0};r.rightIconButtonIcon;return(0,_t.U)(s)}renderDebugIcons(){var e;const{result:t,index:r,originalPosition:i}=this.props,n=null===(e=(null==t?void 0:t.sources)??[])||void 0===e?void 0:e.flatMap((e=>e===_e.vp.Local?[""]:e===_e.vp.ElasticSearch?[""]:e===_e.vp.Postgres?[""]:e===_e.vp.VectorDBBlock||e===_e.vp.VectorDBCollection?[""]:e===_e.vp.ElasticsearchRandom?[""]:e===_e.vp.ElasticsearchUniqueID?[""]:e===_e.vp.ElasticsearchForcedRecentRecall?[""]:void(0,p.t1)(e))).reverse(),o=[...void 0===r||void 0===i?[" "]:r>i?[""]:r<i?[""]:[],...n].join("").trim();return o&&s()("span",{},void 0,o)}renderIcon(){const{store:e}=this.props;return s()(Re.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:20,largeIcon:!1})}renderCaption(){const{store:e,inline:t,result:r,debugLocal:i,debugHits:o}=this.props,{device:l}=this.environment,a=this.getWordHighlighter({words:(0,x.fe)(r&&r.highlight&&r.highlight.pathText),removeDuplicate:!0}),d=t||l.isMobile?0:2,c=(o??[]).find((e=>"elasticsearch"===e.type&&void 0!==e._explanation)),u="elasticsearch"===(null==c?void 0:c.type)?null==c?void 0:c._explanation:void 0;return n.createElement(n.Fragment,null,s()(gr.Z,{store:e,extraLength:d,showFullPathInTooltip:!0,highlighter:a,enableHoverAncestor:!0,tooltipStyle:this.getThemeColors().captionTooltip,tooltipDividerStyle:this.getThemeColors().captionTooltipDivider}),n.createElement("div",{ref:this.props.debugAreaRef},i&&s()("div",{style:this.styles.debugArea},void 0,s()(dr.LazyAdminReactJson,{data:{debugLocal:i},defaultCollapsed:!0,customCollapsedRenderers:[Ir],showCopyButton:!1,showModalButton:!1})),o&&s()("div",{style:this.styles.debugArea},void 0,s()(dr.LazyAdminReactJson,{data:{debugHits:o},defaultCollapsed:!0,customCollapsedRenderers:[this.debugHitCustomRenderer],showCopyButton:"small",showModalButton:!0})),o&&(null==r?void 0:r.rankingSignals)&&s()("div",{style:this.styles.debugArea},void 0,s()(dr.LazyAdminReactJson,{data:{rankingSignals:r.rankingSignals},defaultCollapsed:!0,showCopyButton:"small",showModalButton:!1})),u&&s()(mr.Z,{open:this.stores.explanationModalOpen.state,innerStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},onDismiss:()=>{this.stores.explanationModalOpen.setState(!1)},render:()=>s()("pre",{},void 0,function(e){var t;let{explanation:r,simple:i=!1,filterZeros:s=!1}=e;return function e(t,r){if(!t)return[];const{value:n,description:o,details:l}=t;if(0===n&&s)return[];const a=(0===n?"0":n.toFixed(4)).padStart(8);function d(e){return`${"  ".repeat(r+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0))}${e}`}const c=`[${a}] ${o}`;if(o.startsWith("match on required clause"))return[d(`[${a}] match on required clause ${null==l?void 0:l[1].description}`)];if(["max of:","sum of:","min of:"].includes(o)&&1===(null==l?void 0:l.length))return e(l[0],r);if(o.startsWith("tf")||o.startsWith("idf")){var u;const e=o.split(",")[0],t=null===(u=o.split(" computed as ")[1])||void 0===u?void 0:u.replace(" from:","");return[d(`[${a}] ${e}: [${(l??[]).map((e=>`${e.description.split(",")[0]}=${e.value}`)).join(" ")}] --\x3e ${t}`)]}if(o.startsWith("ConstantScore(_id:"))return[d(`[${a}] ids query`)];const h=i&&0!==r&&(o.startsWith("weight")||o.startsWith("Function"));return[d(c.replace(", result of:","").replace(" from:","").replace(" [PerFieldSimilarity]","").replace(/:$/,"").trim()),...(h?[]:l??[]).flatMap((t=>e(t,r+1)))]}(null==r||null===(t=r.details)||void 0===t?void 0:t[0],0)}({explanation:u}).join("\n"))})))}renderPreview(){var e,t;const{result:r}=this.props;if(!r)return;if(!r.highlight)return;if(ke.G.createChildStore(this.props.store,{table:Ie.iU,id:r.id,spaceId:r.spaceId}).isNavigableBlock()&&!this.isANonLocalResult())return;let i,o;if(r.highlight.text)i=r.highlight.text;else if(r.highlight.collectionText){var l;i=r.highlight.collectionText,o=null==r||null===(l=r.matchedCollectionProperties)||void 0===l?void 0:l.collectionText}if(!i)return;const a=(0,x.ZP)(i);let d=!1;if(this.isANonLocalResult()){const e=e=>e.filter(x.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,x.ZP)(t)),i=[...new Set([...t(r.highlight.title),...t(r.highlight.pathText)])],s=e=>i.some((t=>t.includes(e)));d=e(a).every((e=>s(e)))}const c=null!==(e=r.sources)&&void 0!==e&&e.includes(_e.vp.VectorDBBlock)||null!==(t=r.sources)&&void 0!==t&&t.includes(_e.vp.VectorDBCollection)?this.styles.vectorHighlight:this.styles.highlight,{highlightedText:u}=this.getThemeColors();let h={...c,...u};if(d){const e=F.default.getEligibleGroup({experimentId:"search-show-redundant-body-preview"});switch(e){case void 0:case"control":return;case"no-highlight":h={};break;case"highlight":break;default:(0,p.t1)(e)}}return n.createElement(n.Fragment,null,void 0!==o&&s()(sr.Z,{propertySchema:o,showIcon:!0,style:this.styles.collectionTextMatchingProperty}),s()(pr.Z,{text:i,highlighter:{tokenize:e=>(0,x.Vu)(a),style:h}}))}isANonLocalResult(){const{result:e}=this.props;return e&&!e.sources.includes(_e.vp.Local)}getWordHighlighter(e){const{words:t,removeDuplicate:r}=e;if(0===t.length)return;const i={...this.styles.highlight,...this.getThemeColors().highlightedText},s=r?new Set:void 0;return{tokenize:e=>(0,x.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:s}),style:i}}hasPath(){const{hidePath:e,store:t}=this.props;return!e&&(0,gr.L)(t)}getThemeColors(){return{nonHighlightedTextColor:{color:this.theme.text.secondary},menuItemBorder:{boxShadow:`0 1px 0 ${this.theme.lightDividerColor}`},highlightedText:{color:this.theme.text.primary},enterIcon:{fill:this.theme.icon.secondary},bookmarkedIcon:{fill:this.theme.topbarFavorite},caption:{color:this.theme.text.secondary},captionTooltip:{color:this.theme.text.contrast},captionTooltipDivider:{color:this.theme.text.contrast},timestamp:{color:this.theme.text.tertiary},tooltipTitle:{color:this.theme.text.secondary},tooltipText:{color:this.theme.text.primary},tooltipValue:{color:this.theme.text.tertiary}}}}Mr.displayName="SearchResultMenuItem",Mr.contextTypes={...K.mw,...o.w};const xr=Mr,Ir=e=>{let{data:t}=e;const r=t;if(!r)return null;const{localSource:i,score:s,frecencyScore:o,personalizationBoost:l}=r;let a=i;return a||(a=new Set("unknown")),{element:n.createElement(n.Fragment,null,`from ${[...a].join(",")} [s ${s} | f ${o} | b ${l}]`),expanded:!1}},Pr={paddingLeft:5,paddingRight:20,paddingTop:2,paddingBottom:2,border:"1px solid black",color:Xe.FN.dark.green[900]},Tr={...Pr,color:Xe.FN.dark.gray[30]},wr={maxHeight:200,overflowY:"scroll"},kr={border:"1px solid black"};const Rr={visibility:"hidden"};function Fr(e){switch(e){case"Today":return s()(he.FormattedMessage,{id:"search.recentPagesTimeBuckets.today.text",defaultMessage:"Today"});case"Yesterday":return s()(he.FormattedMessage,{id:"search.recentPagesTimeBuckets.yesterday.text",defaultMessage:"Yesterday"});case"Past Week":return s()(he.FormattedMessage,{id:"search.recentPagesTimeBuckets.pastWeek.text",defaultMessage:"Past Week"});case"Past 30 Days":return s()(he.FormattedMessage,{id:"search.recentPagesTimeBuckets.past30Days.text",defaultMessage:"Past 30 Days"});case"Older":return s()(he.FormattedMessage,{id:"search.recentPagesTimeBuckets.older.text",defaultMessage:"Older"})}(0,p.t1)(e)}const Zr=function(e){window.__c={n:"SearchDefaultBody"};const{onSelect:t,spaceId:r}=e,[i,o]=n.useState(!1),[l,a]=n.useState(!1),d=(0,z.qz)(void 0,At.Z),{section:c,indexLocal:h}=(0,z.VK)((()=>d.state.focus),[d]),p=(0,_.O7)(),m=(0,_.Fy)(),g=(0,W.yK)((e=>({wrapper:{width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},sectionHeader:{fontWeight:ue.Z.fontWeight.semibold,marginBottom:7},section:{marginBottom:18},notionAiLabel:{lineHeight:"20px",fontSize:14,textOverflow:"ellipsis",overflow:"hidden",display:"block",fontWeight:ue.Z.fontWeight.medium},notionAiIcon:{fill:e.aiPurpleColor}})),[]),{defaultBodyFocusedResult:v}=(0,n.useContext)(Qi),f=(0,z.VK)((()=>we.X4.state),[]),S=(0,z.VK)((()=>{const e=Lt.default.state,t=Lt.default.isMiniOrCenterPeekOpen()||Dt.default.isInPeekRenderer();return e.open&&(t||e.isOpening)?e.target:k.default.state.mainEditorCurrentBlockStore}),[]),b=(0,z.VK)((()=>Et.fG.shouldShowSearchMenuItemAskAI()),[]);(0,n.useEffect)((()=>()=>{v.setState(void 0)}));const C=f.filter((e=>e.pageId!==(null==S?void 0:S.id))),M=(0,z.VK)((()=>{const e={};return C.forEach((t=>{let{pageId:r,visitedAt:i}=t;return e[r]=i})),e}),[C]),x=(0,z.VK)((()=>{const e=new Map;return C.map(((r,i)=>{const s=we._5(r.visitedAt),o="Today"!==s&&"Yesterday"!==s,l={result:{key:`${r.store.id}:${i}`,action:e=>t({action:e,sectionName:"recents",selectedResult:{store:r.store,id:r.store.id,score:-1,spaceId:r.store.getSpaceId(),sources:[_e.vp.Local],featureGroups:[],originalPosition:i,serverEventProperties:void 0}}),render:e=>n.createElement(xr,V()({},e,{inline:!m.isMobile,store:r.store,hidePath:!1,lastViewed:o?M[r.store.id]:void 0,buttonStyle:{paddingLeft:1},type:"recent_pages"}))},store:r.store};var a;e.has(s)?null===(a=e.get(s))||void 0===a||a.push(l):e.set(s,[l])})),e}),[m.isMobile,C,t,M]),I=(0,z.VK)((()=>{const e=[];b&&e.push({key:"actions",items:[{key:"actionMenuItem.assistant",action:()=>{y.em({environment:p})},render:e=>n.createElement(Kt,V()({},e,{title:s()("div",{className:"notranslate",style:g.notionAiLabel},void 0,s()(he.FormattedMessage,{id:"searchDefaultBody.searchActionMenuItem.askNotionAi",defaultMessage:"Ask Notion AI"})),icon:e=>(0,Bt.t)({...e,...g.notionAiIcon})}))}],render:e=>s()(be.Z,{title:"Actions",desktopTitleStyle:g.sectionHeader,disableDesktopPadding:!0,style:g.section},void 0,e.children)});for(const[t,r]of x.entries()){const i=Fr(t),n={key:t,items:r.map((e=>e.result)),render:e=>s()(be.Z,{title:i,desktopTitleStyle:g.sectionHeader,disableDesktopPadding:!0,style:g.section},void 0,e.children)};e.push(n)}return e}),[p,b,x,g.notionAiIcon,g.notionAiLabel,g.section,g.sectionHeader]),P=(0,n.useCallback)((e=>{const t=()=>{const e=Ot.Z.getWithoutSubscribing(r),t=e[e.length-1];return null==t?void 0:t.visitedAt},s=u.P2((async()=>{const e=t(),i=p.currentUser.id;if(!i||!e)return;o(!0);const s=await we.Od(e,{environment:p,userId:i,spaceId:r});o(!1),s||a(!0)}),300);t()&&e<=200&&!i&&!l&&s()}),[l,i,p,r]);(0,n.useEffect)((()=>{if(void 0!==c&&void 0!==h){var e;const r=null===(e=I[c])||void 0===e?void 0:e.key;if(r&&"string"==typeof r&&"action"!==r&&we._k.includes(r)){var t;const e=null===(t=x.get(r))||void 0===t||null===(t=t[h])||void 0===t?void 0:t.store;return void v.setState(e)}}v.setState(void 0)}),[v,c,h,x,I]);const T=!m.isMobile&&C.length>0;return n.createElement(n.Fragment,null,s()("div",{style:g.wrapper},void 0,s()(tt.Z,{store:d,type:tt.i.Vertical,initialFocus:0,disableKeyboardArrowWrap:!0,sections:I,unfocusOnScroll:!0}),s()(qt.Z,{onChange:P})),T&&s()(Jt,{title:s()(er,{})}))};const Br=(0,r(45238).I)("title",{viewBox:"0 0 14 10",svg:s()("path",{d:"M10.674 9.45c.293 0 .576-.052.85-.153.273-.098.515-.238.726-.422.215-.184.383-.4.504-.65h.03v.662a.569.569 0 00.163.416c.11.101.25.152.422.152a.579.579 0 00.428-.164c.11-.105.164-.256.164-.451V4.973c0-.43-.104-.805-.31-1.125-.208-.32-.5-.569-.88-.744-.378-.18-.828-.27-1.347-.27-.594 0-1.114.115-1.559.346-.445.226-.75.533-.914.92-.031.07-.056.14-.076.21a.684.684 0 00-.03.194c0 .148.05.27.147.363.102.09.23.135.387.135a.61.61 0 00.287-.064.555.555 0 00.217-.2c.172-.32.377-.554.615-.703.238-.148.533-.223.885-.223.426 0 .76.112 1.002.334.242.223.363.528.363.915v.486l-1.828.1c-.77.042-1.361.23-1.775.562-.41.328-.616.773-.616 1.336 0 .379.09.71.27.996.183.285.435.508.756.668.324.16.697.24 1.119.24zm.328-.938c-.367 0-.666-.092-.897-.276a.906.906 0 01-.345-.738.86.86 0 01.34-.709c.23-.184.558-.29.984-.322l1.664-.106v.598c0 .293-.078.557-.234.791a1.69 1.69 0 01-.627.557c-.266.136-.56.205-.885.205zM.689 9.414c.2 0 .354-.045.463-.135.114-.086.202-.234.264-.445l.65-1.816h3.346l.65 1.816c.063.21.149.36.258.445.114.09.268.135.463.135.207 0 .371-.057.492-.17a.593.593 0 00.188-.463c0-.129-.027-.27-.082-.422L4.79 1.357c-.09-.246-.22-.43-.393-.55C4.23.686 4.012.625 3.742.625c-.508 0-.847.244-1.02.732L.116 8.39a1.3 1.3 0 00-.076.404c0 .195.057.348.17.457.117.11.277.164.48.164zm1.717-3.486L3.73 2.119h.03l1.324 3.809H2.406z"})});var Er=r(15157),Or=r(34859),Ar=r(79131),Lr=r(53336),Dr=r(76725),qr=r(19889),Nr=r(7928);function Vr(e){window.__c={n:"SearchFilterBarTitle"};const{filterUIName:t}=e,{parentStore:r}=(0,n.useContext)(Ji),i=(0,z.VK)((()=>L.ZP.state.query.filters),[]),o=(0,W.yK)((e=>({title:{maxWidth:220,...ue.Z.textOverflowStyle}})),[]),l=(0,z.VK)((()=>{switch(t){case"personFilter":return function(e,t){const r=e.createdBy,i=Te.default.getIntl(),s=u.oA(r.map((e=>{const r=ke.U6.createChildStore(t,{table:qr.KJ,id:e});return(0,Nr.Nz)(i,r.getModel())})));return(0,Dr.Z)(s,Hr)}(i,r);case"teamsFilter":case"dev_notInTeamFilter":return function(e,t){const r=(0,_e.iY)(e.inTeams);if(!r)return[];const i=u.oA(r.map((e=>ke.zX.createChildStore(t,{table:Ve.e0,id:e}).getName())));return(0,Dr.Z)(i,Hr)}(i,r);case"pageFilter":return Ur(i,r);case"dateFilter":return function(e){const t=Te.default.getIntl(),r=zr(e);if("createdTime"===r)return T._Q(e.createdTime,t);if("lastEditedTime"===r)return T._Q(e.lastEditedTime,t);return""}(i);case"pageFilter":case"dev_notInPageFilter":return Ur(i,r);case"titleToggle":return[];default:(0,p.t1)(t)}}),[r,t,i]);return s()("div",{style:o.title},void 0,s()(he.FormattedMessage,{defaultMessage:"{filterName}{colon} {filterOperator} {filterValues}",id:"search.filterBarFilter.title",values:{filterName:_r(t),filterOperator:0===l.length?void 0:Wr(t,i),filterValues:l,colon:0===l.length?void 0:":"}}))}function _r(e){switch(e){case"personFilter":return s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.person",defaultMessage:"Created by"});case"teamsFilter":return s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"});case"pageFilter":return s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"});case"dateFilter":return s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.date",defaultMessage:"Date"});case"titleToggle":return s()(he.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"});case"dev_notInPageFilter":return s()(he.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInPageFilter.label",defaultMessage:"[dev] Not in page"});case"dev_notInTeamFilter":return s()(he.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInTeamFilter.label",defaultMessage:"[dev] Not in teamspace"})}(0,p.t1)(e)}function zr(e){const t=T.VD.createdTime(e.createdTime),r=T.VD.lastEditedTime(e.lastEditedTime);return t?"createdTime":r?"lastEditedTime":void 0}function Wr(e,t){switch(e){case"personFilter":case"teamsFilter":case"pageFilter":case"dev_notInPageFilter":case"dev_notInTeamFilter":case"dateFilter":case"titleToggle":return}(0,p.t1)(e)}const Hr=e=>", ";function Ur(e,t){const r=e.ancestors,i=u.oA(r.map((e=>{const r=ke.G.createChildStore(t,{table:Ie.iU,id:e});return r.isDefined()?r.getModel().getRenderTitle({getRecordModel:r.getRecordModel,userTimeZone:(0,at.r)(),intl:Te.default.getIntl()}):""})));return(0,Dr.Z)(i,Hr)}var Kr=r(41558),jr=r(3386),$r=r(53437),Gr=r(45959),Qr=r(83264);const Jr={today:s()(he.FormattedMessage,{defaultMessage:"Today",id:"searchDateFilter.quickActions.today.label"}),pastWeek:s()(he.FormattedMessage,{defaultMessage:"Last 7 days",id:"searchDateFilter.quickActions.last7Days.label"}),pastMonth:s()(he.FormattedMessage,{defaultMessage:"Last 30 days",id:"searchDateFilter.quickActions.last30Days.label"})};function Yr(e){let{date:t,onClick:r,onDismiss:i}=e;const n=(0,at.r)(),o=lt.Lg(n),l=o;let a;const d=Jr[t];"today"===t?a=o:"pastWeek"===t?a=lt.Oo(n):"pastMonth"===t?a=lt.dj(n):(0,p.t1)(t);return s()(ve.Z,{focused:!1,icon:(0,se.C)({height:18,width:18}),title:d,onClick:e=>{r({value:{starting:{type:"date",start_date:a.start_date},ending:{type:"date",start_date:l.start_date}}}),i(e)}})}class Xr extends o.Z{constructor(){super(...arguments),this.storeTypes={store:Kr.Z},this.renderPillButtonOrigin=()=>{const{icon:e,title:t}=this.props,{store:r}=this.stores,i=this.styles,{dateFilterType:n}=r.state,o=L.ZP.state.query.filters[n].starting;return s()(je.Z,{on:Boolean(o),icon:e(i.pillIcon),title:s()("span",{},void 0,t),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e}=this.props,{store:t}=this.stores;return n.createElement(n.Fragment,null,s()("div",{style:this.styles.dateFilterHeader},void 0,this.renderOperatorSelect(),s()(ge.Z,{style:this.styles.clearButton,onClick:this.handleClear},void 0,s()(he.FormattedMessage,{defaultMessage:"Clear",id:"searchDateFilter.clearButton.label"}))),s()("div",{style:this.styles.quickDatesWrapper},void 0,s()(Yr,{date:"today",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),s()(Yr,{date:"pastWeek",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),s()(Yr,{date:"pastMonth",onClick:this.updateTemporary,onDismiss:this.handleMenuClose})),s()(Qr.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:t,onDismiss:this.handleMenuClose,hideDateInputMenuItems:!0}))},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t}=this.stores;e||t.setState({...t.state,isOpen:!0,focus:"starting"})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{store:r}=this.stores,{temporaryDateRange:i,dateFilterType:s}=r.state;T.zD(e)||(this.updateFilter(s,i),r.setState({...r.state,isOpen:!1}),t&&t())},this.handleClear=()=>{const{store:e}=this.stores,{dateFilterType:t}=e.state;this.updateFilter(t,{starting:void 0,ending:void 0}),e.clearTemporaryDateRange()},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(e.error)return;t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}});const{dateFilterType:r,temporaryDateRange:i}=t.state,{starting:s,ending:n}=i;s&&n&&this.updateFilter(r,{starting:s,ending:n})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},sectionMenuItem:{display:"flex"},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"},quickDatesWrapper:{marginTop:12,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,paddingBottom:15,marginBottom:15},clearButton:{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13,paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:3,flexShrink:0},dateFilterHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:12,marginRight:12}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{store:t}=this.stores,r=this.styles;return s()(Qe.Z,{style:r.sectionMenuItem},void 0,s()(jr.Z,{capture:t.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey},void 0,s()($r.ZP,{popupType:this.getPopupType(),open:t.state.isOpen,origin:this.renderPillButtonOrigin(),render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:$r.ZP.Placement.Bottom,alignmentToOrigin:$r.ZP.Alignment.Start,keepFocus:!0,style:r.popup})))}updateFilter(e,t){L.ZP.updateFilters({[e]:t})}getHumanReadableDateFilterType(e){return{lastEditedTime:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),createdTime:s()(he.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"})}[e]}updateFilterFromToggle(e){const{value:t}=this.props,{store:r}=this.stores,{dateFilterType:i}=r.state;this.updateFilter(e,t),e!==i&&(this.updateFilter(i,{starting:void 0,ending:void 0}),r.setState({...r.state,dateFilterType:e}))}renderOperatorSelect(){const{device:e}=this.environment,{store:t}=this.stores,{dateFilterType:r}=t.state,i={width:190,items:["createdTime","lastEditedTime"],selectedItem:r,getKey:e=>e,onSelect:e=>this.updateFilterFromToggle(e),renderItem:e=>n.createElement(ve.Z,V()({title:this.getHumanReadableDateFilterType(e.value)},e)),renderOrigin:t=>n.createElement(ge.Z,V()({},t,{style:{paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:3,flexShrink:0}}),s()("div",{style:{display:"flex",alignItems:"center",...!e.isMobile&&{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13}}},void 0,s()("span",{style:{marginRight:4}},void 0,this.getHumanReadableDateFilterType(r)),this.renderOperatorChevron()))};return n.createElement(Gr.Z,V()({},i,{mobileActionSheet:!0}))}renderOperatorChevron(){const{device:e}=this.environment;return(0,et.i)({width:10,height:10,...e.isMobile&&{marginTop:2}})}renderMobile(e){const{store:t}=this.stores,r=e===Oe.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return s()($r.ZP,{popupType:$r.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:r,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:r}=this.props,i=this.styles;return s()(ve.Z,{disabled:r,focused:!1,icon:e(i.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:r,disabled:i,intl:n}=this.props,o=this.styles,l=s()("div",{style:o.summary},void 0,(0,se.C)(o.iconActiveMobile),T._Q(t,n,r));return s()(Ge.Z,{disabled:i,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:l})}getCurrentValue(){const{store:e}=this.stores,{dateFilterType:t,temporaryDateRange:r}=e.state;return{...L.ZP.state.query.filters[t],...r}}getPopupType(){const{device:e}=this.environment;return e.isMobile?$r.ZP.PopupType.SlideUp:$r.ZP.PopupType.Popup}}Xr.displayName="SearchGenericDateFilter";const ei=(0,he.injectIntl)(Xr);function ti(e){const t=L.ZP.state.query.sort,r=Rt.find((e=>u.Xy(e.sort,t)))??Rt[0],i="relevance"===r.sort.field?s()(he.FormattedMessage,{id:"search.sort.sortOrder.bestMatches.title",defaultMessage:"Sort"}):r.formattedName;return s()(je.Z,{disabled:!1,title:i,onClick:e.onClick,icon:(0,Yt.T)({width:16,marginRight:6,fill:"currentColor"})})}function ri(){const e=L.ZP.state.query.sort,t=Rt.findIndex((t=>u.Xy(t.sort,e))),r=[];for(const i of Rt)r.push({key:i.key,render:e=>n.createElement(ve.Z,V()({},e,{title:i.formattedName})),action:()=>{L.ZP.setState({...L.ZP.state,query:{...L.ZP.state.query,sort:i.sort}})}});return s()(X.Z,{menuType:K.og.Popup},void 0,s()(tt.Z,{type:tt.i.Vertical,initialFocus:t<0?0:t,sections:[{key:"sortOptions",items:r,render:e=>n.createElement(be.Z,V()({},e,{disableDesktopPadding:!0}))}]}))}const ii=function(){window.__c={n:"SearchSortButton"};const e=(0,W.yK)((()=>({popup:{paddingTop:12,paddingBottom:8}})),[]);return s()(fe.ZP,{popupType:fe.Z4.Popup,renderOrigin:ti,render:ri,disabled:!1,placementToOrigin:$r.ZP.Placement.Bottom,alignmentToOrigin:$r.ZP.Alignment.Start,style:e.popup})},si="SearchFilterSettings";function ni(e){window.__c={n:"SearchFilterBar"};const t=(0,z.qz)(void 0,pe.Z),{isMobile:r}=e,{parentStore:i}=(0,n.useContext)(Ji),o=(0,_.O7)(),l=(0,z.VK)((()=>o.currentUser.id),[o]),a=(0,z.VK)((()=>L.ZP),[]),d=(0,z.Kw)(a),c=d.query.filters,u=(0,z.VK)((()=>B.default.state.isPublicPageSearch),[]),h=(0,z.VK)((()=>(0,w.bq)()&&F.default.checkGate("enable_search_team_filter")&&!u),[u]),p=(0,z.VK)((()=>!u),[u]),m=!1,g=(0,W.yK)((e=>({scroller:{display:"flex",alignItems:"center",paddingTop:10,paddingRight:12,paddingBottom:10,paddingLeft:12},barContainer:{display:"flex",alignItems:"center"},scrollerContainer:{position:"relative",flexGrow:0,overflow:"hidden"},draggableList:{display:"flex",flexShrink:0,marginLeft:6},divider:{height:16,width:1,borderRadius:1,backgroundColor:e.stroke.deemphasized}})),[]),v=(0,n.useCallback)((e=>t=>a.updateFilters({[e]:t})),[a]),f=(0,n.useCallback)((()=>{t.setState({...t.state,open:!1})}),[t]),y=(0,n.useCallback)((()=>{if(p)return s()(qe.Z,{mode:Oe.z.Pill,focused:!1,title:s()(Vr,{filterUIName:"personFilter"}),parentStore:i,userIds:c.createdBy,onMenuDismiss:f,onChange:v("createdBy")})}),[p,i,c.createdBy,f,v]),S=(0,n.useCallback)((()=>h&&s()(Ke,{mode:Oe.z.Pill,focused:!1,title:s()(Vr,{filterUIName:"teamsFilter"}),parentStore:i,teamIds:c.inTeams,onMenuDismiss:f,onChange:v("inTeams")})),[i,c.inTeams,f,v,h]),b=(0,n.useCallback)((()=>s()(De,{mode:Oe.z.Pill,focused:!1,title:s()(Vr,{filterUIName:"pageFilter"}),parentStore:i,blockIds:c.ancestors,onMenuDismiss:f,onChange:v("ancestors")})),[i,c.ancestors,f,v]),C=(0,n.useCallback)((()=>null),[i,c.dev_excludedPages,f,v,m]),M=(0,n.useCallback)((()=>null),[i,c.dev_excludedTeams,f,v,m]),x=(0,n.useCallback)((()=>s()(ei,{mode:Oe.z.Pill,focused:!1,title:s()(Vr,{filterUIName:"dateFilter"}),icon:se.C,value:c.lastEditedTime,onMenuDismiss:f})),[c.lastEditedTime,f]),I=(0,n.useCallback)((()=>!r&&s()(Ye,{mode:Oe.z.Pill,focused:!1,title:s()(Vr,{filterUIName:"titleToggle"}),icon:Br,value:c.navigableBlockContentOnly||!1,onChange:v("navigableBlockContentOnly")})),[c.navigableBlockContentOnly,v,r]);(0,n.useEffect)((()=>{const e=Er.Z.get({userId:l,key:si});e&&e.filterOrder&&a.updateFilterState(e)}),[l,a]);const P={titleToggle:I(),personFilter:y(),teamsFilter:S(),pageFilter:b(),dateFilter:x(),dev_notInPageFilter:C(),dev_notInTeamFilter:M()};const T=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,s()(ii,{}),s()("div",{style:g.divider}))),[g.divider]);return s()("div",{style:g.barContainer},void 0,s()("div",{style:g.scrollerContainer},void 0,s()(Lr.Z,{type:Or.Z.X,style:g.scroller,showLeftRightOverlay:!1},void 0,n.createElement(n.Fragment,null,T()),n.createElement(n.Fragment,null,s()(Ar.ZP,{direction:"horizontal",keys:d.filterState.filterOrder,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:e=>P[e],style:g.draggableList,onDrop:e=>function(e){const t={...d.filterState,filterOrder:e};Er.Z.set({userId:l,key:si,value:t}),a.updateFilterState(t)}(e)})))))}var oi=r(68785),li=r(33411),ai=(r(25904),r(1800),r(54642),r(47307),r(64964),r(31194),r(1310),r(16354)),di=r(43765);r(92660);(0,he.defineMessages)({additionalInformationPlaceholder:{id:"SearchBadResultsForm.additionalInformation.placeholder",defaultMessage:"Any additional comments or context (e.g. ...)"},urlPlaceholder:{id:"SearchBadResultsForm.url.placeholder",defaultMessage:"Link to page you were looking for"}});class ci extends o.Z{constructor(){super(...arguments),this.storeTypes={requestModalOpen:a.default.createClass(!1),responseModalOpen:a.default.createClass(!1)},this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?ue.Z.fontSize.UIRegular.mobile:ue.Z.fontSize.UIRegular.desktop}},footerText:{fontSize:jt.yv(this.environment,"UISmall"),...ue.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16},resultCountWrapper:{display:"flex",alignItems:"center",...ue.Z.textOverflowStyle},resultCount:{fontWeight:ue.Z.fontWeight.medium},resultText:{verticalAlign:"middle",marginRight:6},spinner:{display:"inline",width:12,height:12,verticalAlign:"middle"},keyboardShortcut:{marginRight:4,marginBottom:1,fontVariant:"all-small-caps",fontSize:1.1*jt.yv(this.environment,"UISmall")},commandGlyph:{fontSize:.75*jt.yv(this.environment,"UIRegular")},footerDebugButton:Qt(this.theme),debugModalStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{marginLeft:15}}}renderComponent(){const{localResults:e,serverResults:t}=this.props.searchResultStore.state,{shouldShow:r}=this.props;if(!r)return;const i=this.styles,o=this.getThemeColors(),l={...i.resultCount,...o.resultCount},{count:a,isLowerBound:d}=this.props.searchResultStore.getResultCount(),c=s()("span",{style:i.resultText},void 0,d?this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCountApproximate",defaultMessage:"{resultCount, plural, other {<resultwrapper>{resultCount}+</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>s()("span",{style:l},void 0,e)}):this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCount",defaultMessage:"{resultCount, plural, one {<resultwrapper>{resultCount}</resultwrapper> result} other {<resultwrapper>{resultCount}</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>s()("span",{style:l},void 0,e)})),u=B.default.state.intentBasedSearch.enablesGrouping,h=u?s()(er,{}):s()("div",{style:i.resultCountWrapper},void 0,u?void 0:s()("div",{},void 0,c,this.renderSpinner(this.props.showSpinner)),s()("div",{style:i.navigationHints},void 0,s()(er,{})));return s()(Jt,{title:h,right:n.createElement(n.Fragment,null,false,this.renderSearchDebugButtons())})}renderSpinner(e){const t=this.styles;return s()(li.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&s()(oi.Z,{style:t.spinner})})}renderSearchDebugButtons(){var e;if(!Z.ZP.state.debug&&!Z.ZP.state.showDebugInfo)return;const{rawRequests:t,rawResponses:r}=(null===(e=this.props.searchResultStore.state.serverResults)||void 0===e||null===(e=e.debugInfo)||void 0===e?void 0:e.response)||{};return n.createElement(n.Fragment,null,t&&n.createElement(n.Fragment,null,s()(mr.Z,{open:this.stores.requestModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.requestModalOpen.setState(!1)},render:()=>s()(dr.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:t})}),s()($t.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.requestModalOpen.setState(!0)},void 0,"Open Request")),r&&n.createElement(n.Fragment,null,s()(mr.Z,{open:this.stores.responseModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.responseModalOpen.setState(!1)},render:()=>s()(dr.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:r},defaultCollapsed:!1})}),s()($t.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.responseModalOpen.setState(!0)},void 0,"Open Response")))}getThemeColors(){return{footerText:{color:this.theme.lightTextColor},resultCount:{color:this.theme.mediumTextColor},keyboardShortcut:{color:this.theme.mediumTextColor}}}}ci.displayName="SearchResultsFooter";const ui=(0,he.injectIntl)(ci);var hi=r(73935),pi=r(11689),mi=r(43339),gi=r(39634),vi=r(36507);class fi extends o.Z{constructor(){super(...arguments),this.handleSendMessageClick=()=>{gi.j({environment:this.environment,from:"quick_find"})},this.styles={menuItem:{marginTop:"auto",marginBottom:"auto"},caption:{marginTop:"auto"},reportProblemButton:{display:"inline"},searchDeletedButton:{display:"inline",lineHeight:"25px"}}}renderComponent(){return n.createElement(vi.Z,V()({},this.getErrorMessage(),{style:this.styles.menuItem,captionStyle:this.styles.caption,shouldWrapCaption:!0}))}renderNoResults(){return{title:fi.noResultsTitle,caption:this.renderNoResultsMessage()}}renderNoResultsMessage(){const e=L.ZP.state.query.filters,t=T.FN(e);if(!T.VD.isDeletedOnly(e.isDeletedOnly)){const e=this.styles,t=this.getThemeColors(),r={...e.searchDeletedButton,...t.searchDeletedButton};return s()(he.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.searchDeleted",defaultMessage:"Some results may be in your deleted pages.{br}<searchdeleted>Search deleted pages</searchdeleted>",values:{searchdeleted:e=>s()(ai.Z,{onClick:this.props.handleSearchDeletedOnly,style:r},void 0,e),br:s()("br",{})}})}return s()(he.FormattedMessage,t?{defaultMessage:"Try different search terms or filters",id:"searchErrorMenuItem.errorPrompt.searchTermsAndFilters"}:{defaultMessage:"Try different search terms",id:"searchErrorMenuItem.errorPrompt.searchTerms"})}renderOffline(){return{title:fi.noResultsTitle,caption:s()(he.FormattedMessage,{defaultMessage:"Go online for more results.",id:"searchErrorMenuItem.errorPrompt.goOnline"})}}renderRequestFailed(){const e=this.styles,t=this.getThemeColors(),r={...e.reportProblemButton,...t.reportProblemButton};return{title:s()(he.FormattedMessage,{id:"searchErrorMenuItem.error.genericErrorMessage",defaultMessage:"Something went wrong"}),caption:s()(he.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.refreshOrReport",defaultMessage:"Try refreshing or <reportlink>report a problem</reportlink>.",values:{reportlink:e=>s()(ai.Z,{onClick:this.handleSendMessageClick,style:r},void 0,e)}})}}getErrorMessage(){const{error:e}=this.props;switch(e.type){case _e.Ix.NoResults.type:return this.renderNoResults();case _e.Ix.Offline.type:return this.renderOffline();case _e.Ix.RequestFailed.type:return this.renderRequestFailed();default:(0,p.t1)(e)}}getThemeColors(){return{reportProblemButton:{color:this.theme.blueColor},searchDeletedButton:{color:this.theme.blueColor}}}}fi.displayName="SearchErrorMenuItem",fi.contextTypes={...K.mw,...o.w},fi.noResultsTitle=s()(he.FormattedMessage,{defaultMessage:"No results",id:"searchErrorMenuItem.error.noResults"});const yi=fi;function Si(e,t){return s()(be.Z,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!1,style:{marginTop:0,paddingTop:0}},void 0,s()(xt.Z,{body:e,bodyStyle:t}))}const bi=(0,he.injectIntl)((function(e){var t,r,i,o,l;window.__c={n:"SearchResultsMenuList"};const[a,d]=(0,n.useState)(!1),c=(0,_.Fy)().isMobile,h=(0,W.yK)((e=>({results:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",height:"100%"},messageMenuItem:{...c&&{background:void 0,boxShadow:void 0}},debugMessageMenuItemTextStyle:{whiteSpace:"pre-wrap",fontFamily:"monospace",marginTop:0},actionMenuItemTitle:{fontWeight:ue.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",flexDirection:"column",gap:12,marginTop:c?13:void 0,marginBottom:4}})),[c]),{searchResultStore:m,localResults:g,serverResults:v,resultListStore:f,searchExperimentOverrides:S,intl:b,showActions:C}=e,M=e.errorState,x=(0,z.VK)((()=>L.ZP.state.query.text),[]),I=C.length>0?{key:"actions",render:e=>n.createElement(be.Z,V()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:s()(he.FormattedMessage,{id:"search.searchActions.actions.text",defaultMessage:"Actions"})})),items:u.oA(C.map((e=>function(e){const{type:t,title:r,icon:i,action:s}=e;return{key:`actionMenuItem.${t}`,action:s,render:e=>n.createElement(Kt,V()({},e,{title:r,icon:i}))}}({...e,title:e.renderTitle(x,b,h.actionMenuItemTitle)}))))}:void 0,P=(0,z.VK)((()=>B.default.state.intentBasedSearch.enablesGrouping),[]),w=(0,T.IV)({intentBasedGrouping:P,localResults:g,serverResults:v}),{allSearchResults:k}=w,R=(0,n.useCallback)((t=>{const{results:r,sectionTitle:i,compact:o,rendersTimeSinceLastViewedMs:l}=t,{id:a,title:d}=function(e){if(!e)return{id:"defaultSearchResults",title:void 0};switch(e.type){case"unique-id":return{id:"uniqueIdSearchResults",title:s()(he.FormattedMessage,{id:"search.searchResultBuckets.uniqueID.text",defaultMessage:"ID matches"})};case"jump-back-in":return{id:"jumpBackInSearchResults",title:s()(he.FormattedMessage,{id:"search.searchResultBuckets.topResults.text",defaultMessage:"Top results"})};case"server":return{id:"serverOnlySearchResults",title:s()(he.FormattedMessage,{id:"search.searchResultBuckets.server.text",defaultMessage:"{count}{maybeLowerBoundSign} results",values:{count:e.values.count,maybeLowerBoundSign:e.values.isLowerBound?"+":""}})};case"non-unique-id":return{id:"nonUniqueIdSearchResults",title:s()(he.FormattedMessage,{id:"search.searchResultBuckets.bestMatches.text",defaultMessage:"Best Matches"})}}(0,p.t1)(e)}(i);return r.length>0?{key:a,render:e=>n.createElement(be.Z,V()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:d})),items:u.oA(r.map(((t,r)=>{var i;return function(e){var t;const{selectedResult:r,index:i,sectionName:s,allSearchResults:o,props:l,compact:a,timeSinceLastViewedMs:d}=e,{store:c}=r,u=c.isNavigableBlock()?c:c.getNavigableBlockStore();if(!u)return;const h=n.createRef(),p=Boolean(Z.ZP.getDebugLevel()),m=p&&r.sources.includes(_e.vp.Local)?{score:r.score,frecencyScore:r.frecencyScore,localSource:r.localSource,personalizationBoost:r.personalizationBoost,id:r.id}:void 0,g=p&&(r.sources.includes(_e.vp.ElasticSearch)||r.sources.includes(_e.vp.VectorDBBlock)||r.sources.includes(_e.vp.VectorDBCollection))?null===(t=l.debugInfo)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.resultsDebugMap[c.id]:void 0,v=l.clusterInfo,f=Date.now();return{key:`${c.id}:${i}`,action:e=>{const{event:t}=e;function i(e){const r=hi.findDOMNode(e.current);return Boolean(r&&"target"in t&&t.target&&(r===t.target||r.contains(t.target)))}h.current&&i(h)||l.handleSelectResult({action:e,selectedResult:r,sectionName:s,allSearchResults:o})},render:e=>{var t;return n.createElement(xr,V()({},e,{index:i,originalPosition:r.originalPosition,isFirstInSection:0===i,store:u,hidePath:!1,result:r,className:U.ulv,debugLocal:m,debugHits:g,debugAreaRef:h,clusterInfo:v,inline:a&&!p,inlineCaptionMinWidthPercentage:20,lastViewed:d?f-d:void 0,queryId:null===(t=r.serverEventProperties)||void 0===t?void 0:t["server-queryId"],type:"query_results"}))}}}({selectedResult:t,index:r,sectionName:a,allSearchResults:k,props:e,compact:o,timeSinceLastViewedMs:l&&null!==(i=t.localSource)&&void 0!==i&&i.has("recentVisit")?t.timeSinceLastViewedMs:void 0})})))}:void 0}),[k,e]),F=(0,z.VK)((()=>R({results:"intent-based-grouping"===w.type?w.sections.jumpBackInSearchResults:[],sectionTitle:{type:"jump-back-in"},compact:!0,rendersTimeSinceLastViewedMs:!0})),[R,w.sections,w.type]),E=(0,z.VK)((()=>{const e="intent-based-grouping"===w.type?w.sections.serverOnlySearchResults:[],t=m.getResultCount();return R({results:e,sectionTitle:{type:"server",values:{count:e.length,isLowerBound:t.isLowerBound}},compact:!1})}),[R,w.sections,w.type,m]),O=(0,z.VK)((()=>R({results:"uniqueIdSearchResults"in w.sections?w.sections.uniqueIdSearchResults:[],sectionTitle:{type:"unique-id"},compact:!1})),[R,w.sections]),A=(0,z.VK)((()=>R({results:"unique-id"===w.type?w.sections.nonUniqueIdSearchResults:"default"===w.type?w.sections.defaultSearchResults:[],sectionTitle:"unique-id"===w.type?{type:"non-unique-id"}:void 0,compact:!1})),[R,w.sections,w.type]),D=[I,F,O,E,A].filter(p.$K),q=null===(t=e.debugInfo)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.parsedQueries,N=null===(r=e.debugInfo)||void 0===r||null===(r=r.response)||void 0===r?void 0:r.detectedLanguages,H=null===(i=e.debugInfo)||void 0===i?void 0:i.traceLogs,K=null===(o=e.debugInfo)||void 0===o||null===(o=o.response)||void 0===o?void 0:o.debugUrls,j=(0,n.useCallback)(((t,r)=>{const{onMaybeLoadMoreResults:i}=e,s=t<=200;s&&!a&&i(),d(s),r.offsetFromTop&&L.ZP.update((e=>({...e,hasScrolled:!0})))}),[a,e]),$=A||E?(null==I||null===(l=I.items)||void 0===l?void 0:l.length)??0:0;return s()(Qi.Consumer,{},void 0,(e=>{let{queryResultsSectionRef:t}=e;return n.createElement("section",{style:h.results,ref:t},!u.xb(S)&&Si(n.createElement(n.Fragment,null,s()(dr.LazyAdminReactJson,{data:{searchExperimentOverrides:S},showCopyButton:!1,showModalButton:!1,defaultCollapsed:!1})),h.debugMessageMenuItemTextStyle),q&&Si(s()(dr.LazyAdminReactJson,{data:{parsedQueries:q},customCollapsedRenderers:[Ii],showCopyButton:"small",showModalButton:!0,defaultCollapsed:!0}),h.debugMessageMenuItemTextStyle),N&&Si(s()(dr.LazyAdminReactJson,{data:{detectedLanguages:N},customCollapsedRenderers:[xi]}),h.debugMessageMenuItemTextStyle),H&&Si(s()(dr.LazyAdminReactJson,{data:{tracer:{traceLogs:H}},customCollapsedRenderers:[Mi],defaultCollapsed:!0}),h.debugMessageMenuItemTextStyle),K&&Si(s()(dr.LazyAdminReactJson,{data:{debugUrls:K},defaultCollapsed:!0,customCollapsedRenderers:[Ti],showCopyButton:"small",showModalButton:!0,maxLinkValueLength:40}),h.debugMessageMenuItemTextStyle),D&&s()("div",{className:"search-results-list"},void 0,s()(tt.Z,{type:tt.i.Vertical,initialFocus:$,store:f,disableKeyboardArrowWrap:!0,sections:D,style:h.menuListContainer})),function(e,t){if(e.isLoading)return;if(e.showMajorError)return s()(yi,{error:e.serverError,handleSearchDeletedOnly:()=>{const e=L.ZP.state.query.text;y.IB(),pi.Z.setState({...pi.Z.state,open:!0}),mi.Z.setState({...mi.Z.state,currentTab:"all_pages",filter:e,limit:mi.Z.startLimit})}});if(e.serverError&&e.serverError!==_e.Ix.NoResults)return function(e,t){return s()(be.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,s()(di.Z,{title:e,style:t}))}(e.serverError.message,t)}(M,h.messageMenuItem)||s()(qt.Z,{onChange:j}))}))}));function Ci(e){const t=e.replaceAll(/\(MatchNoDocsQuery\("Matching no documents because no terms present"\)\)\^[0-9\.]/g,"").replaceAll(/MatchNoDocsQuery\("Matching no documents because no terms present"\)/g,"").replaceAll(/ConstantScore\(([^)]+):([^)]+)\)/g,"<i>$1</i>:<b>$2</b>").replace(/function score \(\((.*)\), functions:.*\)/,"$1").replaceAll("( ","(").replaceAll(" )",")").replaceAll("|","| <br/>").replaceAll(/([^( ]+):"([^"]+)"/g,'<i>$1</i>:<b>"$2"</b>').replaceAll(/([^( ]+):([^) ]+)/g,"<i>$1</i>:<b>$2</b>");return s()("span",{dangerouslySetInnerHTML:{__html:t}})}const Mi=e=>{let{data:t,keyPath:r}=e;if("traceLogs"===(null==r?void 0:r[0])&&u.PO(t)&&Array.isArray(t.log)&&t.log.length>0){const{log:e,startTimeMs:r}=t;return{element:n.createElement(n.Fragment,null,s()("div",{},void 0,s()("b",{},void 0,`Trace started at ${r}`)),e.map(((e,t)=>s()("div",{},t,s()("span",{style:Pi},void 0,`[${e.timestamp-r}ms][${e.callerFileName.split(".")[0]}]`),s()("span",{},void 0,`${e.msg}`))))),expanded:!1}}return null},xi=e=>{let{data:t,keyPath:r}=e;return"detectedLanguages"===r.join(".")&&u.PO(t)?{element:n.createElement(n.Fragment,null,Object.entries(t).filter((e=>{let[t,r]=e;return Boolean(r)})).map((e=>{let[t]=e;return t})).join(", ")||"None"),expanded:!1}:null},Ii=e=>{var t,r;let{data:i,keyPath:s}=e;const n=i,o=Object.values(n).find((e=>void 0!==e));if(!o)return null;if(!["type","description","time_in_nanos"].every((e=>o[e])))return null;if(1===s.length)return{element:Ci(o.description),expanded:!1};let l=o.description??"";return null!==(t=l)&&void 0!==t&&t.includes("permissions.teamIds")&&(l="PermissionsQuery"),null!==(r=l)&&void 0!==r&&r.includes("(_id:[")&&(l="BoostRecentPageIds"),{element:Ci(l),expanded:!1}},Pi={color:"blue"},Ti=e=>{let{data:t}=e;const r=t;if(!r)return null;const i=Object.values(r).find((e=>{let{clusterName:t}=e;return void 0!==t}));if(i){const{clusterName:e}=i;return{element:n.createElement(n.Fragment,null,e),expanded:!1}}return{element:n.createElement(n.Fragment,null,"unknown"),expanded:!1}};const wi=function(e){window.__c={n:"SearchResultsBody"};const{searchResultStore:t,sxsMode:r,searchDebugColumnStore:i}=e,o=(0,_.O7)(),l=(0,_.Fy)(),a=(0,W.yK)((e=>({container:{display:"flex",flexDirection:"column",width:r?"50%":"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e.regularTextColor,fontWeight:ue.Z.fontWeight.medium,fontSize:14},askAiQuery:{fontWeight:ue.Z.fontWeight.regular},askAiIcon:{fill:e.aiPurpleColor}})),[r]),d=(0,z.qz)(void 0,At.Z),c=(0,z.VK)((()=>d.state.focus.indexGlobal),[d]),{handleSelectResult:u,globalFocusedIndex:h}=(0,n.useContext)(Qi),{localResults:p,serverResults:m,clusterInfo:g,debugInfo:v,serverResultsLoading:f,searchExperimentOverrides:S,hasPublicAccessPermission:b,errorState:C,serverResultsAllLoaded:M}=(0,z.VK)((()=>{var e,r;const{hasPublicAccessPermission:s}=T.bC(o);return{localResults:t.state.localResults,serverResults:t.state.serverResults,serverResultsLoading:t.state.serverResultsLoading,clusterInfo:null===(e=t.state.serverResults)||void 0===e?void 0:e.clusterInfo,debugInfo:null===(r=t.state.serverResults)||void 0===r?void 0:r.debugInfo,searchExperimentOverrides:i.state.searchExperimentOverrides,hasPublicAccessPermission:s,errorState:t.state.errorState,serverResultsAllLoaded:t.state.serverResultsAllLoaded}}),[t,i,o]),x=!1===C.isLoading&&C.showMajorError,I=Boolean(p||m),P=(0,n.useCallback)((()=>{!f&&!M&&void 0!==m&&L.ZP.update((e=>({...e,limit:e.limit+L.Xv,isScrolled:!0,source:"quick_find_scroll"})))}),[f,M,m]),w=(0,z.VK)((()=>T.oO({localResults:null==p?void 0:p.results,serverResults:null==m?void 0:m.results})),[p,m]),k=(0,z.VK)((()=>[{type:"assistant",renderTitle:(e,t,r)=>function(e,t){return s()("div",{className:"notranslate",style:t},void 0,e)}(n.createElement(n.Fragment,null,s()("span",{},void 0,s()(he.FormattedMessage,{id:"searchResultsBody.askAiMenuItem.title",defaultMessage:"Ask Notion AI"})),s()("span",{style:a.askAiQuery},void 0,e?` ${e}`:"")),{...r,...a.askAiLabel}),icon:e=>(0,Bt.t)({...e,...a.askAiIcon}),action:()=>{y.em({environment:o})},shouldShow:()=>Et.fG.shouldShowSearchMenuItemAskAI()}].filter((e=>e.shouldShow(o)))),[o,a],{useDeepEqual:!0});(0,z.VK)((()=>{const e=t.state.insertedActionResultsCount,r=k.length;e!==r&&t.update((e=>({...e,insertedActionResultsCount:r})))}),[k,t]);const R=(0,n.useCallback)((()=>d.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus.indexLocal&&0===e.focus.indexGlobal?e:{...e,focus:k.length>0?{section:1,indexLocal:0,indexGlobal:k.length}:{section:0,indexLocal:0,indexGlobal:0}}))),[d,k]);return(0,n.useEffect)((()=>{R()}),[w,R]),(0,n.useEffect)((()=>{h.setState(c)}),[h,c]),s()("div",{style:a.container},void 0,s()(bi,{errorState:C,handleSelectResult:u,onMaybeLoadMoreResults:P,resultListStore:d,searchResultStore:t,localResults:null==p?void 0:p.results,serverResults:null==m?void 0:m.results,debugInfo:v,clusterInfo:g,publicAccessPermission:b,searchExperimentOverrides:S,showActions:k}),s()(ui,{searchResultStore:t,showSpinner:f,shouldShow:!x&&I&&!l.isMobile}))};function ki(){window.__c={n:"SearchNavigationalView"};const{searchFilterMenuRef:e,handleRecentPageSelect:t,searchResultStore:r,secondarySearchResultStore:i}=(0,n.useContext)(Qi),o=(0,_.Fy)(),{errorState:l,shouldShowSxSView:a,hasQuery:d}=(0,z.VK)((()=>({shouldShowSxSView:Boolean((0,Z.gq)({device:o})&&Z.BJ.state.visible),errorState:r.state.errorState,hasQuery:Boolean(L.ZP.state.query.text.trim())||T.VA(L.ZP.state.query.filters)})),[r,o]),c=(0,W.yK)((()=>({container:{display:"flex",flexDirection:"column",width:a?"50%":"100%"},sxsContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[a]),u=!1===l.isLoading&&l.showMajorError,h={searchResultStore:r,searchDebugColumnStore:Z.v_,sxsMode:a},p=(0,z.VK)((()=>{var e;return null===(e=k.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return n.createElement(n.Fragment,null,!o.isMobile&&s()(ni,{isMobile:o.isMobile}),d?n.createElement(n.Fragment,null,!u&&o.isMobile&&n.createElement(Mt,{isMobile:!0,mode:yt.Section,ref:e}),s()("div",{style:c.sxsContainer},void 0,n.createElement(wi,h),a&&n.createElement(wi,V()({},h,{searchResultStore:i,searchDebugColumnStore:Z.BJ})))):p?s()(Zr,{onSelect:t,spaceId:p}):null)}var Ri=r(66897),Fi=r(27714),Zi=r(26825),Bi=r(74169),Ei=r(90683),Oi=r(37034),Ai=r(38755),Li=r(10912),Di=r(84076);function qi(e){window.__c={n:"SearchSidePeekPanelMetadataItem"};const{itemName:t,itemValue:r,isFirstInList:i}=e,n=(0,W.yK)((e=>({itemName:{fontSize:14,color:e.mediumTextColor},itemValue:{fontSize:14,maxWidth:"60%"},itemContainer:{height:36,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderTop:i?void 0:`1px solid ${e.regularDividerColor}`}})),[i]);return s()("div",{style:n.itemContainer},void 0,s()("div",{style:n.itemName},void 0,t),s()("div",{style:n.itemValue},void 0,r))}const Ni={createdBy:s()(he.FormattedMessage,{id:"search.preview.metadata.createdBy",defaultMessage:"Created by"}),created:s()(he.FormattedMessage,{id:"search.preview.metadata.created",defaultMessage:"Created"}),lastEditedBy:s()(he.FormattedMessage,{id:"search.preview.metadata.lastEditedBy",defaultMessage:"Last edited by"}),lastEdited:s()(he.FormattedMessage,{id:"search.preview.metadata.lastEdited",defaultMessage:"Last edited"})},Vi={type:"page_content"};function _i(e){window.__c={n:"SearchSidePeekPanel"};const{selectedResult:t}=e,r=(0,W.yK)((e=>({sidePeekPanel:{flex:"0 0 300px",overflowY:"auto",overflowX:"hidden",minHeight:400,borderLeft:`1px solid ${e.regularDividerColor}`,display:"flex",flexDirection:"column",justifyContent:"space-between"},sidePeekPanelHidden:{display:"none"},emoji:{width:20},pageCover:{position:"absolute",width:"100%",height:49,zIndex:-1},emptyPageCover:{width:"100%",height:"100%",backgroundColor:e.fill.wash},sidePeekContentContainer:{margin:16,width:268},sidePeekActionContainer:{display:"flex",flexDirection:"column"},titleContainer:{marginTop:20,display:"flex",height:73,flexDirection:"column",justifyContent:"space-between"},title:{fontSize:22,fontWeight:ue.Z.fontWeight.bold,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},previewContainer:{marginTop:15,marginBottom:16,display:"flex",flexDirection:"column",position:"relative"},hoveredOrPressedPreview:{background:"unset",boxShadow:"unset"},preview:{borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"16px 16px",background:"unset",boxShadow:"unset"},previewGradientOverlay:{background:`linear-gradient(to top, ${e.contentBackground} 0px, ${e.contentBackgroundTransparent} 20px)`},metadataContainer:{marginTop:15,display:"flex",flexDirection:"column"},action:{margin:16,border:`1px solid ${e.regularDividerColor}`,borderRadius:4,background:"unset"},metadataActorWrapper:{display:"flex",alignItems:"center"},metadataActorName:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},metadataActorAvatar:{marginRight:5}})),[]),i=(0,z.VK)((()=>({...r.sidePeekPanel,...!L.ZP.isSidePeekPanelOpen()&&r.sidePeekPanelHidden})),[r.sidePeekPanel,r.sidePeekPanelHidden]),o=(0,_.O7)(),l=(0,he.useIntl)(),a=(0,z.VK)((()=>(0,Oi.V)(t,l,o)),[l,o,t]),c=(0,z.VK)((()=>k.default.state.currentSpaceStore?(0,Ai.jv)(k.default.state.currentSpaceStore):[]),[]),u=(0,n.useCallback)(((e,t,i)=>{if(void 0===e||void 0===t)return;const n=(0,Ri.Hl)({pointer:{id:e,spaceId:i.id,table:t},getRecordModel:i.getRecordModel}).asActor;return void 0!==n&&(0,Zi.GU)({spacePermissions:c,userId:n.id})?s()("span",{style:r.metadataActorWrapper},void 0,(0,Ei.a)({actor:n,size:18,style:r.metadataActorAvatar}),s()("div",{style:r.metadataActorName},void 0,(0,Ri.$4)(l,n))):void 0}),[l,c,r.metadataActorWrapper,r.metadataActorName,r.metadataActorAvatar]),h=(0,n.useCallback)((e=>(0,ar.IS)(e,{useCompactFormat:!0,useLowercase:!0})),[]),{createdBy:p,created:m,lastEditedBy:g,lastEdited:v}=(0,z.VK)((()=>{const e=k.default.state.currentSpaceStore;return void 0===e?{createdBy:void 0,created:void 0,lastEditedBy:void 0,lastEdited:void 0}:{createdBy:u(t.getCreatedById(),t.getCreatedByTable(),e),created:h(t.getCreatedTime()),lastEditedBy:u(t.getLastEditedById(),t.getLastEditedByTable(),e),lastEdited:h(t.getLastEditedTime())}}),[h,u,t]),f=[{key:"createdBy",itemName:Ni.createdBy,itemValue:p},{key:"created",itemName:Ni.created,itemValue:m},{key:"lastEditedBy",itemName:Ni.lastEditedBy,itemValue:g},{key:"lastEdited",itemName:Ni.lastEdited,itemValue:v}],{previewIcon:y,isEmptyPage:S,hasCover:b}=(0,z.VK)((()=>({previewIcon:t.getIcon(),isEmptyPage:t.isEmptyPage(),hasCover:void 0!==t.getCover()})),[t]),C=(0,z.VK)((()=>(0,or.ZP)({store:t,collectionViewId:t.id,fullyQualified:!0,pageVisitSource:d.tY.SearchQuery})),[t]),M=(0,n.useCallback)((()=>{ir.RD({environment:o,stringValue:C,copiedMessage:ir.tq.copiedLinkToClipboard})}),[o,C]);return s()("aside",{style:i},void 0,s()("div",{style:r.pageCover},void 0,b?s()(Bi.Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:49,proxyWidth:320}):s()("div",{style:r.emptyPageCover})),s()("div",{style:r.sidePeekContentContainer},void 0,s()("div",{style:r.titleContainer},void 0,s()(Re.Z,{disabled:!0,icon:y,isEmptyPage:S,size:36,largeIcon:!0}),s()("div",{style:r.title},void 0,a)),s()(Di.Z,{style:r.previewContainer,href:C,hoveredStyle:r.hoveredOrPressedPreview,pressedStyle:r.hoveredOrPressedPreview},void 0,s()(Li.Z,{variant:"default",contentWrapStyle:r.preview,store:t,coverFormat:Vi,coverSizeFormat:"large",showEmptyGalleryCover:!1,coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:r.previewGradientOverlay,onLoadProxiedImage:()=>{},renderAdditionalBlocks:!0})),s()("div",{style:r.metadataContainer},void 0,f.filter((e=>void 0!==e.itemValue)).map(((e,t)=>s()(qi,{isFirstInList:0===t,itemName:e.itemName,itemValue:e.itemValue},e.key))))),s()("div",{style:r.sidePeekActionContainer},void 0,s()($t.Z,{icon:Fi.N,style:r.action,onClick:M},void 0,s()(he.FormattedMessage,{defaultMessage:"Copy link",id:"search.preview.actions.copyLink"}))))}const zi="80vh";function Wi(e){window.__c={n:"SearchContentPane"};const t=(0,_.Fy)();return(0,j.Z)(),s()(Y.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!t.isMobile,render:()=>s()(J.Z,{capture:!0,allowMenuList:!0,render:t=>n.createElement(Hi,V()({},e,{ignoreAreaEvents:t}))})})}function Hi(e){window.__c={n:"SearchContentPaneInner"};const{ignoreAreaEvents:t,renderAsPage:r,onClose:i}=e,{handleQueryChange:o,searchFilterMenuRef:l,modalBodyMenuRef:a,searchResultStore:d,globalFocusedIndex:c,defaultBodyFocusedResult:h}=(0,n.useContext)(Qi),p=(0,W.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarRightButtonWrapper:{flex:void 0,paddingLeft:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:r?"100vh":zi}})),[r]),[m,g]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),y=(0,_.O7)(),S=(0,_.Fy)(),{isSearchMenuOpen:b,shouldShowSidePeekPanel:C,shouldShowDebugSidebar:M,hasPublicAccessPermission:x,hasQuery:I,shouldShowSpinner:P}=(0,z.VK)((()=>{const e=Boolean(G.Z.state.online),{hasPublicAccessPermission:t}=T.bC(y);return{isSearchMenuOpen:B.default.state.open,shouldShowSpinner:e&&Boolean(L.ZP.state.query.text)&&d.state.serverResultsLoading&&!m,shouldShowSidePeekPanel:$i(S),shouldShowDebugSidebar:Gi({device:S,isPublicAccessPermissionForPage:t}),hasPublicAccessPermission:t,hasQuery:Boolean(L.ZP.state.query.text.trim())||T.VA(L.ZP.state.query.filters)}}),[m,d,S,y]),w=(0,n.useMemo)((()=>u.Ds((()=>{const{activeElement:e}=document;e instanceof HTMLInputElement&&e.blur()}),500,{leading:!0})),[]),k=(0,n.useCallback)((()=>{v&&w()}),[w,v]),R=(0,n.useCallback)((e=>{f(e),e||S.isMobileNative&&Q.Z.updateKeyboardPhase(y,Q.i.willHide,0)}),[S.isMobileNative,y]),F=(0,z.VK)((()=>T.pG(d,c)),[d,c]),Z=(0,z.VK)((()=>h.state),[h]),E=(0,n.useMemo)((()=>s()(Zt.Z,{isOpen:Boolean(r||b),onTypingChange:g,onFocusChange:R,showSpinner:P,onQueryChange:o,selectedResult:F})),[r,b,R,P,o,F]),O=(0,n.useMemo)((()=>{if(S.isMobile){return{menuType:K.og.Modal,left:E,shouldRenderLeftDirectly:!0,width:r?"100vw":void 0,...Ki({isPhone:S.isPhone,renderAsPage:r,style:p.topbarRightButtonWrapper,onClick:i}),header:I&&s()(Ft,{isPublicPageSearch:x}),disableHeaderShadow:!0,topbarStyle:p.topbar,leftRightButtonStyle:p.topbarButton,onScroll:ji(S)?k:void 0,bodyScrollerClassName:U.GZn,...t}}const e={menuType:K.og.Popup,maxHeight:r?"100vh":zi,minHeight:50,disableScroller:!0,scrollerStyle:p.scroller,...t};return r&&S.isDesktop&&(e.maxWidth="100%"),e}),[S,p,t,E,r,i,I,x,k]),A=Z||F;return n.createElement(X.Z,V()({},O,{className:U.Oau,ref:a}),s()(Ui,{enableLazyLoading:r},void 0,s()("div",{style:p.body},void 0,s()(re.Z,{}),!S.isMobile&&E,s()(ki,{})),C&&void 0!==A&&s()(_i,{selectedResult:A}),M&&n.createElement(Mt,{ref:l})))}function Ui(e){window.__c={n:"SearchMenuContentsWrapper"};const{enableLazyLoading:t,children:r}=e,i=(0,_.O7)();return t?s()(te.Z,{fetch:async()=>{var e;await H.Vs(0),await k.default.waitUntil((()=>void 0!==k.default.state.currentSpaceStore)),null===(e=i.mobileNative)||void 0===e||e.markTransitionReady({type:"search"})},loading:()=>s()(n.Fragment,{}),render:()=>r}):s()(n.Fragment,{},void 0,r)}function Ki(e){let{isPhone:t,style:r,renderAsPage:i,onClick:n}=e;return t&&(0,$.Y)("supportsNativeHome")||i?{rightOuterStyle:{display:"none"}}:{right:s()(ee.CancelMenuText,{}),onClickRight:n,rightOuterStyle:r}}function ji(e){return!!e.isMobile&&(!e.isIOS||e.isMobileNative)}function $i(e){if(!e.isMobile&&!(0,Z.gq)({device:e}))return L.ZP.isSidePeekPanelOpen()}function Gi(e){let{device:t,isPublicAccessPermissionForPage:r}=e;if(!r&&!t.isMobile)return L.ZP.isDebugSidebarOpen()}const Qi=n.createContext(null),Ji=n.createContext(null);class Yi extends o.Z{constructor(){super(...arguments),this.inactiveTimer=void 0,this.spaceId=void 0,this.isOpen=!1,this.shouldClearServerResultsOnQueryChange=!1,this.queryResultsSectionRef=n.createRef(),this.searchFilterMenuRef=n.createRef(),this.modalBodyMenuRef=n.createRef(),this.searchResultStore=new E.ZP,this.secondarySearchResultStore=new E.ZP,this.globalFocusedIndex=a.default.createValue(0),this.defaultBodyFocusedResult=a.default.createValue(void 0),this.getStaticContext=u.HP((()=>({queryResultsSectionRef:this.queryResultsSectionRef,searchFilterMenuRef:this.searchFilterMenuRef,modalBodyMenuRef:this.modalBodyMenuRef,handleSelectResult:this.handleQueryResultSelect,handleRecentPageSelect:this.handleRecentPageSelect,handleQueryChange:this.handleQueryChange,searchResultStore:this.searchResultStore,secondarySearchResultStore:this.secondarySearchResultStore,globalFocusedIndex:this.globalFocusedIndex,defaultBodyFocusedResult:this.defaultBodyFocusedResult}))),this.getStoresContext=u.HP((e=>({parentStore:e}))),this.renderContent=()=>{const e=this.currentMode.state;return s()(Qi.Provider,{value:this.getStaticContext()},void 0,s()(Ji.Provider,{value:this.getStoresContext(this.props.parentStore)},void 0,s()("search"===e?Wi:b.yX,{renderAsPage:this.props.renderAsPage,onClose:this.handleComponentClose})))},this.handleRecentPageSelect=e=>{this.handleSelectResult({...e,context:"recent_pages"})},this.handleQueryResultSelect=e=>{this.handleSelectResult({...e,context:"query_results"})},this.handleComponentOpenClose=()=>{this.isOpen!==B.default.state.open&&(this.isOpen=B.default.state.open,B.default.state.open&&(clearTimeout(this.inactiveTimer),L.ZP.update((e=>({...e,hasScrolled:!1})))))},this.handleComponentClose=()=>{const{device:e}=this.environment,{selectedQueryResult:t,numKeystrokes:r,numServerRequests:i,numLocalRequests:s,hadMetaClick:n}=O.default.state,{serverEventProperties:o}=this.searchResultStore.state,{query:l,hasScrolled:a}=L.ZP.state;if(r>0&&(i>0||s>0)&&!t&&!n&&(B.default.state.openAsPage||B.default.state.open)){const t=Date.now(),s=B.default.state.openedTimeMs,n=B.default.state.sessionId,l=O.default.state.firstKeyStrokeTimeMs;v.EH8(this.environment,{...o,timeToAbandonMs:t-s,timeFromFirstKeyStrokeToAbandonMs:l?t-l:void 0,numKeystrokes:r,numResultsAboveFold:this.getNumResultsAboveFold(),searchSessionId:n,searchSessionFlowNumber:i,hasScrolled:a,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:(0,D.qX)(),isMobile:e.isMobile})}y.IB(),""===l.text.trim()&&L.ZP.reset();const d=F.default.getEligibleGroup({experimentId:"search-shorten-inactive-timer",defaultGroup:"control"});let u=120*g.C0;"control"!==d&&c.g6["search-shorten-inactive-timer"].includes(d)&&(u=parseInt(d,10)*g.C0),this.inactiveTimer&&clearTimeout(this.inactiveTimer),u>0?this.inactiveTimer=window.setTimeout(this.resetState,u):this.resetState(),!this.props.renderAsPage&&e.isMobile&&S.close(),O.default.reset()},this.handlePotentialWebSearchAbandon=e=>{this.props.renderAsPage&&this.handleComponentClose()},this.handleSelectResult=e=>{var t,r;let{action:i,sectionName:s,context:n,selectedResult:o,allSearchResults:l}=e;const{serverEventProperties:a,store:c}=o,{numKeystrokes:u,hadMetaClick:h}=O.default.state;if(!B.default.state.open&&!B.default.state.openAsPage)return;const{event:m}=i,g=M.DJ(m);"query_results"===n&&(O.default.update((e=>({...e,selectedQueryResult:!0}))),this.searchResultStore.update((e=>({...e,selectedQueryResultQuery:L.ZP.state.query}))));const y=Date.now(),{openedTimeMs:S,sessionId:b}=B.default.state,{firstKeyStrokeTimeMs:C}=O.default.state,{numServerRequests:x}=O.default.state,{query:I}=L.ZP.state,P=(0,D.qX)(),w=(null==l?void 0:l.filter((e=>{var t;return void 0!==(null===(t=e.matchedCollectionProperties)||void 0===t?void 0:t.collectionText)})).length)??0,k=(null==l?void 0:l.filter((e=>{var t;return void 0!==(null===(t=e.highlight)||void 0===t?void 0:t.collectionText)})).length)??0,R=void 0!==(null===(t=o.matchedCollectionProperties)||void 0===t?void 0:t.collectionText),F=void 0!==(null===(r=o.highlight)||void 0===r?void 0:r.collectionText);v.nLf(this.environment,{...a,context:n,queryStringLength:I.text.trim().length,hasFilters:T.FN(I.filters),activeFilters:I.filters,selectedItemIndex:i.index,selectedItemLocalIndex:{sectionName:s,index:i.indexLocal.indexLocal},numKeystrokes:u,isMetaClick:Boolean(g),isSidebarOpen:L.ZP.isDebugSidebarOpen(),timeToSelectMs:y-S,timeFromFirstKeyStrokeToSelectMs:C?y-C:y-S,sources:null==o?void 0:o.sources,localSources:[...(null==o?void 0:o.localSource)??[]],indexInRecentPages:null==o?void 0:o.indexInRecentPages,timeSinceLastViewedMs:null==o?void 0:o.timeSinceLastViewedMs,hadMetaClick:h,numResultsAboveFold:this.getNumResultsAboveFold(),selectedSearchResultMetadata:this.getSearchResultMetadata(o),selectedSearchResultContent:void 0,allSearchResultMetadata:null==l?void 0:l.slice(0,Yi.MAX_RESULT_TO_TRACK).map((e=>this.getSearchResultMetadata(e))),totalSearchResultCount:null==l?void 0:l.length,searchSessionId:b,searchSessionFlowNumber:x,originalPosition:null==o?void 0:o.originalPosition,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:P,isMobile:this.environment.device.isMobile,resultWithCollectionPropertyMatchCount:w,resultWithCollectionPropertyHighlightCount:k,isCollectionPropertyMatch:R,isCollectionPropertyHighlight:F});const Z=(null==a?void 0:a["server-queryId"])??function(e){let{searchSessionId:t,searchSessionFlowNumber:r}=e;if((0,p.$K)(t)&&(0,p.$K)(r))return`1:${t}:${r}`}({searchSessionId:b,searchSessionFlowNumber:x});let E;"recent_pages"===n?E=d.tY.SearchRecents:"query_results"===n?E=d.tY.SearchQuery:(0,p.t1)(n);f.navigateToSearchResult({searchResult:o,environment:this.environment,pageVisitSource:E,queryId:Z,openInNew:g,openInSidePeek:!1}),A.Z.setState({queryId:Z,pageId:c.id,timeEntered:new Date}),g?O.default.update((e=>({...e,hadMetaClick:!0}))):this.handleComponentClose()},this.handleQueryChange=e=>{this.shouldClearServerResultsOnQueryChange&&(this.searchResultStore.update((e=>({...e,serverResults:void 0}))),this.secondarySearchResultStore.update((e=>({...e,serverResults:void 0})))),""!==e?(O.default.update((e=>({...e,numKeystrokes:e.numKeystrokes+1}))),L.ZP.updateQueryText(e)):L.ZP.resetQuery({resetFilters:!1})},this.getNumResultsAboveFold=()=>T.MQ({environment:this.environment,searchResultsSection:this.queryResultsSectionRef.current,modalBodyMenu:this.modalBodyMenuRef.current,searchFilterMenu:this.searchFilterMenuRef.current}),this.getNumLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.results.length)??0},this.getNumTotalLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.total)??0},this.getSearchResultMetadata=e=>{const{store:t,highlight:r,sources:i,localSource:s}=e;return l.Z.withListenerIgnored((()=>{var n,o,l,a,d;return{blockId:t.id,blockType:t.getType(),lowestNavigableAncestorId:null===(n=t.getNavigableBlockStore())||void 0===n?void 0:n.id,depth:I.qA(t).length,matchesText:Boolean(null==r?void 0:r.text),matchesPathText:Boolean((null==r?void 0:r.pathText)||(null==r?void 0:r.title)),matchesTitle:Boolean(null==r?void 0:r.title),isNavigable:t.isNavigableBlock(),lastEditedTime:t.getLastEditedTime(),isTeamArchived:null===(o=(0,I.VP)(t))||void 0===o?void 0:o.isArchived(),sources:i,localSource:[...s??[]],badges:(null===(l=e.badges)||void 0===l?void 0:l.map((e=>e.type)))??[],isCollectionPropertyMatch:void 0!==(null===(a=e.matchedCollectionProperties)||void 0===a?void 0:a.collectionText),isCollectionPropertyHighlight:void 0!==(null===(d=e.highlight)||void 0===d?void 0:d.collectionText),featureGroups:e.featureGroups}}))},this.getPathText=e=>{const t=[];return I.uJ(e).forEach((e=>{if(P.OY(e)){var r;const i=(0,m.QaF)(null===(r=e.getNavigableBlockStore())||void 0===r?void 0:r.getTitleValue());i&&t.push(i)}else if((0,w.bq)()&&P.Y(e)){const r=e.getName();r&&t.push(r)}})),t},this.handleSpaceChange=()=>{const e=k.default.state.currentSpaceStore&&k.default.state.currentSpaceStore.id;this.spaceId!==e&&(this.spaceId=e,this.resetState())},this.resetState=()=>{L.ZP.reset(),B.default.reset(),this.searchResultStore.reset(),this.secondarySearchResultStore.reset(),O.default.reset()},this.currentMode=this.createComputedStore((()=>L.ZP.state.mode))}willMount(){var e;this.spaceId=null===(e=k.default.state.currentSpaceStore)||void 0===e?void 0:e.id,this.shouldClearServerResultsOnQueryChange="on"===F.default.getGroup("search-clear-results-on-query-change"),(0,Z.lO)()}willMountOrUpdate(e){if(e.renderAsPage&&!B.default.state.sessionId){const e=(0,h.ZP)();B.default.update((t=>({...t,open:!1,openAsPage:!0,openedTimeMs:Date.now(),sessionId:e}))),v.wFN(this.environment,{from:"nativeTab-search-direct-link",searchSessionId:e})}}didMount(){this.props.renderAsPage||B.default.addListener(this.handleComponentOpenClose),k.default.addListener(this.handleSpaceChange),f.potentialWebSearchAbandonEventEmitter.addListener(this.handlePotentialWebSearchAbandon)}willUnmount(){this.resetState(),this.props.renderAsPage||B.default.removeListener(this.handleComponentOpenClose),f.potentialWebSearchAbandonEventEmitter.removeListener(this.handlePotentialWebSearchAbandon),k.default.removeListener(this.handleSpaceChange),this.inactiveTimer&&(clearTimeout(this.inactiveTimer),this.inactiveTimer=void 0)}renderComponent(){if(R.Z.state.isGlobalSearchHost)return null;if(this.props.renderAsPage)return this.renderContent();const{device:e,mobileNative:t}=this.environment,r=Boolean(B.default.state.open);return s()(q.Z,{open:r,onDismiss:this.handleComponentClose,modalStyle:this.getModalStyle(),disableAnimation:!e.isMobile||(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,renderContent:this.renderContent})}getPublicAccessPermissionForPage(){return T.bC(this.environment)}getSearchResultContent(e,t){return l.Z.withListenerIgnored((()=>{var r;return{title:(0,m.QaF)(null===(r=e.getNavigableBlockStore())||void 0===r?void 0:r.getTitleValue()),pathText:this.getPathText(e),highlight:{text:(0,x.fe)(null==t?void 0:t.text),pathText:(0,x.fe)(null==t?void 0:t.pathText)}}}))}getModalStyle(){const{renderAsPage:e}=this.props;return{width:"75%",minHeight:50,maxHeight:e?"100vh":"80vh",transform:"translate3d(0,0,0)",background:this.theme.popoverBackground,maxWidth:this.getMaxWidth(),borderRadius:12}}getMaxWidth(){const e=(0,Z.gq)({device:this.environment.device}),t=Gi({device:this.environment.device,isPublicAccessPermissionForPage:this.getPublicAccessPermissionForPage().hasPublicAccessPermission}),r=$i(this.environment.device);if(e)return"90vw";let i=660;return t&&(i+=250),r&&(i+=300),i}}Yi.displayName="Search",Yi.MAX_RESULT_TO_TRACK=50;const Xi=Yi},82063:(e,t,r)=>{r.d(t,{Z:()=>k});var i=r(67294),s=r(480),n=r(86628),o=r(59054),l=r(9102),a=r(65496),d=r(77080),c=r(32470),u=(r(57658),r(72126)),h=r(21202),p=r(92338),m=r(97880),g=r(63143),v=r(68120),f=r(50906),y=r(18245),S=r(80444),b=r(88632),C=r(57559),M=r(55320),x=r(2342),I=r(30857),P=r(29026);function T(e){let{dependencies:t,debugColumnStore:r,localDebounce:l=25,serverDebounce:c=275,searchResultStore:h,localSearchCache:p,permanentFilterOverride:m,enabled:g}=e;const v=(0,s.O7)(),f=(0,n.VK)((()=>function(e){const{isOnline:t,debugColumnStore:r}=e,i=r.state.searchExperimentOverrides;function s(e){return(null==i?void 0:i[e])??d.default.getGroup(e,{disableExposureLogging:!0})}return{shouldSearchLocal:"on"!==s("search-no-local-blending")&&t,forcedClusterPattern:r.state.forcedClusterPattern,searchExperimentOverrides:r.state.searchExperimentOverrides,forcedBlockIds:r.state.forcedBlockIds}}({isOnline:t.isOnline,debugColumnStore:r})),[t.isOnline,r]),S=(0,i.useMemo)((()=>u.Ds(w,c)),[c]);(0,o.r5)((()=>g?async function(e){const{query:t,openAsPage:r,store:i,fetchServerResultsFn:s}=e;if(r&&u.Xy(t,i.state.selectedQueryResultQuery))return;const n="quick_find_scroll"!==P.ZP.state.source;i.update((e=>({...e,localResults:n?void 0:e.localResults})));const o=function(e){const{shouldSearchLocal:t,parentStore:r,environment:i,query:s,debug:n,limit:o,hasPublicAccessPermission:l,isOnline:d,localSearchCache:c,store:h,permanentFilterOverride:p}=e;let m;const g={...s,filters:{...s.filters,...p}};if(t){var v;return m=a.b9(function(e){const{parentStore:t,requestInput:r,isOnline:i,environment:s,hasPublicAccessPermission:n,localSearchCache:o}=e,{query:l}=r;if(!o)return;if(!l.text.trim())return;if(n)return;const d=y.default.mark("rum.local_quick_search_query"),c=void 0,u=a.Y_({query:r,localCachedPages:o,parentStore:t,environment:s,isOnline:i,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:c});return y.default.measure(d,{environment:s}),u}({parentStore:r,environment:i,requestInput:{query:g,debug:n,limit:o},hasPublicAccessPermission:l,isOnline:d,localSearchCache:c})),I.default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1}))),u.xb(null===(v=m)||void 0===v?void 0:v.results)&&(0,x.Xx)(h.state)&&h.state.serverResultsLoading?h.update((e=>({...e,clearLocalResultsOnServerResponse:!0}))):h.update((e=>({...e,clearLocalResultsOnServerResponse:!1,localResults:m}))),m}}(e),l=[];l.push(...(null==o?void 0:o.results.map((e=>e.id)))??[]),await s({...e,excludedBlockIds:l})}({...t,...f,store:h,fetchServerResultsFn:S,environment:v,localSearchCache:p,permanentFilterOverride:m}):Promise.resolve()),[t,f,h,S,v,p,m,g],{debounce:l})}async function w(e){let{parentStore:t,environment:r,query:i,debug:s,isOnline:n,publicAccessPermissionAncestorBlockId:o,currentSpaceStore:l,searchSessionId:d,searchExperimentOverrides:S,forcedClusterPattern:b,recentPagesForBoosting:x,store:T,forcedBlockIds:w,limit:k,permanentFilterOverride:R,excludedBlockIds:F}=e;const Z={query:{...i,filters:{...i.filters,...R}},debug:s,limit:k};T.update((e=>({...e,serverResultsLoading:!0}))),I.default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const B=T.state.serverResults,E=P.ZP.state.source,O=await async function(e){const{parentStore:t,requestInput:r,isOnline:i,environment:s,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:l,source:d,spaceId:c,searchExperimentOverrides:u,forcedClusterPattern:f,recentPagesForBoosting:S,forcedBlockIds:b,excludedBlockIds:M}=e,{query:x}=r;if(!x.text.trim()&&!a.FN(x.filters))return;if(!i)return{error:p.Ix.Offline};const I=y.default.mark("rum.server_quick_search_query"),P=await a.MS({environment:s,input:r,spaceId:c,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:l,source:d,searchExperimentOverrides:u,forcedClusterPattern:f,recentPagesForBoosting:"on"===(null==u?void 0:u["search-debug-only-no-recent-boosting"])?[]:S,forcedBlockIds:b,excludedBlockIds:M});if(!P)return;if("failed"===P.type)return P.offline?{error:p.Ix.Offline}:{error:p.Ix.RequestFailed};const T=P.data.trackEventProperties,w=(0,v.Qr)(T)?{}:(0,g.m8)((0,m.Yd)(T).map((e=>[`server-${e}`,T[e]]))),k=P.data.results.map(((e,r)=>({...e,serverEventProperties:w,originalPosition:r,store:C.G.createChildStore(t,{table:h.iU,id:e.id})})));return y.default.measure(I,{environment:s}),{value:{results:k,total:P.data.total,debugInfo:P.data.debug,serverEventProperties:w,clusterInfo:P.data.clusterInfo}}}({parentStore:t,environment:r,requestInput:Z,spaceId:null==l?void 0:l.id,searchSessionId:d,searchSessionFlowNumber:I.default.state.numServerRequests,publicAccessPermissionAncestorBlockId:o,isOnline:n,source:E,searchExperimentOverrides:S,forcedClusterPattern:b,recentPagesForBoosting:x,forcedBlockIds:w,excludedBlockIds:F}),A={query:{...P.ZP.state.query,filters:{...P.ZP.state.query.filters,...R}},limit:P.ZP.state.limit,debug:c.ZP.getDebugLevel()};if(!u.Xy(Z,A))return;const L=a.b9(O),D="quick_find_scroll"===E?a.Nu({existingResults:B,newPageResults:L}):L;if(O&&!O.error){var q,N,V;const e=O.value.results;T.update((t=>({...t,serverError:null==O?void 0:O.error,serverResultsLoading:!1,serverResults:D,serverResultsAllLoaded:e.length<k,serverEventProperties:O.value.serverEventProperties,localResults:t.clearLocalResultsOnServerResponse?void 0:t.localResults,clearLocalResultsOnServerResponse:!1})));const t=(null==D?void 0:D.results.map((e=>{var t;return{id:e.id,badges:(null===(t=e.badges)||void 0===t?void 0:t.map((e=>e.type)))??[]}})))??[],i=new Map;for(const{badges:r}of t)for(const e of r){const t=i.get(e)??0;i.set(e,t+1)}const{sections:s}=a.IV({intentBasedGrouping:M.default.state.intentBasedSearch.enablesGrouping,localResults:null===(q=T.state.localResults)||void 0===q?void 0:q.results,serverResults:null==D?void 0:D.results}),n={};for(const[r,o]of Object.entries(s))n[r]=o.map((e=>e.id));f.ZfC(r,{numLocalResults:(null===(N=T.state.localResults)||void 0===N?void 0:N.results.length)||0,numServerResults:(null==D?void 0:D.results.length)||0,localResultsIds:(null===(V=T.state.localResults)||void 0===V?void 0:V.results.map((e=>e.id)))||[],...O.value.serverEventProperties,badgeCounts:i,badgesByResultId:t,idsBySection:n})}else T.update((e=>({...e,serverError:null==O?void 0:O.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,localResults:e.clearLocalResultsOnServerResponse?void 0:e.localResults,clearLocalResultsOnServerResponse:!1})))}function k(){const e=(0,s.O7)(),t=(0,s.Fy)(),{searchResultStore:r,secondarySearchResultStore:u}=(0,i.useContext)(l.SearchStaticContext),{parentStore:h}=(0,i.useContext)(l.SearchStoresContext),p=function(e){const t=(0,s.O7)();return(0,n.VK)((()=>{const{hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:i}=a.bC(t);return{isOnline:Boolean(b.Z.state.online),limit:P.ZP.state.limit,parentStore:e,hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:i,currentSpaceStore:S.default.state.currentSpaceStore,debug:c.ZP.getDebugLevel(),openAsPage:M.default.state.openAsPage,recentPagesForBoosting:P.ZP.state.recentPagesForBoosting,searchSessionId:M.default.state.sessionId,currentSpaceViewStore:S.default.state.currentSpaceViewStore,query:P.ZP.state.query}}),[t,e])}(h),m=(0,n.VK)((()=>Boolean((0,c.gq)({device:t})&&c.BJ.state.visible)),[t]),[{value:g}]=(0,o.r5)((()=>p.hasPublicAccessPermission?Promise.resolve(void 0):p.currentSpaceStore?a.hb({environment:e,currentSpaceStore:p.currentSpaceStore,currentSpaceViewStore:p.currentSpaceViewStore,excludeCurrentPage:"control"===d.default.getGroup("search-includes-current-page-in-local-search")}):Promise.resolve(void 0)),[e,p.currentSpaceStore,p.currentSpaceViewStore,p.hasPublicAccessPermission]);T({dependencies:p,searchResultStore:r,localSearchCache:g,debugColumnStore:c.v_,enabled:!0}),T({dependencies:p,searchResultStore:u,localSearchCache:g,debugColumnStore:c.BJ,enabled:m})}},63334:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(49085);class s extends i.default{getInitialState(){return{}}}const n=s},2342:(e,t,r)=>{r.d(t,{Xx:()=>a,ZP:()=>c});var i=r(49085),s=r(92338),n=r(62965),o=r(29026);class l extends i.default{getInitialState(){return{insertedActionResultsCount:0,localResults:void 0,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,serverResultsAllLoaded:!1,errorState:d,selectedQueryResultQuery:void 0}}setState(e){const t={...this.instanceState};if(!(0,n.Z)(this.instanceState,t))return;const r=function(e){const{newState:t,priorState:r}=e,{localResults:i,serverError:n,serverResultsLoading:o,serverResults:l}=t,a=Boolean(i),d=o?void 0:n;if(!a&&o)return!r.errorState.isLoading&&r.errorState.showMajorError?r.errorState:{isLoading:o};if(a)return{hasLocalResults:a,serverError:d,isLoading:!1,showMajorError:!1};if(d)return{hasLocalResults:a,serverError:d,isLoading:!1,showMajorError:!0};if(0===(null==l?void 0:l.results.length))return{hasLocalResults:a,serverError:s.Ix.NoResults,isLoading:!1,showMajorError:!0};return{hasLocalResults:a,serverError:d,isLoading:!1,showMajorError:!1}}({newState:e,priorState:t});super.setState({...e,errorState:r})}getResultCount(){const{serverResults:e,localResults:t}=this.state,r=(null==e?void 0:e.total)??(null==t?void 0:t.total)??0,i=Boolean(e&&r>=100);return{count:r,isLowerBound:Boolean(e&&t&&r<o.Xv)||i}}}function a(e){const t=Boolean(e.localResults),r=Boolean(e.serverResults)&&!e.serverResultsLoading;return t||r||!1}const d={showMajorError:!1,isLoading:!1,hasLocalResults:!1,serverError:void 0};const c=l},54983:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(49085);class s extends i.default{getInitialState(){return{}}}const n=s},22109:(e,t,r)=>{r.d(t,{T:()=>n});var i=r(23174),s=r.n(i);r(67294);const n=(0,r(45238).I)("arrowsUpDown",{viewBox:"0 0 16 16",svg:s()("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},67220:(e,t,r)=>{r.d(t,{S:()=>n});var i=r(23174),s=r.n(i);r(67294);const n=(0,r(45238).I)("bot",{viewBox:"0 0 16 16",svg:s()("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},6637:(e,t,r)=>{r.d(t,{I:()=>n});var i=r(23174),s=r.n(i);r(67294);const n=(0,r(45238).I)("filterCircled",{viewBox:"0 0 16 16",svg:s()("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},88507:(e,t,r)=>{r.d(t,{I:()=>o});var i=r(23174),s=r.n(i),n=r(67294);const o=(0,r(45238).I)("openTeamSearch",{viewBox:"0 0 16 14",svg:n.createElement(n.Fragment,null,s()("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"}))})},90028:(e,t,r)=>{r.d(t,{j:()=>n});var i=r(23174),s=r.n(i);r(67294);const n=(0,r(45238).I)("searchInPage",{viewBox:"0 0 12 14",svg:s()("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})},45168:(e,t,r)=>{r.d(t,{e:()=>s});var i=r(92338);function s(e){if(e)return e.sources.includes(i.vp.ElasticsearchUniqueID)}},68120:(e,t,r)=>{r.d(t,{Qr:()=>h});r(21703);var i=r(97880),s=r(63143),n=r(74487);const o=Symbol("JSON Schema"),l=Symbol("JSON Schema Components"),a=Symbol("No JSON Schema"),d={isNull:()=>({type:"null",[l]:{}}),boolean:()=>({type:"boolean",[l]:{}}),number:()=>({type:"number",[l]:{}}),integer:()=>({type:"integer",[l]:{}}),string:()=>({type:"string",[l]:{}}),dateString:()=>({type:"string",format:"date",[l]:{}}),literal:e=>({enum:[e],[l]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{enum:t,[l]:{}}},uuid:()=>({type:"string",format:"uuid",[l]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[l]:{}}),any:()=>u,array:e=>({type:"array",items:e[o],[l]:e[o][l]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[o])).filter((e=>e!==a)),[l]:Object.assign({},...e.map((e=>e[o][l])))}),record:(e,t)=>({type:"object",additionalProperties:t[o],[l]:t[o][l]}),object:e=>{let{required:t,optional:r,exact:i}=e;return{type:"object",properties:(0,s.m8)(Object.entries({...t,...r}).filter((e=>{let[t,r]=e;return r[o]!==a})).map((e=>{let[t,r]=e;return[t,r[o]]}))),...i&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[l]:Object.assign({},...Object.values({...t,...r}).map((e=>e[o][l])))}},union:e=>({anyOf:e.map((e=>e[o])).filter((e=>e!==a)),[l]:Object.assign({},...e.map((e=>e[o][l])))}),gte:(e,t)=>{const r=e[o];return r!==a?{...r,minimum:t}:r},lte:(e,t)=>{const r=e[o];return r!==a?{...r,maximum:t}:r},maxLength:(e,t)=>{const r=e[o];if(r===a)return r;if("type"in r){if("string"===r.type)return{...r,maxLength:t};if("array"===r.type)return{...r,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const r=e[o];if(r===a)return r;if("type"in r){if("string"===r.type)return{...r,minLength:t};if("array"===r.type)return{...r,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[o];if(t===a)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[o];if(t===a)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,i.t1)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,i.t1)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>d.nullable({[o]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[l]:t[l]};if(h(t))return t;(0,i.t1)(t)}}},c=(0,s.m8)(Object.entries(d).map((e=>{let[t,r]=e;return[t,function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return 1===s.length&&(0,i.Kn)(s[0])&&("id"in s[0]||"description"in s[0])?function(){const{description:e,examples:i,id:a}=s[0];let d={description:e,...i&&{examples:i},...r(...arguments)};return a&&(d={$ref:`#/components/schemas/${a}`,[l]:{...d[l],[a]:d}}),{[o]:d,...n[t](...arguments)}}:{[o]:r(...s),...n[t](...s)}}]}))),u=(Symbol("Exact empty object ({})"),c.object({id:"emptyObject"})({required:{},optional:{},exact:!0}),{});function h(e){return(0,i.Kn)(e)&&0===Object.keys(e).length}}}]);