"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[137],{31523:(e,t,i)=>{i.r(t),i.d(t,{WikiPromoPopup:()=>A});var o=i(23174),r=i.n(o),a=i(67294),s=i(480),n=i(86628),u=i(24405),g=i(41892),d=i(92595),p=i(30687),m=i(90965),l=i(64684),c=i(70203),f=i(82990),P=i(5366),k=i(50906),S=i(39699),b=i(37181),w=i(29919),M=i(98165),h=i(67669),W=i(85644),v=i(77907),_=i(80444),y=i(21884),C=i(35057);const F=["wiki","위키"];function A(){window.__c={n:"WikiPromoPopup"};const e=(0,s.O7)(),t=(0,u.Fg)(),i=(0,u.yK)((()=>({image:{width:320,height:220}})),[]),{currentUserSettingsStore:o,currentSpaceStore:A,mainEditorCurrentBlockStore:E,currentUserStore:U}=(0,n.VK)((()=>{const{currentSpaceStore:e,currentUserStore:t,currentUserSettingsStore:i,mainEditorCurrentBlockStore:o}=_.default.state;return{currentSpaceStore:e,currentUserStore:t,currentUserSettingsStore:i,mainEditorCurrentBlockStore:o}}),[]),V=(0,n.VK)((()=>{if(!E)return;return M.VP(E)}),[E]);(0,a.useEffect)((()=>{(0,d.exposeDebugValue)("resetWikiPromoPopup",(()=>{const{currentUserSettingsStore:t}=_.default.state;t&&S.createAndCommit({userAction:"WikiPromoPopup.resetWikiPromoPopup",environment:e,perform:e=>{b.d2({userSettingsStore:t,transaction:e,data:{seen_targeted_wiki_prompt:!1}})}})})),(0,d.exposeDebugValue)("resetWikiOnboarding",(()=>{const{currentUserSettingsStore:t}=_.default.state;t&&S.createAndCommit({userAction:"WikiPromoPopup.resetWikiOnboarding",environment:e,perform:e=>{b.d2({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"unseen"}})}})}))}),[e]);const T=(0,a.useCallback)((()=>{o&&(S.createAndCommit({userAction:"WikiPromoPopup.markSeen",environment:e,perform:e=>{b.d2({userSettingsStore:o,transaction:e,data:{seen_targeted_wiki_prompt:!0}})}}),k.mgu(e),y.E.setState({showConvertTooltip:!0,forceShow:!1}))}),[o,e]),K=(0,a.useCallback)((()=>{E&&(y.E.reset(),S.createAndCommit({userAction:"WikiPromoPopup.turnIntoWiki",environment:e,perform:t=>{w.Y({environment:e,blocks:[E],transaction:t,source:"targeted_promo"})}}))}),[E,e]),x=(0,n.VK)((()=>y.E.state.forceShow),[]),L=(0,n.VK)((()=>{if(e.device.isMobile)return!1;if(!(o&&A&&E&&U))return!1;if(!(0,W.zg)(E))return!1;if((0,h.yi)(e,E))return!1;if(!(0,C.Mk)())return!1;const t=o.getSettings();if(!t||void 0!==t.wiki_onboarding_phase&&"unseen"!==t.wiki_onboarding_phase)return!1;if(!E.isTopLevel())return!1;if(E.isTopLevelTeamPage()){if(!(0,l.pd)({membership:null==V?void 0:V.getMembers()},U.id))return!1}else if(!(0,m.KM)({permissions:A.getPermissionItems()},U.id))return!1;return!!F.some((e=>(0,c.QaF)(E.getTitleValue()).toLowerCase().includes(e)))||(_.default.state.inAppCalloutStore.canShow("wiki_promo"),!1)}),[o,A,e,E,V,U]),O="light"===t.mode?g.Z.images.wikiTargetedPromo.lightMode:g.Z.images.wikiTargetedPromo.darkMode,z=(0,a.useMemo)((()=>[{imageSrc:O.verificationPng,imageStyles:i.image,title:r()(P.FormattedMessage,{defaultMessage:"Verify pages",id:"WikiPromoPopup.verification.title"}),subtitle:r()(P.FormattedMessage,{defaultMessage:"Assign <bold>owners</bold> to pages. Owners can verify if a page has accurate, reliable information",id:"WikiPromoPopup.verification.subtitle",values:{bold:e=>r()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)}})},{imageSrc:O.tagsPng,imageStyles:i.image,title:r()(P.FormattedMessage,{defaultMessage:"Organize your pages with tags",id:"WikiPromoPopup.tags.title"}),subtitle:r()(P.FormattedMessage,{defaultMessage:"Use tags and other database properties to keep your wiki organized",id:"WikiPromoPopup.tags.subtitle"})},{imageSrc:O.ownerPng,imageStyles:i.image,title:r()(P.FormattedMessage,{defaultMessage:"Sort and filter pages",id:"WikiPromoPopup.owner.title"}),subtitle:r()(P.FormattedMessage,{defaultMessage:"Easily find all pages you're responsible for using database sorting and filtering",id:"WikiPromoPopup.owner.subtitle"})},{imageSrc:O.upgradePng,imageStyles:i.image,title:r()(P.FormattedMessage,{defaultMessage:"Ready to upgrade?",id:"WikiPromoPopup.upgrade.title"}),subtitle:r()(P.FormattedMessage,{defaultMessage:"Add verification, owners, and tags to this page (you can undo this later)",id:"WikiPromoPopup.upgrade.subtitle"})}]),[O.ownerPng,O.tagsPng,O.upgradePng,O.verificationPng,i.image]);return r()(v.LazyFeatureIntroPopup,{calloutId:"wiki_promo",initialPromo:{icon:p.w,header:r()(P.FormattedMessage,{id:"WikiPromoPopup.header",defaultMessage:"Better wikis in Notion"}),description:r()(P.FormattedMessage,{id:"WikiPromoPopup.description",defaultMessage:"You can now use <bold>page verification</bold> and <bold>page owners</bold> to keep information{br}up to date",values:{bold:e=>r()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e),br:r()("br",{})}})},steps:z,seenFeatureUserSetting:"seen_targeted_wiki_prompt",userSettingsStore:o,allowExternalMouseEvents:!0,onDismiss:T,onTryFeatureClick:K,forceShow:x,isUserEligible:L,onPopupSeen:()=>k.Kge(e,{source:x?"page_menu":"targeted_promo"}),onLearnMore:()=>k.Rm2(e)})}}}]);