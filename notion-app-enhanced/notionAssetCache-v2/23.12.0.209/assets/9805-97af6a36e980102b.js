"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9805],{4252:(e,t,o)=>{o.d(t,{Z:()=>_e});var i=o(10434),r=o.n(i),n=o(23174),a=o.n(n),s=o(67294),l=o(83355),d=o(1302),c=o(480),u=o(53150),p=o(6740),m=o(86628),g=o(24405),S=o(49085),h=o(75071),y=o(15157),b=o(69246),v=o(97880),f=o(82990),T=o(5366),I=o(89858),w=o(24677),C=o(37190),M=o(89971),B=o(59389),P=o(98104),k=o(39699),x=o(43250),Z=o(92639),L=o(87279),O=o(98742),_=o(50659);var V=o(80444),A=(o(77080),o(3418)),E=o(31792),K=o(70704),F=o(7755),R=o(35817),D=o(64921),H=o(52275),N=o(31945),z=o(78140),j=o(32163),U=o(72495),W=o(26388),G=o(81415),J=o(8848),Y=o(3338),Q=o(50906),$=o(12534),q=o(35026),X=o(75024),ee=o(71064),te=o(95697);var oe=o(43914),ie=o(77907),re=o(42185),ne=o(33052),ae=o(23063),se=o(55118),le=o(5210);const de=function(e){window.__c={n:"TeamCaratSwitcher"};const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,r=(0,g.Fg)(),n=(0,g.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),s=(0,m.VK)((()=>t.state.isHidden),[t]);return a()("div",{style:n.caratContainer},void 0,a()(le.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!s,color:r.lightIconColor,onClick:o,disabled:!0}))};var ce=o(69814),ue=(o(57658),o(19889)),pe=o(64684),me=o(57559),ge=o(29302);function Se(e){window.__c={n:"TeamMembersList"};const t=(0,c.O7)(),[o,i]=(0,s.useState)(!1),{teamStore:n,spaceStore:l,teamOutlinerType:d}=e,{isReady:u,allMembersUserIds:p,userStores:S}=(0,m.VK)((()=>{const e=(0,te.tO)({teamStore:n,spaceStore:l}),t=e.map((e=>me.U6.createChildStore(n,{table:ue.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[n,l]),{ownerStores:h,memberStores:y}=(0,m.VK)((()=>{const e=[],t=[];if(!n.isReady())return{ownerStores:e,memberStores:t};for(const o of S){(null==o?void 0:o.id)&&((0,pe.pd)({membership:n.getMembers()},null==o?void 0:o.id)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[n,S]),b=(0,g.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let v=0,f=S;return f=[...h,...y],S.length>5&&(v=S.length-5,f=f.slice(0,5)),u?a()("div",{style:b.membershipSection},void 0,a()(W.Z,{placement:W.Z.Placement.Bottom,disableTooltip:p.length<=0,render:t=>{return s.createElement("span",r()({},t,{style:e.renderStyle}),p.length," ",(o=p.length,a()(T.FormattedMessage,o>1?{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}:{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"})));var o},renderTooltip:e=>(o||(i(!0),Q.v2V(t,{teamStore:n,outliner_type:d})),s.createElement("div",e,a()("div",{style:{marginBottom:4}},void 0,f.map((e=>a()(ge.Z,{style:b.teamMemberList,userStore:e,avatarSize:18}))),v>0&&a()("div",{style:b.moreMessage},void 0,a()(T.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:v}})))))})):null}var he=o(93686),ye=o(14720),be=o(61766),ve=o(68785),fe=o(37181),Te=o(74263),Ie=o(28451);function we(e){let{teamId:t,origin:o}=e;window.__c={n:"TeamAddAppTemplateTooltip"};const i=(0,c.O7)(),[r,n]=(0,s.useState)(!1),l=(0,g.yK)((()=>({tooltip:{width:240}})),[]);(0,s.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return n(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const d=(0,s.useCallback)((()=>{Te.Z.setState({hasShownTooltip:!0,teamId:t}),Q.Khd(i,{from:"team_add_app_template"})}),[i,t]),u=(0,s.useCallback)((()=>fe.$n({environment:i,teamId:t})),[i,t]);return r?a()(Ie.P,{calloutId:"team_add_app_template_tooltip",onShow:d},void 0,a()(G.U,{origin:o,placementToOrigin:"right",header:a()(T.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:a()(T.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>u(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:l.tooltip})):null}function Ce(e){const t=(0,c.O7)();return(0,m.VK)((()=>(0,te.dY)({environment:t,teamId:e})),[t,e])}function Me(e){window.__c={n:"OutlinerTeamToggleAddPageButton"};const{teamStore:t}=e,o=(0,T.useIntl)(),i=(0,m.qz)(void 0,be.Z),n=(0,s.useRef)(null),l=Ce(t.id),d=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),u=function(){const e=(0,c.Fy)(),t=e.isMobile?32:20;return(0,g.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:3,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return s.createElement(s.Fragment,null,l&&a()(we,{teamId:t.id,origin:n}),a()(N.ZP,{popupType:N.Z4.Popup,buttonPopupStore:i,alignmentToOrigin:N.vR.Start,originGap:2,renderOrigin:e=>a()(W.Z,{textWrap:!1,renderTooltip:()=>d,placement:W.Z.Placement.Bottom,render:t=>s.createElement(D.Z,r()({ariaLabel:d,ref:n,style:u.button},(0,O.Z)(t,e)),a()("div",{style:u.plusIconContainer},void 0,(0,h.f)(u.plusIcon)))}),render:e=>a()(ye.p7,{renderLoading:e=>a()("div",{style:ye.Ry.LazyTeamAddAppTemplateMenu},void 0,e&&a()(ve.Z,{})),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})}))}function Be(e){window.__c={n:"OutlinerTeamToggleButton"};const{teamStore:t,label:o,isHovered:i,outlinerToggleButtonStore:n,teamOutlinerType:l,outlinerTeamOnToggle:d,onTeamJoinComplete:u,labelAriaId:p}=e,S=(0,c.Fy)().isMobile,h=function(e){switch(e){case b.cz:case b.mu:return!0;case b.PT:case b.kg:return!1;default:(0,v.t1)(e)}}(l),y=(0,c.O7)(),{name:w,showAddPageButton:C}=(0,m.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),M=(0,ee.e)(t),B=function(e){const t=(0,c.O7)(),o=(0,m.VK)((()=>V.default.state.currentSpaceStore),[]);return(0,m.VK)((()=>(0,te.zz)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}(t),P=(0,oe.K)(t),k=(0,m.VK)((()=>V.default.state.currentSpaceStore),[]),[,,x]=(0,m.AF)(void 0,ne.Z),Z=(0,c.Fy)(),L=S||i,O=(0,g.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:J.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:3},container:{position:"relative",display:"flex",alignItems:"center",minHeight:S?48:h?30:28,padding:h?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...f.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:f.Z.lineHeight.UISmall.desktop,marginBottom:1,...f.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:f.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...f.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...f.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...L?{}:X.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...L?{}:X.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:h?15:20,height:h?15:20}})),[S,h,L]),_=(0,m.VK)((()=>t.getTeamPagesStore()),[t]),E=(0,m.VK)((()=>re.Z.state===t.id),[t.id]),K=(0,m.VK)((()=>t.getTeamAccessLevel()),[t]),[F,D]=(0,s.useState)(void 0),H=Ce(t.id),z=(0,s.useCallback)((e=>{let{draggingStores:t}=e;return!!k&&(0,q.Pl)({environment:y,draggingStores:t,parentStore:_,currentSpaceStore:k})}),[k,y,_]),j=(0,s.useCallback)((async e=>{await I.NP({dropArgs:e,environment:y,type:"team",isTopLevel:!0,parentStore:_})}),[y,_]);if(!w)return null;const U=!B,G=function(e,t){if(!t)return!1;switch(e){case b.mu:return!0;case b.PT:case b.kg:case b.cz:return!1;default:(0,v.t1)(e)}}(l,M),le=!Z.isMobile&&!M&&"closed"===K,ue=e=>{A.Z.addNamedPopup("team_more_actions"),Q.QkQ(y,{store:t,from:e})},pe=()=>{A.Z.removeNamedPopup("team_more_actions")};return a()(se.G,{dropTargetKey:R.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:z,onSelectableDrop:j},void 0,a()(N.ZP,{popupType:N.Z4.Popup,alignmentToOrigin:N.vR.Start,placementToOrigin:N.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:F,render:e=>a()(ie.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:x,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return a()("div",{style:O.container,onContextMenu:e=>{!Z.isMobile&&(0,$.ZP)({event:e,context:$.Af.EditorContextMenu,callback:()=>{e.preventDefault(),D(new DOMRect(e.clientX,e.clientY)),i()}})}},void 0,Z.isMobile&&a()(de,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:d}),a()("div",{style:O.teamIconContainer},void 0,a()(he.p,{size:20,store:t,disabled:!0,style:{fontWeight:f.Z.fontWeight.medium}})),a()("div",{style:O.labelContainer},void 0,a()("div",{style:O.labelText,id:p},void 0,o,!Z.isMobile&&a()(de,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:d,style:L?O.carat:X.jy})),h&&void 0!==P&&a()("div",{style:O.membersCountText},void 0,k&&a()(Se,{teamStore:t,spaceStore:k,renderStyle:O.membersCountText,teamOutlinerType:l}),le&&a()(W.Z,{placement:W.Z.Placement.Bottom,renderTooltip:e=>s.createElement("div",r()({style:O.closedTeamTooltip},e),function(e){let{accessLevel:t}=e;if("private"===t)return a()(T.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}({accessLevel:K})),render:e=>s.createElement("div",r()({style:O.closedTeamLabel},e)," ","·"," ",a()(T.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"}))}),G&&s.createElement(s.Fragment,null,a()("span",{},void 0," ")," ·",a()("span",{},void 0,(0,Y.p)(O.joinedBadgeIcon)),a()("span",{style:O.joinedBadge},void 0,a()(T.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"}))))),M&&a()("div",{style:{...O.overflow,...L||H?{}:X.jy}},void 0,a()(ie.LazyOutlinerTeamOverflow,{teamStore:t,from:l,onPopupClick:()=>ue(l),onPopupClose:pe}),C&&!Z.isMobile&&a()(Me,{teamStore:t})),!M&&a()("div",{style:O.unjoinedOverflowMenu},void 0,a()(ie.LazyOutlinerTeamOverflow,{teamStore:t,from:l,hideJoin:!0,onPopupClick:()=>ue(l),onPopupClose:pe})),!Z.isMobile&&U&&a()(ce.M,{style:O.joinLeaveButton,hoveredStyle:O.joinLeaveButtonHovered,teamStore:t,placement:W.Z.Placement.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:u}),C&&Z.isMobile&&a()("div",{style:{...O.overflow,...L?{}:X.jy}},void 0,a()(Me,{teamStore:t})),a()(ae.Z,{isVisible:E,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{stiffness:30,damping:10,precision:.001},render:()=>a()("div",{style:O.teamHighlightAnimationBackgroundContainer})}))},onClick:()=>ue("teamSidebar"),onClose:pe}),a()(ie.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:x,store:t}))}var Pe=o(14694);class ke extends l.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:E.Z,focusStore:S.default.createClass(!1),labelMouseStore:E.Z,labelFocusStore:S.default.createClass(!1),outlinerToggleButtonStore:K.Z},this.headerRef=s.createRef(),this.contentsAriaId=(0,u.Z)(),this.labelAriaId=(0,u.Z)(),this.handleHideClick=()=>{const{isHidden:e}=this.getToggleButtonStore().state,t=!e;"team"===this.props.type?M.k7({environment:this.environment,spaceViewStore:this.props.spaceViewStore,teamStore:this.props.teamStore,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState,teamOutlinerType:this.props.teamOutlinerType,isExplicitUserAction:!0}):I.Eo({environment:this.environment,spaceViewStore:this.props.spaceViewStore,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState})}}willMount(e){if(super.willMount(e),e.initialToggleState&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t="team"===e.type?M.RW(e.spaceViewStore,e.teamStore.id):I.B8(e.spaceViewStore,e.type),o=y.Z.get({userId:this.environment.currentUser.id,key:t});o&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:r}=this.getToggleButtonStore().state,n={bookmarks:x.F4o,workspace:x.j35,shared:x.MU2,private:x.aL4,offline:x.yNE,team:x.l24,[b.PT]:x.RG3,[b.cz]:x.Uwd,[b.mu]:x.jWx,[b.kg]:x.rIE}[this.props.type];return s.createElement("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,p.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:r||t&&!this.environment.device.isMobile?i:o??ke.marginBottom,width:"100%"},className:`${n}-container`},this.renderLabel(n),!r&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId}))}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=this.getToggleButtonStore().state,{labelMouseStore:i,labelFocusStore:n}=this.stores,l=a()(T.FormattedMessage,o?{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}:{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),d={...t?this.getMobileSectionLabelStyle():this.getSectionLabelStyle(),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};(i.state.mouseEntered||n.state)&&Object.assign(d,this.getSectionLabelHoverStyles());const c="team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,_.G$)({isMobile:t})}:this.getLabelButtonStyle();return a()(Pe.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:"team"===this.props.type?this.getSectionTeamItemStyle():this.getSectionSidebarItemStyle(),childrenStyle:{overflow:"visible"},right:a()(xe,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore})},void 0,a()("div",{style:{display:"flex",alignItems:"center"}},void 0,a()(W.Z,{textWrap:!1,disableTooltip:"team"===this.props.type,renderTooltip:()=>a()("div",{},void 0,a()("div",{},void 0,l),a()("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"}},void 0,this.props.labelTooltip)),placement:W.Z.Placement.Top,render:e=>s.createElement(D.Z,r()({},"team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},{"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:c,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>this.handleHideClick()},(0,O.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,p.E)(t)&&n.setState(!0)},onBlur:()=>n.setState(!1)})),a()("span",{style:d},void 0,this.renderLabelContent()))})))}renderLabelContent(){switch(this.props.type){case"bookmarks":return a()(T.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return a()(T.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return a()(T.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return a()(T.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=this.getToggleButtonStore().state,{mouseEntered:t}=this.stores.labelMouseStore.state;return a()(Be,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:this.getToggleButtonStore(),outlinerTeamOnToggle:()=>this.handleHideClick(),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case b.kg:case b.mu:case b.cz:case b.PT:return this.props.sectionLabel;default:(0,v.t1)(this.props)}}getToggleButtonStore(){const{guidedTutorialStore:e}=V.default.state,{type:t}=this.props,o=this.props.customToggleButtonStore||this.stores.outlinerToggleButtonStore;if(e&&"team"===t){const{teamStore:t}=this.props;Object.keys(e.state.sidebarToggleStores.teams).includes(t.id)||e.setState({...e.state,sidebarToggleStores:{teams:{...e.state.sidebarToggleStores.teams,[t.id]:o}}})}return o}getSectionSidebarItemStyle(){return{paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15,minHeight:24,marginBottom:2,marginTop:6}}getSectionTeamItemStyle(){return{padding:0,margin:0,paddingLeft:10,borderRadius:0}}getSectionLabelStyle(){return{textTransform:"initial",fontSize:12,lineHeight:1,color:this.theme.lightTextColor,fontWeight:f.Z.fontWeight.semibold}}getMobileSectionLabelStyle(){return{textTransform:"initial",fontSize:13,lineHeight:1,color:this.theme.lightTextColor,fontWeight:f.Z.fontWeight.semibold}}getSectionLabelHoverStyles(){return{color:this.theme.darkTextColor}}getLabelButtonStyle(){const{isMobile:e}=this.environment.device;return{display:"flex",alignItems:"center",borderRadius:3,padding:"2px 4px",marginLeft:-4,...e&&{marginBottom:8}}}}function xe(e){let{right:t,showAddButton:o,focusStore:i,...r}=e;window.__c={n:"OutlinerToggleButtonRightLabel"};const n=(0,m.VK)((()=>{const e=F.xH.state||i.state,t=["new-page-sidebar","congratulations"].includes(C.getShadowCursorCurrentElementName()||"");return e||t}),[i]),l=(0,g.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:n?1:0,pointerEvents:n?"auto":"none",transition:"opacity 200ms ease-in"}})),[n]);return a()("div",{style:l.wrapper},void 0,t,o&&s.createElement(Ze,r))}function Ze(e){let{type:t,disableTooltip:o,labelTooltip:i,spaceStore:n,spaceViewStore:l,shouldPersistToggleState:u,outlinerToggleButtonStore:p}=e;window.__c={n:"OutlinerToggleAddButton"};const S=(0,c.O7)(),y=S.device.isMobile,f=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":return!1;case b.PT:case b.cz:case b.mu:case b.kg:return!0;default:(0,v.t1)(e)}}(t),M=(0,T.useIntl)(),x=(0,s.useRef)(null),{guidedTutorialStore:L,mainEditorCurrentBlockStore:O,currentUserSettingsStore:_}=(0,m.VK)((()=>{const{guidedTutorialStore:e,currentUserSettingsStore:t,mainEditorCurrentBlockStore:o}=V.default.state;return{guidedTutorialStore:e,currentUserSettingsStore:t,mainEditorCurrentBlockStore:o}}),[]),A=(0,m.VK)((()=>{var e;return null===(e=L.state)||void 0===e?void 0:e.type}),[L]),E=(0,m.VK)((()=>C.getShadowCursorCurrentElementName()),[]),K=(0,s.useCallback)((async e=>{if("team"!==t)if("private"===t&&"new-page-sidebar"===C.getShadowCursorCurrentElementName()){const e=I.kC({environment:S,spaceStore:n,spaceViewStore:l,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:u,title:"My First Page"}),o=await e;d.default.afterNextFlush((()=>{o&&(k.createAndCommit({userAction:"outlinerToggleButton.guidedTutorialStoreInit",environment:S,perform:e=>B.eV({environment:S,store:o,transaction:e})}),setTimeout((()=>{const e=null==O?void 0:O.getContentStores()[0];e&&(w.eP({environment:S,store:e}),P.NX({store:e.getBlockTitleStore()})),_&&C.pointToSupportedCursorElement(S,{elementName:"new-page-blank-line",userSettingsStore:_})}),"tooltip"===A?100:1e3))}))}else I.kC({environment:S,spaceStore:n,spaceViewStore:l,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:u,useCrdt:e})}),[_,S,O,p,u,n,l,A,t]),F=(0,s.useCallback)((()=>{R.lo("sidebar_team_section")}),[]),H=(0,s.useCallback)((()=>{_&&L&&C.complete(S,_,L)}),[_,S,L]),N=(0,g.yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3,marginLeft:y?0:4},plusIcon:{fill:e.mediumIconColor,width:14,height:14},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[y]),z=f?M.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):M.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}),j=(0,m.VK)((()=>!1),[]);return s.createElement(s.Fragment,null,"congrats"===E&&!f&&a()(G.U,{origin:()=>x.current||null,placementToOrigin:"right",header:a()(T.FormattedMessage,{defaultMessage:"Congratulations! You created a page and a subpage.",id:"sidebar.shadowCursorCongrats.header"}),content:a()(T.FormattedMessage,{defaultMessage:"You can use this method to organize your content. Click {char} to find your subpages.",id:"sidebar.shadowCursorCongrats.content",values:{char:a()("span",{style:N.tutorialText},void 0,a()(Z.sr,{char:"›",light:!0}))}}),onCloseClick:H,pointerPosition:"20%",pointerLength:24,pointerOffset:-3,style:N.tutorialTooltip,shouldDismissUponOutsideClick:!0}),a()(W.Z,{textWrap:!1,disableTooltip:o,renderTooltip:()=>s.createElement(s.Fragment,null,z,a()("br",{}),a()("span",{style:N.labelTooltip},void 0,!f&&i)),placement:W.Z.Placement.Bottom,render:e=>!f&&j?s.createElement(Le,r()({},e,{createPageFn:K})):s.createElement(D.Z,r()({ariaLabel:z,style:N.plusButton,mobileFeedback:y,onClick:f?F:()=>K(),className:"private"===t?"shadow-cursor-new-page-sidebar":void 0},e),s.createElement("span",{ref:x}),(0,h.f)(N.plusIcon))}))}function Le(e){window.__c={n:"AddCrdtPageButtonPopup"};const{createPageFn:t}=e,o=(0,g.yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3},icon:{fill:e.mediumIconColor,width:14,height:14}})),[]);return a()(N.ZP,{popupType:N.Z4.Popup,alignmentToOrigin:N.vR.Start,originGap:2,renderOrigin:t=>s.createElement(D.Z,r()({mobileFeedback:!1,style:o.button},e,t),(0,h.f)(o.icon)),render:e=>a()(Oe,{onDismiss:e.close,createPageFn:t}),onClick:()=>{A.Z.addNamedPopup("outliner_add_page")},onClose:()=>{A.Z.removeNamedPopup("outliner_add_page")}})}function Oe(e){const{onDismiss:t,createPageFn:o}=e,i=[{key:"addRegularPage",render:e=>s.createElement(H.Z,r()({},e,{title:"Add regular page"})),action:()=>{t(),o(!1)}},{key:"addCrdtPage",render:e=>s.createElement(H.Z,r()({},e,{title:"Add CRDT page"})),action:()=>{t(),o(!0)}}];return a()(z.Z,{menuType:L.og.Popup},void 0,a()(j.Z,{type:j.i.Vertical,sections:[{key:"addPageOptions",render:e=>s.createElement(U.Z,e),items:i}],initialFocus:void 0}))}ke.displayName="OutlinerToggleButton",ke.marginBottom=18;const _e=ke},22735:(e,t,o)=>{o.d(t,{Z:()=>Z});var i=o(23174),r=o.n(i),n=o(10434),a=o.n(n),s=o(67294),l=o(480),d=o(86628),c=o(24405),u=o(75071),p=o(72126),m=o(69246),g=o(5366),S=o(89858),h=o(74647),y=o(43250),b=o(35026),v=o(80444),f=o(64921),T=o(55118),I=o(25777),w=o(14694),C=o(48505);function M(e){window.__c={n:"EmptyChildrenPlaceholder"};const t=(0,l.Fy)(),o=(0,c.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return r()(w.Z,{role:"treeitem",style:e.itemStyle},void 0,r()("div",{style:o.placeholder},void 0,r()(g.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})))}function B(e){window.__c={n:"AddPageButton"};const{type:t}=e,o=(0,l.O7)(),{currentSpaceStore:i,currentSpaceViewStore:n}=(0,d.VK)((()=>v.default.state),[]),a=o.device.isMobile,s=(0,c.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!n)return null;return r()(f.Z,{mobileFeedback:a,onClick:async()=>{if("team"===t)return;await S.kC({environment:o,spaceStore:i,spaceViewStore:n,type:t,prepend:!1,shouldPersistToggleState:!0})&&a&&h.close()}},void 0,r()(w.Z,{style:s.sidebarItem,left:r()(x,{}),disableMobileBorder:!0},void 0,r()(g.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})))}function P(e){const{store:t,index:o}=e;return r()(C.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}function k(e){window.__c={n:"EmptyDroppable"};const t=(0,l.O7)(),{type:o,parentStore:i}=e,n=p.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return r()(T.G,{dropTargetKey:n,canDropBelow:!0,onSelectableDrop:async e=>{await S.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=v.default.state;return!!o&&(0,b.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function x(){window.__c={n:"PlusIcon"};const e=(0,c.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return r()("div",{style:e.iconContainer},void 0,(0,u.f)(e.icon))}const Z=function(e){window.__c={n:"Outliner"};const{disabled:t,childStores:o,areChildrenLoading:i,itemDepth:n,type:d}=e,c=(0,l.Fy)(),u=o.map(((t,o)=>s.createElement(P,a()({},e,{key:t.id,store:t,index:o})))),p=0===n,g=0===u.length,S=(g||e.isHeaderless||c.isMobile)&&p&&("private"===d||"workspace"===d)&&!t,h=g&&!S&&!p,b={offline:y.blN,bookmarks:y.fe0,workspace:y.BEs,shared:y.JkF,private:y.q1J,team:y.l24,[m.PT]:void 0,[m.cz]:void 0,[m.mu]:void 0,[m.kg]:void 0}[e.type];return r()(I.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:p?"tree":"group",style:e.style,className:b,loaded:!i,showSpinnerTimeout:3e3,spinnerSize:"1em"},void 0,u,g&&p&&r()(k,{type:e.type,parentStore:e.parentStore}),S&&r()(B,{type:e.type}),h&&r()(M,{itemStyle:e.itemStyle}))}},48505:(e,t,o)=>{o.d(t,{gZ:()=>De,aZ:()=>He,ZP:()=>Ne});var i=o(10434),r=o.n(i),n=o(23174),a=o.n(n),s=o(67294),l=o(480),d=o(97511),c=o(33125),u=o(86628),p=o(24405),m=o(41432),g=o(15157),S=o(89858),h=o(19037),y=o(35026),b=o(45094),v=o(52315),f=o(81844),T=o(49085);class I extends T.default{getInitialState(){return{open:!1,hovered:!1,focused:!1}}}const w=I;var C=o(57559),M=o(26664),B=o(79954),P=o(6740),k=o(21202),x=o(82990),Z=o(50906),L=o(17659),O=o(93959),_=o(84210),V=o(17652),A=o(50659),E=o(98165),K=o(95697),F=o(91948),R=o(80444),D=o(80796),H=o(11646),N=o(84076),z=o(68785),j=o(76798),U=o(14694),W=o(5366),G=o(9953),J=o(39699),Y=o(31278),Q=o(26388);function $(e){window.__c={n:"OutlinerItemIcon"};const{targetStore:t,canEditItem:o}=e,i=(0,W.useIntl)(),n=(0,l.O7)(),{isMobile:d}=n.device,c=(0,u.VK)((()=>t.getIcon()),[t]),m=(0,u.VK)((()=>!d&&o&&!t.isLocked()),[d,o,t]),g=(0,u.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),S=(0,p.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),h=e=>{const o=t.getIconStore();o&&J.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:n,perform:t=>{G.sO({store:o,value:e,transaction:t})}})};return a()(Q.Z,{renderTooltip:()=>a()(W.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:Q.Z.Placement.Bottom,render:e=>{var o;return m?s.createElement(Y.Z,r()({bucket:"secure",disabled:!1,icon:c,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:d?24:20,onChange:h,pageIconStyle:S.pageIcon},e,{largeIcon:!0,iconLoggingData:{recordTable:g,source:"sidebar",block_type:t.getType(),collection_id:"collection"===g?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})})):a()(Y.Z,{disabled:!0,icon:c,title:void 0,isEmptyPage:t.isEmptyPage(),size:d?24:20,pageIconStyle:S.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var q=o(5210);function X(e){window.__c={n:"OutlinerItemLeftToggleButton"};const{store:t,outlinerItemStore:o,targetStore:i,type:r,itemIndex:n,itemDepth:s}=e,d=(0,l.O7)(),{isMobile:c}=d.device,m=(0,u.VK)((()=>o.state.open),[o]),g=(0,u.VK)((()=>{if((0,K.ku)()){const e=Boolean(null==i?void 0:i.isCollectionView()),o=y.Yz(t).length>0;return e||o}return!0}),[t,i]),S=(0,p.yK)((e=>({hiddenToggle:{width:(0,q.q)({isMobile:c,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[c]);if(!g)return a()("div",{style:S.hiddenToggle});return a()(q.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:Boolean(m),color:S.toggle.color,onClick:()=>{const e=0===s,i=E.VP(t);Z.t8_(d,{teamStore:i,type:e?"top_level":"nested",is_toggled:!m,outliner_type:r,outliner_position:n,outliner_depth:s}),y.Ps({store:t,toggleStore:o,toOpen:!m,environment:d,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var ee=o(56666),te=o(75071),oe=o(6404),ie=o(24677),re=o(74647),ne=o(33929),ae=o(87279),se=o(98742),le=o(75024),de=o(34583),ce=o(64921),ue=o(52275),pe=o(31945),me=o(78140),ge=o(32163),Se=o(40721),he=o(72495);const ye=(0,W.defineMessages)({addAPageInside:{defaultMessage:"Quickly add a page inside",id:"sidebarItem.addAPageInside.tooltip"}});function be(e){window.__c={n:"OutlinerItemRightIcons"};const{store:t,outlinerItemStore:o,canEditItem:i,itemDepth:r}=e,{isMobile:n}=(0,l.Fy)(),s=(0,u.VK)((()=>n||o.state.hovered||o.state.focused),[n,o]),d=(0,u.VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),r=null===(e=t.getCollectionViewCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&i&&!o&&!r)}),[t,i]),c=(0,p.yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...s?{}:{...le.jy,display:"block"}}})),[s]);return a()("div",{style:c.iconContainer},void 0,a()(Ie,{store:t,type:e.type,itemIndex:e.itemIndex,itemDepth:r}),d&&a()(ve,{store:t,outlinerItemStore:o,isTopLevelItem:0===r}))}function ve(e){window.__c={n:"AddPageButton"};const{store:t,outlinerItemStore:o,isTopLevelItem:i}=e,r=(0,l.O7)(),{isMobile:n}=r.device,s=(0,u.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),d=ne.default.formatMessage(ye.addAPageInside);return s.length<=1?a()(Q.Z,{renderTooltip:()=>d,placement:Q.Z.Placement.Bottom,render:e=>{const n={...e,onClick:()=>{we({store:t,outlinerItemStore:o,sourceStore:s[0]??t,shouldNavigateToSource:!1,environment:r,isTopLevelItem:i})}};return a()(fe,{events:n})}}):a()(Q.Z,{renderTooltip:()=>d,placement:Q.Z.Placement.Bottom,render:e=>a()(pe.ZP,{popupType:n?pe.Z4.SlideUp:pe.Z4.Popup,renderOrigin:t=>a()(fe,{events:(0,se.Z)(e,t)}),render:e=>a()(Te,{store:t,outlinerItemStore:o,parent:e,isTopLevelItem:i})})})}function fe(e){window.__c={n:"AddPageButtonInternal"};const{isMobile:t}=(0,l.Fy)(),o=Ce();return s.createElement(ce.Z,r()({ariaLabel:ne.default.formatMessage(ye.addAPageInside),mobileFeedback:t,style:o.button},e.events),(0,te.f)(o.buttonIcon))}function Te(e){window.__c={n:"AddToCollectionViewMenu"};const{store:t,outlinerItemStore:o,parent:i,isTopLevelItem:n}=e,d=(0,l.O7)(),{isMobile:c}=d.device,m=(0,u.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),g=(0,p.yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),S={menuType:c?ae.og.Modal:ae.og.Popup,right:c?a()(Se.DoneMenuText,{}):void 0},h={key:"collections",render:e=>s.createElement(he.Z,r()({},e,{title:a()(W.FormattedMessage,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})})),items:m.map((e=>({key:e.id,render:t=>s.createElement(ue.Z,r()({},t,{title:a()("div",{style:g.menuItem},void 0,a()(j.Z,{store:e})),icon:a()(Y.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})})),action:()=>{we({store:e,outlinerItemStore:o,sourceStore:e,shouldNavigateToSource:!0,environment:d,isTopLevelItem:n})}})))};return s.createElement(me.Z,S,a()(ge.Z,{type:ge.i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[h]}))}function Ie(e){window.__c={n:"MenuButton"};const{store:t,type:o,itemDepth:i,itemIndex:n}=e,d=(0,W.useIntl)(),c=(0,l.O7)(),{isMobile:u}=c.device,p=Ce(),m=e=>{const r=E.VP(t);ie.Ys({environment:c,store:t}),oe.Qn({environment:c,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:r,type:0===i?"top_level":"nested",outliner_type:o,outliner_position:n,outliner_depth:i}})},g="bookmarks"===o?d.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):d.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return a()(Q.Z,{renderTooltip:()=>g,placement:Q.Z.Placement.Bottom,render:e=>s.createElement(ce.Z,r()({ariaLabel:g,mobileFeedback:u,style:p.button,onClick:m},e),(0,ee.o)(p.buttonIcon))})}function we(e){const{store:t,outlinerItemStore:o,sourceStore:i,shouldNavigateToSource:r,environment:n,isTopLevelItem:a}=e;de.M_(n)&&(n.device.isMobile&&re.close(),J.createAndCommit({userAction:"OutlinerItem.createdPage",environment:n,perform:e=>S.D0({environment:n,store:i,transaction:e,navigateToParent:r})}),t.isCollectionView()||y.Ps({store:t,toggleStore:o,toOpen:!0,environment:n,isTopLevelItem:a}))}function Ce(){const e=(0,l.O7)().device.isMobile;return(0,p.yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:3,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.sidebarTextColor,width:14}})),[e])}function Me(e){window.__c={n:"BlockSidebarItem"};const{store:t,outlinerItemStore:o,style:i,targetStore:n,itemDepth:d,type:c,nestedOutlinerAriaId:m,titleAriaId:g}=e,S=(0,l.O7)(),h=S.device.isMobile,b=(0,u.VK)((()=>"copy_indicator"===t.getType()),[t]),v=(0,u.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,y.N)(o);if(t.isNavigableBlock())return(0,_.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=E.Dg(t);if(e)return(0,_.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:n,type:c})),[n,c]),f=(0,u.VK)((()=>b&&H.transactionQueue.isPendingTransactionForRecord(t.pointer)),[b,t]),T=(0,u.VK)((()=>{const{mainEditorCurrentBlockStore:e}=R.default.state;return e&&t.id===e.id}),[t]),I=(0,u.VK)((()=>o.state.open),[o]),w=(0,u.VK)((()=>(0,V.H)()),[]),C=(0,p.yK)((e=>({sidebarItem:{...!h&&{paddingLeft:5},...T&&{fontWeight:x.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...h&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},...(0,A.Z3)({isMobile:h}),...i},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:h?10:6,marginRight:h?12:void 0},link:{width:"100%"}})),[h,T,i]),M={role:"treeitem","aria-current":T?"page":void 0,"aria-expanded":!!I,"aria-owns":m,"aria-labelledby":g};if(b)return f?a()(U.Z,{style:C.sidebarItem,childrenStyle:C.children,onFocus:Pe(o),onBlur:ke(o),onMouseMove:xe(o),onMouseLeave:Ze(o)},void 0,a()(z.Z,{style:C.loadingSpinner}),a()(F.Z,{targetRecordId:t.id,style:C.moveOrDuplicateProgress})):null;if(v){const i=()=>{e.onNavigate&&e.onNavigate(t),w&&L.qQ({environment:S,open:!1});const o=E.VP(t);Z.Yg1(S,{teamStore:o,type:0===d?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:d})};return s.createElement(N.Z,r()({onFocus:Pe(o),onBlur:ke(o),style:C.link,href:v,onClick:i,innerStyle:(0,A.G$)({isMobile:h})},M),s.createElement(Be,r()({},e,{sidebarItemStyle:C.sidebarItem,sidebarItemChildrenStyle:C.children,titleAriaId:g,nestedOutlinerAriaId:m})))}return s.createElement(Be,r()({},e,{onFocus:Pe(o),onBlur:ke(o),sidebarItemStyle:C.sidebarItem,sidebarItemChildrenStyle:C.children,titleAriaId:g,nestedOutlinerAriaId:m},M))}function Be(e){window.__c={n:"SidebarItemContainer"};const{store:t,parentStore:o,outlinerItemStore:i,targetStore:r,itemDepth:n,type:s,onFocus:l,onBlur:d,titleAriaId:c,nestedOutlinerAriaId:p}=e,g=(0,u.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:r}=e;if(t.isDefined()&&(0,O.h7)(t))return!1;if(t.isCollectionView()&&!(0,K.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(C.G.createChildStore(o,{table:k.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===m.Ti.alias)return!0;if(i&&"team"!==r)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===n,type:s})),[t,o,n,s]);return a()(U.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:a()(X,{store:t,outlinerItemStore:i,targetStore:r,type:s,itemIndex:e.itemIndex,itemDepth:n,"aria-controls":p,"aria-describedby":c}),icon:r&&a()($,{targetStore:r,canEditItem:e.canEditItem}),right:a()(be,{store:t,outlinerItemStore:i,type:s,itemIndex:e.itemIndex,itemDepth:n,canEditItem:e.canEditItem}),onFocus:l,onBlur:d,onMouseMove:xe(i),onMouseLeave:Ze(i),isAlias:g},void 0,a()(j.Z,{id:c,store:t}))}function Pe(e){return t=>{const o=t.target;o instanceof HTMLElement&&(0,P.E)(o)&&e.update((e=>({...e,focused:!0})))}}function ke(e){return t=>{e.update((e=>({...e,focused:!1})))}}function xe(e){return t=>{D.Z.state.isDragging||e.update((e=>({...e,hovered:!0})))}}function Ze(e){return t=>{e.update((e=>({...e,hovered:!1})))}}var Le=o(12534),Oe=o(45669),_e=o(22735);function Ve(e){window.__c={n:"CollectionViewOutlinerItem"};const{store:t,collectionViewStore:o,onNavigate:i,type:r}=e,n=(0,l.O7)(),s=(0,u.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),d=(0,u.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=R.default.state;return!s&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,s]),c=(0,p.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...d&&{fontWeight:x.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...n.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[n.device.isMobile,d,e.style]),m=(0,u.VK)((()=>(0,_.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,y.N)(r)})),[o.id,t,r]),g=(0,u.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),S=(0,u.VK)((()=>{if("page"!==g.type||!g.pagePointer)return null;const e=C.G.createChildStore(t,{table:g.pagePointer.table,id:g.pagePointer.id}),o=(0,y.Q2)(e);return{pageStore:e,ready:(0,v.b)(e),outlinerItems:o}}),[g,t]);if(!g.ready)return null;if("page"===g.type&&S){const{ready:o,outlinerItems:i}=S;return a()(_e.Z,{type:e.type,childStores:i,areChildrenLoading:!o,itemDepth:e.itemDepth+1,parentStore:t.getContentStore(),itemStyle:c.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return s?null:a()(N.Z,{href:m,style:{width:"100%"},innerStyle:(0,A.G$)({isMobile:n.device.isMobile}),onClick:()=>{i&&i(t)},role:"treeitem","aria-current":d?"step":void 0},void 0,a()(U.Z,{icon:a()("div",{style:c.initialIcon},void 0,"•"),style:c.sideBarItem},void 0,a()(Oe.Z,{collectionViewName:g.name,collectionViewType:g.type??"table"})))}function Ae(e){window.__c={n:"CollectionViewOutliner"};const{store:t}=e,o=(0,u.VK)((()=>t.getCollectionViewStores()),[t]);return a()("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,Le.ZP)({event:e,context:Le.Af.EditorContextMenu,callback:()=>{}})}},void 0,o.map((o=>a()(Ve,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id))))}function Ee(e){window.__c={n:"NestedOutliner"};const{disabled:t,store:o,style:i,targetStore:r,itemDepth:n,nestedOutlinerAriaId:s,titleAriaId:d}=e,{isMobile:c}=(0,l.Fy)(),m=(0,u.VK)((()=>!(0,v.b)(o)),[o]),g=(0,u.VK)((()=>r.isCollectionView()?r:null),[r]),S=(0,u.VK)((()=>(0,y.Yz)(o)),[o]),h=(0,p.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:c?De:5,t=c?He:14;return{item:{...i,paddingLeft:e+t}}}),[i,c]);return g?a()(Ae,{store:g,itemStyle:h.item,onNavigate:e.onNavigate,type:e.type,childStores:S,areChildrenLoading:!1,itemDepth:n+1,parentStore:r.getContentStore(),itemToggleStyle:e.toggleStyle,disabled:t,id:s,"aria-labelledby":d}):a()(_e.Z,{type:e.type,childStores:S,areChildrenLoading:m,itemDepth:n+1,parentStore:r.getContentStore(),itemStyle:h.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:s,"aria-labelledby":d})}function Ke(e){return`Outliner-${e.id}`}function Fe(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const r=t.getRecordStoreUIParent();null!=r&&r.valueIs(M.i)&&S.A5({...e,type:o,targetStore:t,targetParentStore:r,isTopLevelItem:i})}}function Re(e){let{environment:t,store:o,parentStore:i,type:r,isTopLevelItem:n}=e;return async e=>{const{droppedDirection:a,droppedStores:s,duplicate:l}=e;i&&await S.v9({environment:t,type:r,targetParentStore:i,targetStore:o,isTopLevelItem:n,droppedDirection:a,droppedStores:s,duplicate:l})}}const De=6,He=22,Ne=function(e){window.__c={n:"OutlinerItem"};const{store:t,itemIndex:o,parentStore:i,type:n,itemDepth:p,disabled:y}=e,v=(0,l.O7)(),T=(0,d.l)(),I=(0,u.qz)(void 0,w),M=(0,s.useId)(),P=(0,s.useId)(),k=(0,u.VK)((()=>function(e){if(e.getType()===m.Ti.alias){const t=e.getAliasTargetStore();return t instanceof C.G?t:void 0}return e}(t)),[t]),x=(0,u.VK)((()=>b.Bb(t)),[t]),Z=(0,u.VK)((()=>!y&&(0,h.J5)({environment:v,blocks:[t],publicEditMode:T&&T.publicEditModeStore.state})),[y,T,v,t]),L=(0,u.VK)((()=>Z&&!t.isLinkedCollectionView()),[t,Z]),O=(0,u.VK)((()=>I.state.open),[I]),_=function(e){return 0===e}(p);(0,s.useEffect)((()=>{if(_){const e=g.Z.get({userId:v.currentUser.id,key:Ke(t)});I.update((t=>({...t,open:e})))}}),[]);const V=(0,s.useRef)(null);(0,c.c)(f.Z,(()=>({store:t,parentStore:i,type:n,isTopLevelItem:_,getNode:()=>V.current})),[t,i,n,_]);const A=x&&i?{onInsertBelow:e=>S.LR({...e,environment:v,store:t,parentStore:i,before:!0,type:n}),onInsertAbove:e=>S.LR({...e,environment:v,store:t,parentStore:i,before:!1,type:n})}:{},E=0===o;return k?s.createElement(B.Z,r()({analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:x,canDropAbove:E,canDropBelow:x,canDropOnto:L,canInsertBelow:x,canInsertAbove:x,canSelect:x,canTriggerContextMenu:!0,onRemove:Fe({store:t,type:n,isTopLevelItem:_}),onSelectableDrop:Re({environment:v,store:t,parentStore:i,type:n,isTopLevelItem:_}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t},A,{ref:V}),a()(Me,{store:t,outlinerItemStore:I,style:e.style,parentStore:i,type:n,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:k,canEditItem:Z,nestedOutlinerAriaId:M,titleAriaId:P}),O&&s.createElement(Ee,r()({},e,{targetStore:k,nestedOutlinerAriaId:M,titleAriaId:P}))):null}},14360:(e,t,o)=>{o.d(t,{O:()=>M});var i=o(23174),r=o.n(i),n=o(67294),a=o(480),s=o(86628),l=o(29369),d=o(5366),c=o(80444),u=o(70704),p=o(4252),m=o(14254),g=o(10434),S=o.n(g),h=o(24405),y=o(75071),b=o(14720),v=o(64921),f=o(31945),T=o(68785),I=o(14694);function w(e){let{teamStore:t}=e;window.__c={n:"TeamOutlinerEmptyState"};const o=(0,a.Fy)(),i=(0,s.VK)((()=>t.canAddOrRemoveTopLevelPages()),[t]),[l,c]=(0,n.useState)(void 0),u=(0,h.yK)((e=>({emptyPlaceholder:{color:e.lightTextColor,paddingLeft:12,...!o.isMobile&&{fontSize:14},...o.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPage:{color:e.mediumTextColor,borderRadius:3},addPageButton:{borderRadius:3,marginLeft:4,marginRight:4},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},addPageIcon:{fill:e.mediumIconColor,width:16,height:16}})),[o]);return i?r()(f.ZP,{popupType:f.Z4.Popup,alignmentToOrigin:f.vR.Start,originGap:2,originRect:l,renderOrigin:e=>n.createElement(v.Z,S()({mobileFeedback:o.isMobile,style:u.addPageButton},e,{onClick:t=>{c(new DOMRect(t.clientX,t.clientY)),e.onClick(t)}}),r()(I.Z,{style:u.addPage,disableMobileBorder:!0,left:r()("div",{style:u.addPageIconContainer},void 0,(0,y.f)(u.addPageIcon))},void 0,r()(d.FormattedMessage,{id:"teamOutliner.addPage",defaultMessage:"Add a page"}))),render:e=>r()(b.p7,{renderLoading:e=>r()("div",{style:b.Ry.LazyTeamAddAppTemplateMenu},void 0,e&&r()(T.Z,{})),teamStore:t,closePopup:e.close,from:"sidebar_team_empty_new_page"})}):r()(I.Z,{disableMobileBorder:!0},void 0,r()("div",{style:u.emptyPlaceholder},void 0,r()("span",{},void 0,r()(d.FormattedMessage,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"}))))}var C=o(97986);function M(e){let{teamStore:t,sidebarState:o,isLastTeam:i,initialToggleState:g,shouldPersistToggleState:S,customToggleStore:h,teamOutlinerType:y,onNavigate:b,onTeamJoinComplete:v}=e;window.__c={n:"TeamOutliner"};const{currentSpaceStore:f,currentSpaceViewStore:T,currentUserSettingsStore:I}=(0,s.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=c.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),M=(0,s.qz)(void 0,u.Z),B=h??M,P=(0,s.VK)((()=>t.getTeamPagesStores()),[t]),k=(0,a.Fy)(),x=(0,s.VK)((()=>{const e=c.default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===l.e0&&(null==e?void 0:e.getParentId())===t.id&&!k.isMobile&&B.state.isHidden}),[k.isMobile,t.id,B]);return f&&T&&I?r()(p.Z,{type:"team",customToggleButtonStore:B,forceHoveredButtonStyle:x,initialToggleState:g,shouldPersistToggleState:S,teamHeaderLabel:r()(m.o,{teamStore:t,withSelectedStyle:x}),teamStore:t,spaceStore:f,spaceViewStore:T,showAddButton:!1,isLastTeam:i,teamOutlinerType:y,labelTooltip:r()(d.FormattedMessage,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),onTeamJoinComplete:v,marginBottomOverrideWhenExpanded:k.isMobile?0:16,marginBottomOverrideWhenCollapsed:k.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:i,contentsAriaId:a}=e;if(!t)return;const s=new Set(P.map((e=>e.id)));return n.createElement(n.Fragment,null,r()(C.r,{state:{type:"team",teamSectionType:y,teamStore:t},sidebarState:o,onNavigate:b,additionalOutlinerProps:{id:a,"aria-labelledby":i}}),0===s.size&&r()(w,{teamStore:t}))}}):null}},97986:(e,t,o)=>{o.d(t,{r:()=>y});var i=o(10434),r=o.n(i),n=o(67294),a=o(480),s=o(86628),l=o(24405),d=o(97880),c=o(35683),u=o(35026),p=o(80444),m=o(61738),g=o(99757),S=o(22735),h=o(48505);function y(e){window.__c={n:"TopLevelSidebarOutliner"};const{state:t,sidebarState:o,onNavigate:i,additionalOutlinerProps:y,id:b,isHeaderless:v}=e,f=(0,s.VK)((()=>p.default.state.currentSpaceStore),[]),T=(0,s.VK)((()=>p.default.state.currentSpaceViewStore),[]),I=(0,a.O7)(),w=(0,a.Fy)().isMobile,C=(0,s.VK)((()=>!g.n.state),[]),M=(0,s.VK)((()=>(null==f?void 0:f.canEdit())&&C),[f,C]),B=(0,s.VK)((()=>t),[t]),P=(0,s.VK)((()=>{if(T)return(0,u.EE)({currentSpaceViewStore:T,typeWithTeam:B,environment:I,sidebarState:o})}),[T,I,o,B]),k=(0,s.VK)((()=>{if(T&&f)return(0,u.P4)({currentSpaceStore:f,currentSpaceViewStore:T,typeWithTeam:B})}),[f,T,B]),x=(0,n.useCallback)((e=>{switch(B.type){case"bookmarks":m.Z.recordVisit({id:e.id,blockType:e.getType(),type:c.vu.Favorite,currentUserId:I.currentUser.id});break;case"team":case"workspace":case"shared":m.Z.recordVisit({id:e.id,blockType:e.getType(),type:c.vu.Link,currentUserId:I.currentUser.id});break;case"private":break;default:(0,d.t1)(B)}null==i||i()}),[I.currentUser.id,i,B]),Z=(0,l.yK)((()=>({outliner:{display:"block"},outlinerItem:{...w&&"team"===B.type?{paddingLeft:h.gZ+h.aZ}:void 0}})),[w,B.type]);return f&&T&&P?n.createElement(S.Z,r()({type:B.type,disabled:!M,itemDepth:0,childStores:P,parentStore:k,style:Z.outliner,itemStyle:Z.outlinerItem,onNavigate:x,id:b,"aria-labelledby":e["aria-labelledby"],isHeaderless:v},y)):null}},14720:(e,t,o)=>{o.d(t,{Aj:()=>s,Rv:()=>n,Ry:()=>d,p7:()=>l,tn:()=>r,vs:()=>a});var i=o(77907);const r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionOnboardingHighlightPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},30278:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(49085);class r extends i.default{getInitialState(){return{contacts:!1}}}const n=r}}]);