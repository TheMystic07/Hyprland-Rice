"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1909,7994],{27386:(e,t,i)=>{i.d(t,{Z:()=>p,k:()=>c});var a=i(23174),o=i.n(a),n=(i(67294),i(83355)),s=i(34859),r=i(91754),l=i(61519),d=i(53336);function c(e){return e?18:60}class u extends n.Z{static renderDivider(){return o()(l.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:a,controlRowPaddingTopBottom:n=16}=this.props,l=()=>e.isMobile?18:36;return this.props.disableScroller?o()("div",{style:{paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile)}},void 0,o()("div",{style:{paddingTop:l(),paddingBottom:l()}},void 0,t),i&&o()("div",{style:{paddingTop:n,paddingBottom:n,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i)):o()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,a&&o()(r.Z,{styleKey:r.v.Blue,isMobile:!1},void 0,a),o()(d.Z,{type:s.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:a?15:l(),paddingBottom:a?22:l()}},void 0,t),i&&o()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:n,paddingBottom:n,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i))}}u.displayName="SettingBox";const p=u},55422:(e,t,i)=>{i.d(t,{Z:()=>O});var a=i(10434),o=i.n(a),n=i(23174),s=i.n(n),r=(i(57658),i(67294)),l=i(480),d=i(86628),c=i(24405),u=i(36591),p=i(42853),g=i(97880),m=i(5366),f=i(61045),h=i(1865),b=i(11368),y=i(87279),v=i(23570),M=i(52275),C=i(31945),T=i(78140),w=i(28992),Z=i(32163),S=i(63296),k=i(89728),B=i(72495),P=i(24006),x=i(26388),U=i(64369),A=i(91718),I=i(27386),N=i(23189);function O(e){window.__c={n:"SettingsItem"};const{title:t,caption:i,captionStyle:a,isMobile:o,upsellOptions:n,type:u,shouldHighlight:p}=e,g=(0,l.O7)(),{paddingLeftCSS:m,paddingRightCSS:y}=(0,d.VK)((()=>g.WindowSizeStore.state),[g]),[M,C]=(0,r.useState)(!1),T=(0,r.useCallback)((()=>C(!0)),[C]),w=(0,r.useCallback)((()=>C(!1)),[C]),Z=(0,r.useContext)(b.Ue),S=(0,r.useRef)(null);(0,r.useEffect)((()=>{p&&S.current&&f.bx({element:S.current,scrollers:{verticalScroller:null==Z?void 0:Z.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[p,S,null==Z?void 0:Z.verticalScroller]);const k=(0,r.useMemo)((()=>{if(o){if("dropdown"===u)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[o,u,e]),B=(0,c.yK)((t=>({container:{...k,paddingLeft:o?m:void 0,paddingRight:o?y:void 0,cursor:M&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...p?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,I.k)(o),marginRight:-1*(0,I.k)(o),paddingLeft:(0,I.k)(o),paddingRight:(0,I.k)(o),marginTop:-1*(0,v.f)(o)/2,marginBottom:-1*(0,v.f)(o)/2,paddingTop:(0,v.f)(o)/2,paddingBottom:(0,v.f)(o)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%"},captionStyle:{...a},title:{display:"flex",flexDirection:"row"}})),[o,m,y,p,M,a,e.disabled,k]),P="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,O=r.createElement("div",{ref:S,style:B.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return n&&n.shouldUpsell?h.y(g,{from:n.analyticsName,for:n.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&r.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:P?T:void 0,onMouseLeave:P?w:void 0},s()("div",{style:B.description},void 0,s()(N.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical},void 0,s()("div",{style:B.title},void 0,t,e.badge),n&&n.shouldUpsell&&s()(A.Z,{subscriptionTier:n.subscriptionTier,analyticsName:n.analyticsName,onClick:()=>h.y(g,{from:n.analyticsName,for:n.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})),s()(U.Z,{style:B.captionStyle,isSmall:!0,isMultiline:!0},void 0,i)),r.createElement(R,e));return e.tooltipLabel?s()(x.Z,{placement:x.Z.Placement.Bottom,alignment:x.Z.Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>r.createElement("div",e,O)}):O}function R(e){return"toggle"===e.type?s()(P.Z,{on:e.isOn,disabled:e.disabled}):"dropdown"===e.type?r.createElement(F,e):"custom"===e.type?r.createElement(r.Fragment,null,e.customButton):"toggleToButton"===e.type?e.isOn?s()("div",{style:{marginTop:12}},void 0,s()(S.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled},void 0,e.buttonLabel)):s()(P.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,g.t1)(e)}function F(e){var t;window.__c={n:"Dropdown"};const{isMobile:i,title:a,upsellOptions:n,currentOption:l,options:d,info:g,onSelectOption:f,menuStyle:h}=e,b=null===(t=d.find((e=>{let{key:t}=e;return t===l})))||void 0===t?void 0:t.label,v=(0,c.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:i?"auto":void 0,paddingLeft:i?12:8,paddingRight:i?12:8,height:i?44:28,border:i?`1px solid ${e.outlineButtonBorder}`:void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[i]),S=Boolean(n&&n.shouldUpsell)||e.disabled;return s()(C.ZP,{popupType:i?C.Z4.SlideUp:C.Z4.Popup,placementToOrigin:C.pO.Right,renderOrigin:e=>r.createElement(k.Z,o()({},e,{isLarge:!0,style:{...v.button,opacity:S?.4:1},disabled:S}),b,(0,p.i)(v.icon)),render:e=>{let t;t=i?{menuType:y.og.Modal,title:a,right:s()(m.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:y.og.Popup,width:250,...h};const n=[{key:"settings-item-section",render:e=>r.createElement(B.Z,e),items:d.map((t=>{let{key:a,label:n,caption:l}=t;return{key:a,action:()=>{f(a),e.close()},render:e=>r.createElement(M.Z,o()({},e,{title:n,caption:l,shouldWrapCaption:!0,right:b===n?s()("div",{style:{width:i?16:14}},void 0,(0,u.e)()):void 0}))}}))}];if(g){const e=g.map((e=>{let{key:t,label:i}=e;return{key:t,action:()=>{},render:e=>r.createElement(w.Z,o()({},e,{shouldWrapCaption:!0,caption:i}))}}));n.push({key:"info-item-section",render:e=>r.createElement(B.Z,o()({},e,{topBorder:!0})),items:e})}return r.createElement(T.Z,t,s()(Z.Z,{type:Z.i.Vertical,sections:n,initialFocus:void 0}))}})}},64536:(e,t,i)=>{i.r(t),i.d(t,{PageAnalyticsPageOptOut:()=>U,TopbarPageAnalyticsOptOutMenu:()=>x,TopbarPageAnalyticsOptOutMenuStore:()=>P,pageAnalyticsMenu:()=>B});var a=i(23174),o=i.n(a),n=i(67294),s=i(480),r=i(86628),l=i(49085),d=i(83176),c=i(18442),u=i(5366),p=i(62967),g=i(74647),m=i(97627),f=i(19037),h=i(18514),b=i(80444),y=i(7011),v=i(73420),M=i(53437),C=i(72495),T=i(42402),w=i(55422),Z=i(60526);const S=(0,u.defineMessages)({pageAnalyticsName:{id:"action.pageAnalytics.name",defaultMessage:"Page analytics"},viewAnalyticsName:{id:"action.viewAnalytics.name",defaultMessage:"View analytics"},privacySettingsName:{id:"action.privacySettings.name",defaultMessage:"Privacy settings"}}),k=e=>{const t=e.blocks[0];if(!t)return!1;return(0,Z.W2)({canEditPage:t.canEdit(),device:e.environment.device})},B=(0,p.MV)({key:"page analytics menu",displayName:S.pageAnalyticsName,analyticsName:S.pageAnalyticsName.defaultMessage,validators:[f.DF],svg:d.z,subActions:e=>[{key:"view analytics",render:e=>n.createElement(C.Z,e),actions:[(0,p.cN)({key:"view analytics",displayName:S.viewAnalyticsName,analyticsName:S.viewAnalyticsName.defaultMessage,svg:d.z,validators:[k],closeParentMenu:!0,action:()=>{g.handleSidebarButtonClick(e.environment,e.blocks[0],y.gY.Updates,"more_menu"),y.ZP.setState({...y.ZP.state,currentSubTab:y.uF.Analytics})}}),(0,p.cN)({key:"privacy settings",displayName:S.privacySettingsName,analyticsName:S.privacySettingsName.defaultMessage,svg:c.H,validators:[],closeParentMenu:!0,action:e=>{P.setState({isOpen:!0,rect:e.originRect})}})]}]}),P=l.default.createValue({isOpen:!1,rect:void 0}),x=()=>{window.__c={n:"TopbarPageAnalyticsOptOutMenu"};const e=(0,s.O7)(),t=(0,r.VK)((()=>P.state.isOpen),[]),i=(0,r.VK)((()=>P.state.rect),[]),a=(0,r.VK)((()=>b.default.state.mainEditorCurrentBlockStore),[]);return a?o()(M.ZP,{popupType:e.device.isMobile?M.ZP.PopupType.SlideUp:M.ZP.PopupType.Popup,alignmentToOrigin:M.ZP.Alignment.Center,open:t,render:()=>o()("div",{style:{minWidth:360,padding:16}},void 0,o()(v.sg,{gap:16},void 0,o()("div",{style:{fontSize:16,fontWeight:500}},void 0,o()(u.FormattedMessage,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})),o()(U,{store:a}))),originRect:i,onDismiss:()=>P.setState({isOpen:!1,rect:void 0})}):null};function U(e){window.__c={n:"PageAnalyticsPageOptOut"};const t=(0,s.O7)(),i=(0,r.VK)((()=>{const e=b.default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),a=(0,r.VK)((()=>{const t=null==i?void 0:i.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[i,e.store.id]);return o()(w.Z,{type:"dropdown",currentOption:a?"do_not_record":"record",options:[{key:"record",label:o()(u.FormattedMessage,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:o()(u.FormattedMessage,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:i=>{"do_not_record"===i?m.kY(t,e.store.id):m.pu(t,e.store.id)},isMobile:t.device.isMobile,title:o()(u.FormattedMessage,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:o()(u.FormattedMessage,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>o()(T.Z,{external:!0,href:(0,h.UY)("guides.pageAnalytics")},void 0,e)}}),captionStyle:{maxWidth:270}})}},26494:(e,t,i)=>{i.r(t),i.d(t,{default:()=>be});var a=i(10434),o=i.n(a),n=i(23174),s=i.n(n),r=i(67294),l=i(83355),d=i(49085),c=i(1464),u=i(98519),p=i(72126),g=i(29477),m=i(97880),f=i(5366),h=i(19719),b=i(17659),y=i(43250),v=i(87279),M=i(51811),C=i(5162),T=i(80444),w=i(4761),Z=i(84708),S=i(23063),k=i(36488),B=i(68785),P=i(78140),x=i(89728),U=i(43145),A=i(30506),I=i(33411),N=i(83785),O=i(82598),R=i(480),F=i(86628),_=i(24405),L=i(6637),E=i(73063),D=i(26388);function V(e){let{location:t}=e;window.__c={n:"InboxFilterForUnreadButton"};const i=(0,f.useIntl)(),a=(0,R.O7)(),{currentTab:n,showOnlyUnreadNotifications:l,isCurrentTabEmpty:d}=(0,F.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=w.ZP.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&w.ZP.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),c=(0,r.useCallback)((async()=>{if(l)w.ZP.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),h.U0(a,{toggled_to:"off"});else{const e=await b.Qy({environment:a});w.ZP.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),h.U0(a,{toggled_to:"on"})}}),[a,l]),u=(0,_.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:l?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!l&&{fill:e.regularTextColor}}})),[l]);if("mentions"!==n)return null;const p=!l&&d,g=s()(f.FormattedMessage,l?{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}:{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),y=l?i.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):i.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let v,M;switch(t){case"mobileTopBar":v=void 0,M=u.mobileTopBarIcon;break;case"webUpdatesModal":v=!!l||void 0,u.webUpdatesModalIcon;break;case"desktopInboxPanel":v=!!l||void 0,M=u.desktopInboxPanelIcon;break;default:(0,m.t1)(t)}return s()(D.Z,{disableTooltip:p,renderTooltip:()=>g,render:e=>r.createElement(E.Z,o()({icon:L.I,isBlue:l,hovered:v,iconStyle:M,disabled:p,onClick:c,ariaLabel:y},e))})}const K=r.memo(V);var H=i(82990),z=i(18514),W=i(76487),$=i(74523),Y=i(39849),G=i(66957),X=i(52867),j=i(5686),q=i(17652),Q=i(63296);function J(e){let{}=e;window.__c={n:"InboxMentionsActionButtons"};const t=(0,R.Fy)(),i=(0,R.O7)(),a=(0,F.VK)((()=>(0,q.H)()),[]),n=(0,F.VK)((()=>w.n_.state),[]),l=(0,F.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=w.ZP.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,containsUnreadNotifications:a,showOnlyUnreadNotifications:o}=w.ZP.state;return{containsBothReadAndUnreadNotifications:i,containsUnreadNotificationsAccordingToUpdatesStore:a,showOnlyUnreadNotifications:o}}),[]),d=(0,F.VK)((()=>W.Z.getUnreadCountForCurrentSpace().mentions>0),[]),c=(0,r.useCallback)((()=>{h.Xf(i),b.go(i)}),[i]),u=(0,r.useCallback)((()=>{if(!l)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=l;let a="none";t?a="unread":e&&(a="read"),h.zD(i,{readFilter:a}),b.rG(i,"mentions",a)}),[i,l]),p=(0,_.yK)((e=>{const i={opacity:1,flex:1,height:t.isMobile?32:27,...a&&{fontSize:14}};return{headerWithBottomBorder:{borderBottom:n?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:a&&!t.isMobile?0:12,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:i,buttonsWithLoweredOpacity:{...i,opacity:.7}}}),[t.isMobile,n,a]);if(!l)return null;const{containsBothReadAndUnreadNotifications:g,containsUnreadNotificationsAccordingToUpdatesStore:m,showOnlyUnreadNotifications:y}=l,v=m||d;return s()("div",{style:p.headerWithBottomBorder},void 0,s()("div",{style:p.container},void 0,s()(D.Z,{disableTooltip:v,renderTooltip:e=>r.createElement("div",e,s()(f.FormattedMessage,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})),render:e=>r.createElement(Q.Z,o()({onClick:c,style:v?p.buttons:p.buttonsWithLoweredOpacity,isSmall:!t.isMobile,disabled:!v,icon:a?j.J:void 0},e),s()(f.FormattedMessage,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"}))}),s()(Q.Z,{onClick:u,style:p.buttons,isSmall:!t.isMobile,icon:a?X.H:void 0},void 0,s()(f.FormattedMessage,y?{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}:g?{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}:{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"}))))}const ee=r.memo(J);var te=i(18442),ie=i(50906),ae=i(14786),oe=i(92083),ne=i(62820);function se(e){let{location:t}=e;window.__c={n:"InboxNotificationSettingsButton"};const i=(0,f.useIntl)(),a=(0,R.O7)(),n=(0,r.useCallback)((()=>{const{device:e}=a;ie.FRk(a),e.isMobile?ae.Z.setState({open:!0,source:ae.Y.Updates}):(ne.Z.setState({...ne.Z.state,open:!1}),(0,q.r)()?oe.Z.setState({...oe.Z.state,currentTab:"notifications",defaultSubtab:void 0}):oe.Z.setState({...oe.Z.state,currentTab:"notifications_and_settings",defaultSubtab:void 0}),oe.Z.setState({...oe.Z.state,open:!0}))}),[a]),l=(0,_.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{width:16,height:16}})),[]);let d;switch(t){case"mobileTopBar":d=l.mobileTopBarIcon;break;case"webUpdatesModal":d=l.webUpdatesModalIcon;break;default:(0,m.t1)(t)}return s()(D.Z,{renderTooltip:()=>s()(f.FormattedMessage,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>r.createElement(E.Z,o()({icon:te.H,iconStyle:d,onClick:n,ariaLabel:i.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"})},e))})}const re=r.memo(se);var le=i(79198);function de(e){let{location:t,onClick:i}=e;window.__c={n:"InboxRefreshAllTabButton"};const a=(0,f.useIntl)(),n=(0,F.VK)((()=>w.ZP.state.currentTab),[]),l=(0,_.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==n)return null;let d;switch(t){case"mobileTopBar":d=l.mobileTopBarIcon;break;case"webUpdatesModal":d=l.webUpdatesModalIcon;break;default:(0,m.t1)(t)}return s()(D.Z,{renderTooltip:()=>s()(f.FormattedMessage,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>r.createElement(E.Z,o()({icon:le.n,iconStyle:d,onClick:i,ariaLabel:a.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"})},e))})}const ce=r.memo(de);var ue=i(92955);function pe(e){let{orderedTabConfigs:t,onClickRefreshAllTab:i}=e;window.__c={n:"InboxModalHeader"};const a=(0,R.Fy)(),n=(0,R.O7)(),{currentTab:l,currentTabIndex:d}=(0,F.VK)((()=>{const{currentTab:e}=w.ZP.state,i=t.findIndex((t=>t.tab===e));return{currentTab:e,currentTabIndex:i}}),[t]),c=(0,r.useMemo)((()=>t.map(((e,t)=>{if(e.showSeparatorBefore)return t-1})).filter(m.$K)),[t]),u=(0,F.VK)((()=>W.Z.getUnreadCountForCurrentSpace().mentions>0),[]),p=(0,r.useCallback)((e=>{const i=t[e],a=null==i?void 0:i.tab;a&&l!==a&&b.G7({environment:n,newTab:a,shouldTrack:!0})}),[l,n,t]),g=(0,_.yK)((()=>({mentionsContainer:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:u?H.Z.fontWeight.medium:void 0},tabBarRightStyle:{justifyContent:"space-between"},helpButton:{marginLeft:0,...a.isMobile&&{marginTop:-1}},unreadMentionsBadge:{marginLeft:6},actionButtons:{display:"flex",justifyContent:"center",gap:6}})),[a.isMobile,u]),h=Y.Z.Color.Red,v={mentions:s()("div",{style:g.mentionsContainer,className:y.I2F},void 0,s()("div",{},void 0,s()(f.FormattedMessage,{defaultMessage:"Inbox",id:"updatesModal.mentionsTab.title"})),s()(ue.Z,{type:"currentSpace",color:h,style:g.unreadMentionsBadge})),allPages:s()("div",{className:y.gjL},void 0,s()(f.FormattedMessage,{defaultMessage:"All",id:"updatesModal.allUpdatesTab.title"})),archive:s()("div",{className:y.HKr},void 0,s()(f.FormattedMessage,{defaultMessage:"Archived",id:"updatesModal.archiveTab.title"}))},M=t.map((e=>v[e.tab])),C="webUpdatesModal",T=!a.isMobile&&s()("div",{style:g.actionButtons},void 0,s()(ce,{location:C,onClick:i}),s()(K,{location:C}),s()(re,{location:C})),Z=r.createElement(r.Fragment,null,s()(D.Z,{render:e=>r.createElement($.Z,o()({href:(0,z.UY)("guides.notifications"),analyticsFrom:"inbox_tabs_link",style:g.helpButton},e)),renderTooltip:()=>s()(f.FormattedMessage,{id:"updatesButton.learnMoreAboutInboxLink",defaultMessage:"Learn more about notifications"})}),T);return r.createElement(r.Fragment,null,s()(G.Z,{tabs:M,selectedIndex:d,onChange:p,separatorIndexes:c,right:Z,rightStyle:g.tabBarRightStyle}),"mentions"===l&&s()(ee,{}))}const ge=r.memo(pe);var me=i(59878);const fe=[{tab:"mentions"},{tab:"archive"},{tab:"allPages",showSeparatorBefore:!0}];class he extends l.Z{constructor(){super(...arguments),this.storeTypes={refreshCountStore:d.default.createClass(0)},this.loadingSpinner=()=>{if((0,C.Y)("supportsNativeHome"))return s()(I.Z,{show:void 0!==w.ZP.state.loadingId,showDelay:400,showHold:0,render:e=>s()(e?B.Z:"div",{style:{width:14}})})},this.handleCloseUpdatesPopup=()=>{h.nI(this.environment),b.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})},this.handleSwipeLeft=()=>{const e=fe.findIndex((e=>e.tab===w.ZP.state.currentTab)),t=fe[e+1].tab;void 0!==t&&b.G7({environment:this.environment,newTab:t,shouldTrack:!0})},this.handleSwipeRight=()=>{const e=fe.findIndex((e=>e.tab===w.ZP.state.currentTab)),t=fe[e-1].tab;void 0!==t&&b.G7({environment:this.environment,newTab:t,shouldTrack:!0})},this.handleRefreshAll=()=>{const{refreshCountStore:e}=this.stores;e.setState(e.state+1)},this.handleRefreshAllThrottled=p.Ds(this.handleRefreshAll,1e3,{leading:!0})}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e}=this.environment;let t;const i=s()(ge,{onClickRefreshAllTab:this.handleRefreshAllThrottled,orderedTabConfigs:fe});if(e.isMobile){const a="mobileTopBar";t={menuType:v.og.Modal,title:s()(f.FormattedMessage,{defaultMessage:"Updates",id:"updatesModal.mobileMenu.title"}),width:this.props.format===M.EX.RenderAsPage?"100vw":void 0,renderAsPage:this.props.format===M.EX.RenderAsPage,right:[s()(ce,{onClick:this.handleRefreshAllThrottled,location:a},"InboxRefreshAllTabButton"),s()(K,{location:a},"InboxFilterForUnreadButton"),s()("span",{style:{width:8}},"paddingSpan"),s()(re,{location:a},"InboxNotificationSettingsButton")],left:[this.loadingSpinner(),e.isPhone&&(0,C.Y)("supportsNativeHome")&&this.props.format===M.EX.RenderAsPage?void 0:(0,c.k)({fill:this.theme.regularTextColor,width:26,height:26})],onClickLeft:this.props.onClose,header:i,whiteBackground:!0}}else t={menuType:v.og.Popup,header:i,height:"auto"};return s()(A.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>r.createElement(P.Z,o()({},t,e,{className:y.C18}),s()(U.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;w.n_.setState(i<=0)}}),s()(k.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>this.props.format===M.EX.RenderAsPage?this.renderContentAsPageWithLazyLoader():this.renderContent()}))})}renderContent(){const e=w.ZP.state.currentTab;if("allPages"===e){const{currentSpaceStore:e,mainEditorCurrentBlockStore:t}=T.default.state;return e&&t?s()(Z.Z,{spaceId:e.id,empty:()=>s()(O.Z,{message:s()(f.FormattedMessage,{defaultMessage:"Updates on pages in your workspace will appear here.",id:"updatesModal.allPagesTab.emptyPrompt"}),title:s()(f.FormattedMessage,{defaultMessage:"No new updates",id:"updatesModal.allPagesTab.emptyPromptTitle"})}),source:"notifications_tab"},`all-pages-${this.stores.refreshCountStore.state}`):null}if("mentions"===e){const e=w.ZP.state.showOnlyUnreadNotifications;return s()(me.Z,{type:"mentions",empty:e?this.renderEmptyUnreadMentionsTab():s()(O.Z,{message:s()(f.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, requests, and page invites.",id:"updatesModal.spaceUpdatesTab.allArchivedRequests"}),title:s()(f.FormattedMessage,{defaultMessage:"You're all caught up",id:"updatesModal.spaceUpdatesTab.allArchivedTitle"})}),source:"notifications_tab",tab:"inbox"},"mentions")}if("archive"===e)return s()(me.Z,{type:"archive",empty:s()(O.Z,{message:s()(f.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"updatesModal.archiveTab.emptyPrompt"}),title:s()(f.FormattedMessage,{defaultMessage:"No archived updates",id:"updatesModal.archiveTab.emptyPromptTitle"})}),source:"notifications_tab",tab:"archive"},"archive");(0,m.t1)(e)}renderContentAsPageWithLazyLoader(){return s()(N.Z,{fetch:async()=>{await g.Vs(0),await T.default.waitUntil((()=>void 0!==T.default.state.currentSpaceStore))},loading:()=>s()(r.Fragment,{}),willRender:()=>{var e;null===(e=this.environment.mobileNative)||void 0===e||e.markTransitionReady({type:"updates"})},render:()=>s()(S.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},blockRenderQueueOnEnter:!0,render:()=>this.renderContent()})})}renderEmptyUnreadMentionsTab(){return s()(O.Z,{icon:u.k,title:s()(f.FormattedMessage,{defaultMessage:"You've read everything",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabTitle"}),message:s()("div",{},void 0,s()(f.FormattedMessage,{defaultMessage:"You have more notifications in your inbox.",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabMessage"}),s()("div",{style:{height:12}}),s()(x.Z,{isBlue:!0,onClick:()=>{"mentions"===w.ZP.state.currentTab&&w.ZP.setState({...w.ZP.state,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]})}},void 0,s()(f.FormattedMessage,{defaultMessage:"See all",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabButton"})))})}}he.displayName="UpdatesPopup",he.Format=M.EX;const be=he},67579:(e,t,i)=>{i.d(t,{f:()=>M});var a=i(10434),o=i.n(a),n=i(23174),s=i.n(n),r=i(67294),l=i(24405),d=i(69651),c=i(73123),u=i(33929),p=i(87279),g=i(33338),m=i(52275),f=i(78140),h=i(32163),b=i(53437),y=i(72495),v=i(91642);function M(e){window.__c={n:"DateFilter"};const t=(0,l.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:i,hideAllTime:a}=e,[n,M]=(0,r.useState)(!1),C=c.Hz.filter((e=>!a||"all_time"!==e)).map((t=>{const i=()=>{e.onChangeFilter(t),M(!1)};return{key:t,action:()=>{},render:()=>s()(m.Z,{focused:!1,onClick:i,title:u.default.formatMessage(c.Rh[t])})}})),T=s()(g.Z,{on:Boolean(i),wrapStyle:t.pillStyle,icon:(0,d.C)({width:16,marginRight:6,fill:"currentColor"}),title:u.default.formatMessage(c.Rh[i]),onClick:()=>{M(!0)}}),w=[{key:"filters",items:C,render:e=>r.createElement(y.Z,o()({},e,{title:null,loading:!1}))}],Z=s()(f.Z,{menuType:p.og.Popup,header:null},void 0,s()(h.Z,{type:h.i.Vertical,initialFocus:0,sections:w}));return s()(v.Z,{marginAfter:!1},void 0,s()(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:n,render:()=>Z,onDismiss:()=>M(!1),keepFocus:!0,origin:T,preventScaleTransition:!0,style:t.popup}))}},23570:(e,t,i)=>{function a(e){return e?32:18}i.d(t,{f:()=>a})},35314:(e,t,i)=>{i.d(t,{e:()=>s});var a=i(67294),o=i(86628),n=i(77794);function s(){const[e,t]=(0,a.useState)(0),[i]=(0,a.useState)((()=>new n.E)),s=(0,a.createRef)();return(0,a.useEffect)((()=>{s.current&&i.observe(s.current)}),[s,i]),(0,o.VK)((()=>{e!==i.rect.state.width&&t(i.rect.state.width)}),[e,i.rect]),[s,e]}},32856:(e,t,i)=>{i.d(t,{D:()=>n});var a=i(86628),o=i(77080);function n(e){window.__c={n:"ExperimentSwitch"};const{experimentId:t,groups:i,disableExposureLogging:n}=e;return i[function(e){const{experimentId:t,disableExposureLogging:i,defaultGroup:n}=e;return(0,a.VK)((()=>o.default.getEligibleGroup({experimentId:t,defaultGroup:n??"control",disableExposureLogging:i})),[t,i,n])}({experimentId:t,disableExposureLogging:n})]}},47054:(e,t,i)=>{i.d(t,{AD:()=>l});i(57658);var a=i(30120),o=i(59730),n=i(63143);function s(e){if(void 0===e)return a.ou.utc();const t={zone:"utc"};return"number"==typeof e?a.ou.fromMillis(e,t):a.ou.fromISO(e,t)}function r(e,t){const i=t?s(t):a.ou.utc(),n=s(e??function(e){const{days:t,endDate:i,startDate:n}=e;if(t<=0)throw new o.p8("Days must be greater than 0");const r=i?s(i):a.ou.utc();if(!r.isValid)throw new o.p8(`endDate ${i} is in an invalid format`);const l=n?s(n).toMillis():0,d=r.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:7,endDate:t}));if(!n.isValid)throw new o.p8(`startDate ${e} is in an invalid format`);if(!i.isValid)throw new o.p8(`endDate ${t} is in an invalid format`);if(n>i)throw new o.p8(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${i.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:i.toMillis()}}function l(e,t){const{startTimestamp:i,endTimestamp:a}=r(e,t),o=[];for(var l=i;l<=a;)o.push(s(l).toISODate()),l+=n.A0;return o}},83176:(e,t,i)=>{i.d(t,{z:()=>n});var a=i(23174),o=i.n(a);i(67294);const n=(0,i(45238).I)("analyticsSearch",{viewBox:"0 0 51 52",svg:o()("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},90792:(e,t,i)=>{i.d(t,{t:()=>n});var a=i(23174),o=i.n(a);i(67294);const n=(0,i(45238).I)("bell",{viewBox:"0 0 16 16",svg:o()("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},6637:(e,t,i)=>{i.d(t,{I:()=>n});var a=i(23174),o=i.n(a);i(67294);const n=(0,i(45238).I)("filterCircled",{viewBox:"0 0 16 16",svg:o()("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},79198:(e,t,i)=>{i.d(t,{n:()=>n});var a=i(23174),o=i.n(a);i(67294);const n=(0,i(45238).I)("refresh",{viewBox:"0 0 24 20",svg:o()("path",{d:"M0.19663 9.99023C-0.184229 10.5273-0.00844799 11.0059 0.694677 11.0059L2.04233 11.0059C2.56968 15.9766 6.85679 19.9219 11.9447 19.9219C14.9232 19.9219 17.6185 18.5645 19.4544 16.4551C19.8158 16.0352 19.7669 15.5078 19.3861 15.2344C19.0052 14.9609 18.5365 15.0586 18.224 15.4199C16.7103 17.168 14.4642 18.2617 11.9447 18.2617C7.68686 18.2617 4.22007 15.1074 3.72202 11.0059L5.1771 11.0059C5.87046 11.0059 6.04624 10.5273 5.67515 10L3.48765 6.88477C3.17515 6.43555 2.7064 6.42578 2.38413 6.88477ZM4.44468 3.4668C4.07358 3.88672 4.12241 4.4043 4.51304 4.67773C4.8939 4.95117 5.35288 4.86328 5.67515 4.50195C7.19858 2.76367 9.44468 1.66016 11.9447 1.66016C16.1927 1.66016 19.6595 4.81445 20.1673 8.92578L18.7123 8.92578C18.0189 8.92578 17.8431 9.39453 18.2142 9.93164L20.4017 13.0469C20.7142 13.4961 21.183 13.5059 21.5052 13.0469L23.683 9.94141C24.0736 9.39453 23.888 8.92578 23.1849 8.92578L21.847 8.92578C21.3099 3.95508 17.0326 0 11.9447 0C8.96616 0 6.28061 1.34766 4.44468 3.4668Z"})})}}]);