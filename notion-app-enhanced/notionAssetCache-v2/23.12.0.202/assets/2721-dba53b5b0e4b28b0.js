"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2721],{66653:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(23174),r=i.n(n),o=i(10434),s=i.n(o),a=i(67294),d=i(83355),l=i(40506),p=i(53877),u=i(84795),h=i(72126),c=i(97880),g=i(5366),v=i(17335),m=i(65496),y=i(67950),f=i(74194),S=i(68894),b=i(26388);class D extends d.Z{constructor(){super(...arguments),this.storeTypes={store:y.Z},this.renderInput=()=>{const{device:e}=this.environment,{store:t,hideClearButton:i,focused:n,value:r,...o}=this.props,d=e.isMobile&&"relative"!==(null==r?void 0:r.type)?"date":"text",l="date"===d?f.Z.Format.Transparent:f.Z.Format.Large,p=e.isMobile?void 0:n;return a.createElement(S.ZP,s()({},o,{type:d,format:l,left:this.renderMobilePlaceholder(d),showClearButton:this.showClearButton(),focus:p,onFocus:this.handleFocus,onClearButtonClick:this.handleClear,onChange:this.handleChange,onSubmit:this.handleSubmit,onBlur:this.handleBlur,value:this.getInputValue(),disableInput:"relative"===(null==r?void 0:r.type)},this.getInputStyles()))},this.handleFocus=e=>{const{onFocus:t}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!1}),t&&t(e)},this.handleClear=()=>{const{onClearButtonClick:e,onUpdate:t}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:"",error:void 0});const n=this.validateCurrent();n&&t(n),i.setState({...i.state,edited:!1}),e&&e()},this.handleChange=e=>{const{device:t}=this.environment,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:e.target.value||""}),t.isAndroid&&this.handleBlur()},this.handleSubmit=e=>{const{onUpdate:t,onSubmit:i}=this.props,{store:n}=this.stores,r=this.validateCurrent();r&&(t(r),r.error?n.setState({...n.state,edited:!1,error:r.error}):n.reset()),i&&i(e,r)},this.handleBlur=e=>{const{onUpdate:t,onBlur:i}=this.props,{store:n}=this.stores,r=this.validateCurrent();r?(t(r),r.error?n.setState({...n.state,edited:!1,error:r.error}):n.reset()):n.setState({...n.state,edited:!1}),e&&i&&i(e)},this.styles={menuItem:{marginBottom:this.environment.device.isMobile?1:8},inputWrapper:{borderRadius:3,height:28,paddingRight:this.showClearButton()?8:0,position:"relative"},inputEditRegion:{width:this.showClearButton()?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:this.environment.device.isIpad?26:12,top:this.environment.device.isIpad?void 0:"50%",transform:"translateY(-50%)"},tooltipOriginGap:-8}}didUpdate(e){const{store:t}=this.stores;h.Xy(e.value,this.props.value)||t.reset()}renderComponent(){const e=this.styles,t=this.getError();return t?r()(b.Z,{renderTooltip:()=>t,forceVisibleState:!0,placement:b.Z.Placement.Left,render:this.renderInput,originGap:e.tooltipOriginGap}):this.renderInput()}getDateFormat(){const{device:e}=this.environment;return e.isMobile?"YYYY-MM-DD":this.props.desktopDateFormat??l.sF}renderMobilePlaceholder(e){const{placeholder:t,value:i}=this.props,n=this.styles,o=this.getThemeColors();if("date"===e&&!i)return r()("div",{style:{...n.placeholder,...o.placeholder}},void 0,t)}getInputValue(){const{device:e}=this.environment,{value:t,intl:i}=this.props,{store:n}=this.stores;if(t&&"relative"===t.type)return(0,v.x)(t);const r=t&&"date"!==t.type?p.Id(t):t;return e.isMobile?r?m.p6(r,i,this.getDateFormat()):"":n.state.temporary||n.state.edited?n.state.temporary:r?m.p6(r,i,this.getDateFormat()):""}getError(){const{store:e}=this.stores,{intl:t}=this.props;if(e.state.error)switch(e.state.error){case y.B.INVALID_DATE:return t.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case y.B.INVALID_RANGE:return t.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,c.t1)(e.state.error)}}validateCurrent(){const{validate:e}=this.props,t=this.parseCurrentValue();if(t)return e?e(t):t}parseCurrentValue(){const{store:e}=this.stores;if(!e.state.edited)return;if(!e.state.temporary)return{value:void 0};const t=(0,u.parseDateValueWithInputFormat)(e.state.temporary,this.environment.device.isMobile?p.Iq:this.getDateFormat(),this.props.intl);return t?{value:{type:"date",start_date:t}}:{error:y.B.INVALID_DATE}}showClearButton(){const{device:e}=this.environment,{hideClearButton:t}=this.props;return!!e.isMobile||!t}getInputStyles(){const{device:e}=this.environment,{inputStyle:t,inputOuterStyle:i,style:n}=this.props,r=this.styles;return{style:{...r.menuItem,...n,marginRight:0},inputOuterStyle:{...this.getInputBorders(),...r.inputWrapper,...i},inputStyle:{...r.inputEditRegion,...e.isMobile&&r.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focused:t}=this.props,i=this.getThemeColors(),n=this.getError();if(!e)return n?i.inputError:t?i.inputFocused:i.inputDefault}getThemeColors(){return{inputDefault:{background:this.theme.inputBackground,boxShadow:this.theme.inputBoxShadow},inputFocused:{background:this.theme.inputBackground,boxShadow:this.theme.outlineBlueInputBoxShadow},inputError:{background:this.theme.inputBackground,boxShadow:this.theme.outlineRedInputBoxShadow},placeholder:{color:this.theme.lightTextColor}}}}D.displayName="DateInputMenuItem";const x=(0,g.injectIntl)(D)},41209:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(23174),r=i.n(n),o=i(10434),s=i.n(o),a=i(67294),d=i(480),l=i(76205),p=i(17335),u=i(33929),h=i(87279),c=i(52275),g=i(31945),v=i(78140),m=i(32163),y=i(53437),f=i(72495);function S(e){window.__c={n:"DateOrRangeFilterOperatorValueMenu"};const{filterValue:t,renderOrigin:i,buttonPopupStore:n}=e,o=(0,d.O7)(),S=e=>"relative"===e.filter.type&&"custom"===e.filter.value?u.default.formatMessage(p.HL[e.filter.value]):"date"===e.type?(0,p.x)(e.filter):(0,p.ip)(e.filter);return r()(g.ZP,{popupType:o.device.isMobile?y.kQ.SlideUp:y.kQ.Popup,buttonPopupStore:n,render:()=>{let i;i=o.device.isMobile?{menuType:h.og.ActionSheet}:{menuType:h.og.Popup};const d="date"===e.type?(()=>{const e=l.tO;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((i=>({key:"relative"===i.type?i.value:i.type,render:e=>a.createElement(c.Z,s()({},e,{title:S({type:"date",filter:i}),checkState:i.type===t.type&&(void 0===i.value||i.value===t.value)})),action:()=>{e.onUpdate(i),n.setState({open:!1})}}))):(()=>{const e=(0,l.v8)();return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((i=>({key:(0,l.eX)(i),render:e=>a.createElement(c.Z,s()({},e,{title:S({type:"daterange",filter:i}),checkState:i.type===t.type&&(void 0===i.value||i.value===t.value)})),action:()=>{e.onUpdate(i),n.setState({open:!1})}})));return a.createElement(v.Z,i,r()(m.Z,{type:m.i.Vertical,sections:[{key:"filterOperators",render:e=>a.createElement(f.Z,s()({disableMobilePadding:!0},e)),items:d}],initialFocus:void 0}))},renderOrigin:i,style:{width:240},originGap:2,placementToOrigin:g.pO.Bottom,alignmentToOrigin:g.vR.Center,disabled:e.disabled})}},83264:(e,t,i)=>{i.d(t,{Z:()=>F});var n=i(10434),r=i.n(n),o=i(23174),s=i.n(o),a=i(67294),d=i(83355),l=i(76205),p=i(53877),u=i(42875),h=i(97880),c=i(5366),g=i(28020),v=i(33929),m=i(87279),y=i(65496),f=i(67950),S=i(41558),b=i(78140),D=i(40721),x=i(72495),M=i(64369),k=i(66653),C=i(41209),w=i(46945),T=i(14390);const R=(0,c.defineMessages)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});class I extends d.Z{constructor(){super(...arguments),this.storeTypes={store:S.Z},this.renderInputs=()=>{const{value:e,relativeRangePopupStore:t,onUpdateRelativeFilter:i}=this.props;if(t&&i){const n="type"in e?e:{type:"exact",value:void 0};return s()(C.Z,{type:"daterange",filterValue:n,onUpdate:i,renderOrigin:e=>"exact"===n.type?this.renderStartEnd(e):"relative"!==n.type||"surrounding"!==n.value&&"custom"!==n.value?void 0:this.renderRelativePicker(e,i,n),disabled:"exact"===n.type,buttonPopupStore:t})}return this.renderStartEnd()},this.renderRelativePicker=(e,t,i)=>s()("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:this.environment.device.isMobile?"wrap":void 0,marginBottom:12}},void 0,s()("div",{style:{width:"92%",marginLeft:10,marginRight:10}},void 0,s()(T.b,{onUpdate:t,filter:i}))),this.renderStartEnd=e=>{const{value:t,disabled:i,allowRelativeRangeFilter:n}=this.props,{store:o}=this.stores,d=o.getFocus(),l=this.getRangeBounds(),p="type"in t?{starting:void 0,ending:void 0}:t;return a.createElement("div",r()({},e,{style:{display:"flex",flexDirection:n&&!this.environment.device.isMobile?"row":"column",alignItems:"center",width:this.environment.device.isMobile?void 0:280}}),s()(k.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:v.default.formatMessage(R.startingMessage),focused:"starting"===d,value:p.starting,validate:this.validateStart,onUpdate:this.handleUpdateStart,onFocus:()=>this.handleFocus("starting"),onSubmit:this.handleStartSubmit,inputElementAttributes:l?{max:l.latestValidStarting}:void 0,inputOuterStyle:this.styles.firstDateInput,textWrapperStyle:n&&!this.environment.device.isMobile?{marginRight:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0}),s()(k.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:v.default.formatMessage(R.endingMessage),focused:"ending"===d,value:p.ending,validate:this.validateEnd,onUpdate:this.handleUpdateEnd,onFocus:()=>this.handleFocus("ending"),onSubmit:this.handleEndSubmit,inputElementAttributes:l?{min:l.earliestValidEnding}:void 0,textWrapperStyle:n&&!this.environment.device.isMobile?{marginLeft:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0}))},this.renderCalendar=()=>{const{device:e}=this.environment,{value:t,onUpdate:i}=this.props,{store:n}=this.stores,r=this.styles,o=this.getThemeColors(),a={...r.pickerSection,...e.isMobile&&r.pickerSectionMobile,...e.isMobile&&o.pickerSectionMobile},d="type"in t?this.convertToDateRangeFilter(t):t;return s()(x.Z,{style:r.calendarWrapper},void 0,s()("div",{style:a},void 0,s()(w.Z,{value:d,store:n,onUpdate:i,validate:this.validateField,readonly:"type"in t}),"type"in t&&s()(M.Z,{isSmall:!0,style:{marginLeft:4,marginTop:4}},void 0,s()(c.FormattedMessage,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"}))))},this.handleFocus=e=>{const{store:t}=this.stores;t.setState({...t.state,focus:e})},this.handleUpdateStart=e=>{const{onUpdate:t}=this.props;e.error||t({value:{starting:e.value}})},this.handleUpdateEnd=e=>{const{onUpdate:t}=this.props;e.error||t({value:{ending:e.value}})},this.handleStartSubmit=(e,t)=>{const{store:i}=this.stores;t&&t.error||i.setState({...i.state,focus:"ending"})},this.handleEndSubmit=(e,t)=>{const{onDismiss:i}=this.props;t&&t.error||i&&i(e)},this.validateStart=e=>{const t=this.validateField("starting",e);return t.error?t:{value:t.value.starting}},this.validateEnd=e=>{const t=this.validateField("ending",e);return t.error?t:{value:t.value.ending}},this.validateField=(e,t)=>{const{value:i}=this.props;if("type"in i)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const n=t.value&&"date"!==t.value.type?p.Id(t.value):t.value;return this.validateRange({...i,[e]:n})},this.validateRange=e=>{if(e.starting&&e.ending){const t=p.OQ.notionDateToLuxon(e.starting);return p.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:f.B.INVALID_RANGE}}return{value:e}},this.getMenuProps=()=>{const{device:e}=this.environment,{onDismiss:t,title:i}=this.props;if(e.isMobile){return{menuType:m.og.Modal,title:i,right:s()(D.DoneMenuText,{}),onClickRight:t,header:this.renderInputs()}}return{menuType:m.og.Popup,onClickOutside:t}},this.styles={calendarWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},firstDateInput:{marginTop:2}}}renderComponent(){const{disableMenuWrap:e,hideDateInputMenuItems:t}=this.props,{device:i}=this.environment;return e?a.createElement(a.Fragment,null,!t&&this.renderInputs(),this.renderCalendar()):a.createElement(b.Z,this.getMenuProps(),!i.isMobile&&!t&&this.renderInputs(),this.renderCalendar())}convertToDateRangeFilter(e){return"custom"===e.value?this.calculateDateRangeFromCustomRelativeFilter(e.direction,e.count,e.unit):"surrounding"===e.value?this.calculateDateRangeFromSurroundingRelativeFilter(e.unit):this.convertToDateRangeFilterLegacy(e)}convertToDateRangeFilterLegacy(e){switch(e.value){case"this_week":return{starting:this.startOfWeek((0,u.r)()),ending:this.endOfWeek((0,u.r)())};case"the_past_month":return{starting:p.dj((0,u.r)()),ending:p.Lg((0,u.r)())};case"the_past_week":return{starting:p.Oo((0,u.r)()),ending:p.Lg((0,u.r)())};case"the_past_year":return{starting:p.b8((0,u.r)()),ending:p.Lg((0,u.r)())};case"the_next_month":return{starting:p.Lg((0,u.r)()),ending:p.nD((0,u.r)())};case"the_next_week":return{starting:p.Lg((0,u.r)()),ending:p.Kq((0,u.r)())};case"the_next_year":return{starting:p.Lg((0,u.r)()),ending:p.NJ((0,u.r)())};default:(0,h.t1)(e)}}calculateDateRangeFromSurroundingRelativeFilter(e){const{start:t,end:i}=(0,l.je)(e,(0,u.r)(),g.AK.state);return{starting:p.ME(t),ending:p.ME(i)}}calculateDateRangeFromCustomRelativeFilter(e,t,i){const n=(0,l.Fo)(e,t,i,(0,u.r)());switch(e){case"past":return{starting:p.ME(n),ending:p.Lg((0,u.r)())};case"future":return{starting:p.Lg((0,u.r)()),ending:p.ME(n)};default:(0,h.t1)(e)}}getRangeBounds(){const{value:e,intl:t}=this.props;if("type"in e)return;return{earliestValidEnding:e.starting&&y.p6(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&y.p6(e.ending,t,"YYYY-MM-DD")}}startOfWeek(e){return{type:"date",start_date:p.em(Date.now(),p.aN(),e).toFormat(p.Iq)}}endOfWeek(e){return{type:"date",start_date:p.gQ(Date.now(),p.aN(),e).toFormat(p.Iq)}}getThemeColors(){return{pickerSectionMobile:{background:this.theme.popoverBackground,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}}}}I.displayName="DateRangeMenu";const F=(0,c.injectIntl)(I)},46945:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(23174),r=i.n(n),o=(i(67294),i(83355)),s=i(13991),a=i(8848),d=i(53877),l=i(42875),p=i(82990),u=i(28020),h=i(77907),c=i(13854);class g extends o.Z{constructor(){super(...arguments),this.currentDate=void 0,this.handleDayClick=e=>{const{disabled:t,store:i,dateTimeStore:n,value:r,validate:o,onUpdate:s,readonly:a}=this.props;if(t||a)return;const l=i.getFocus(),p=o(l,{value:d.OQ.toPersistedDate(e.valueOf())});if(s(p.error?p:{value:{[l]:p.value[l]}}),i.setState({...i.state,hovered:void 0}),n&&n.setState({...n.state,hovered:void 0}),p.error)return;"starting"!==l||r.ending||(i.setState({...i.state,focus:"ending"}),n&&n.setState({...n.state,focus:c.yO.ending}));const u="starting"===l?"ending":"starting";i.setState({...i.state,focus:u}),n&&n.setState({...n.state,focus:c.yO[u]})},this.handleDayMouseEnter=e=>{const{disabled:t,store:i,dateTimeStore:n,value:r,readonly:o}=this.props,s=i.getFocus(),a=d.OQ.jsDateToLuxon(e);if(!t&&!o)if("starting"===s&&r.ending&&!r.starting){d.OQ.notionDateToLuxon(r.ending)>=a&&(i.setState({...i.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}else if("ending"===s&&r.starting&&!r.ending){d.OQ.notionDateToLuxon(r.starting)<=a&&(i.setState({...i.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}},this.handleMonthChange=e=>{const{store:t,dateTimeStore:i}=this.props;t.setState({...t.state,displayMonth:d.OQ.jsDateToLuxon(e)}),i&&i.setState({...i.state,displayMonth:d.OQ.jsDateToLuxon(e)})},this.styles={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:a.ZP.blueWithAlpha(.15)},active:{backgroundColor:a.ZP.blue,color:a.ZP.white},inactive:{backgroundColor:a.ZP.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:p.Z.fontWeight.regular}}}renderComponent(){const{readonly:e}=this.props,t=this.getDisplayMonth();return r()(h.LazyDayPicker,{className:"notion-calendar-picker",defaultMonth:t,month:t,numberOfMonths:1,weekStartsOn:this.getFirstDayOfWeek(),locale:s.SP,showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayClick,onDayMouseEnter:this.handleDayMouseEnter,onMonthSelected:this.handleMonthChange,modifiers:this.getModifiers(),modifiersStyles:this.getModifiersStyles(),disabled:!!e||void 0})}getCurrentDate(){if(!this.currentDate){const e=d.Lg((0,l.r)());this.currentDate=d.OQ.notionDateToJsDate(e)}return this.currentDate}getDisplayMonth(){const{value:e,store:t}=this.props;if(t.state.displayMonth)return t.state.displayMonth.toJSDate();if("starting"===t.getFocus()){if(e.starting)return d.OQ.notionDateToJsDate(e.starting);if(e.ending)return d.OQ.notionDateToJsDate(e.ending)}if("ending"===t.getFocus()){if(e.ending)return d.OQ.notionDateToJsDate(e.ending);if(e.starting)return d.OQ.notionDateToJsDate(e.starting)}return this.getCurrentDate()}getFirstDayOfWeek(){return u.AK.state}getModifiers(){const{store:e,disabled:t,value:i}=this.props,n=this.getDisabledModifier(),{hovered:r}=e.state;if(t)return{disabled:n};if(i.starting&&i.ending){const e=d.OQ.notionDateToJsDate(i.starting),t=d.OQ.notionDateToJsDate(i.ending);return{range:{from:e,to:t},start:e,end:t,disabled:n}}if(i.starting){const e=d.OQ.notionDateToJsDate(i.starting);return{range:r&&{from:e,to:r},start:e,end:r,disabled:n,selected:[e,r]}}if(i.ending){const e=d.OQ.notionDateToJsDate(i.ending);return{range:r&&{from:r,to:e},start:r,end:e,disabled:n,selected:[e,r]}}}getDisabledModifier(){const{value:e,disabled:t,store:i}=this.props;if(t)return e=>!0;const n=e=>"ending"===i.getFocus()&&{before:e},r=e=>"starting"===i.getFocus()&&{after:e};if(e.starting&&e.ending){const t=d.OQ.notionDateToJsDate(e.starting),i=d.OQ.notionDateToJsDate(e.ending);return n(t)||r(i)}if(e.starting){return n(d.OQ.notionDateToJsDate(e.starting))}if(e.ending){return r(d.OQ.notionDateToJsDate(e.ending))}return!1}getModifiersStyles(){const{store:e}=this.props,t=this.styles,i=this.getThemeColors(),n=e.getFocus(),r=t.selectedRange,o={...t.disabled,...i.disabled},s={...t.today,...i.today};return{range:r,start:"starting"===n?t.active:t.inactive,end:"ending"===n?t.active:t.inactive,disabled:o,today:s}}getThemeColors(){return{disabled:{color:this.theme.lightTextColor},today:{color:a.ZP.white}}}}g.displayName="DateRangePicker";const v=g},62045:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(10434),r=i.n(n),o=i(23174),s=i.n(o),a=i(67294),d=i(83355),l=i(8848),p=i(42853),u=i(52275),h=i(8982),c=i(63296);class g extends d.Z{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick&&this.props.onClick()}}renderComponent(){const{device:e}=this.environment,t=Boolean(this.props.title);if(e.isMobile)return s()(u.Z,{showExtensionArrow:!this.props.disabled,focused:!1,title:t?s()("div",{style:{display:"flex",alignItems:"center",...this.props.innerStyle}},void 0,this.props.title):s()("div",{style:{display:"flex",alignItems:"center",color:l.ZP.uiGray,...this.props.innerStyle}},void 0,this.props.placeholder),onClick:this.props.onClick});{const e="dark"===this.theme.mode?this.theme.lightTextColor:this.theme.mediumTextColor;return s()(h.i,{action:this.handleClick,disabled:this.props.disabled,render:i=>a.createElement(c.Z,r()({},i,{hovered:i.focused,isLarge:!0,backgroundColor:this.theme.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...i.disabled&&{opacity:.5},...this.props.disableMargins&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...this.props.desktopStyle}}),s()("div",{style:{display:"flex",minWidth:0,color:t?this.theme.regularTextColor:e,...this.props.innerStyle}},void 0,t?this.props.title:this.props.placeholder),!this.props.disabled&&(0,p.i)({width:10,marginLeft:6,fill:this.theme.lightIconColor}))})}}}g.displayName="QueryMenuDropdownItem";const v=g},14390:(e,t,i)=>{i.d(t,{b:()=>F});var n=i(10434),r=i.n(n),o=i(23174),s=i.n(o),a=i(67294),d=i(480),l=i(86628),p=i(24405),u=i(42853),h=i(5366),c=i(63143),g=i(17335),v=i(33929),m=i(87279),y=i(61766),f=i(52275),S=i(31945),b=i(73063),D=i(68894),x=i(78140),M=i(32163),k=i(63296),C=i(53437),w=i(72495),T=i(64369),R=i(62045);function I(e){window.__c={n:"DateRangePickerButton"};const{humanReadableLabel:t,placeholder:i,outlineButtonStyle:n,buttonWrapperStyle:o,renderAsQueryDropdown:d,events:l,isMobile:h}=e,c=(0,p.yK)((e=>({iconStyle:{...!h&&{height:12,width:12},color:e.mediumIconColor},textStyle:{marginLeft:6,color:e.regularTextColor}})),[h]);return d?a.createElement(R.Z,r()({},l,{placeholder:i,title:s()(T.Z,{isMobile:h},void 0,t),disableMargins:!0})):a.createElement("div",r()({style:o},l),s()(k.Z,{isLarge:h,style:n},void 0,s()("div",{style:c.textStyle},void 0,t),s()(b.Z,{disableBackground:!0,icon:u.i,iconStyle:c.iconStyle})))}function F(e){window.__c={n:"RelativeDateRangePicker"};const{onUpdate:t,filter:i,renderAsQueryDropdown:n}=e,o=(0,d.Fy)(),u=(0,h.useIntl)(),b=(0,l.qz)(void 0,y.Z),k=(0,l.qz)(void 0,y.Z),T="count"in i,R=(0,p.yK)((e=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:70,justifyContent:"space-between",...o.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6},...!T&&{marginRight:4}},unitButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:90,justifyContent:"space-between",width:"100%",...o.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...o.isMobile&&{width:"100%"},flexGrow:0},unitButtonWrapperStyle:{...o.isMobile&&{width:"100%"},flexGrow:2},inputStyle:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:32},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:o.isMobile?"column":"row",width:"100%"},textWrapper:{marginRight:6,marginLeft:n?16:6}})),[o.isMobile,n,T]);function F(e){return"this"===e?v.default.formatMessage(g.Fc[e]):v.default.formatMessage(g.Sj[e])}function B(e,t){return t&&t>1?v.default.formatMessage(g.D0[e]):v.default.formatMessage(g.Sb[e])}const Z=["day","week","month","year"].map((e=>({key:e,render:t=>a.createElement(f.Z,r()({},t,{title:B(e,T?i.count:void 0),checkState:e===i.unit})),action:n=>{t({...i,unit:e}),b.setState({open:!1})}}))),E=["past","future","this"].map((e=>({key:e,render:t=>a.createElement(f.Z,r()({},t,{checkState:"surrounding"===i.value?"this"===e:e===i.direction,title:F(e)})),action:n=>{"this"===e&&"custom"===i.value?t({type:"relative",value:"surrounding",unit:i.unit}):"this"!==e&&"surrounding"===i.value?t({type:"relative",value:"custom",count:1,direction:e,unit:i.unit}):"this"!==e&&"custom"===i.value&&t({...i,direction:e}),k.setState({open:!1})}})));return s()("div",{style:R.container},void 0,s()(S.ZP,{buttonPopupStore:k,popupType:o.isMobile?C.kQ.SlideUp:C.kQ.Popup,renderOrigin:e=>s()(I,{events:e,placeholder:u.formatMessage(g.$7.direction),renderAsQueryDropdown:n,isMobile:o.isMobile,outlineButtonStyle:R.directionButtonStyle,buttonWrapperStyle:R.directionButtonWrapperStyle,humanReadableLabel:F("direction"in i?i.direction:"this")}),render:()=>s()(x.Z,{menuType:o.isMobile?m.og.ActionSheet:m.og.Popup},void 0,s()(M.Z,{initialFocus:void 0,type:M.i.Vertical,sections:[{key:"directionOptions",render:e=>a.createElement(w.Z,r()({disableMobilePadding:!0},e)),items:E}]}))}),T&&s()(D.ZP,{type:"number",style:R.inputStyle,textWrapperStyle:R.textWrapper,inputOuterStyle:R.inputOuterStyle,min:"1",value:i.count.toString(),onChange:e=>{const n=parseInt(e.target.value);!(0,c.hj)(n)||n<1||t({...i,count:n})}}),s()(S.ZP,{buttonPopupStore:b,popupType:o.isMobile?C.kQ.SlideUp:C.kQ.Popup,renderOrigin:e=>s()(I,{events:e,placeholder:u.formatMessage(g.$7.unit),renderAsQueryDropdown:n,isMobile:o.isMobile,outlineButtonStyle:R.unitButtonStyle,buttonWrapperStyle:R.unitButtonWrapperStyle,humanReadableLabel:B(i.unit,"count"in i?i.count:void 0)}),render:()=>s()(x.Z,{menuType:o.isMobile?m.og.ActionSheet:m.og.Popup},void 0,s()(M.Z,{initialFocus:void 0,type:M.i.Vertical,sections:[{key:"unitOptions",render:e=>a.createElement(w.Z,r()({disableMobilePadding:!0},e)),items:Z}]}))}))}},47082:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(10434),r=i.n(n),o=i(23174),s=i.n(o),a=i(67294),d=i(83355),l=i(53465),p=i(72126),u=i(87279),h=i(98742),c=i(34859),g=i(64113),v=i(64921),m=i(37601),y=i(74194),f=i(3386),S=i(53336),b=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}(b||{});class D extends d.Z{constructor(){super(...arguments),this.storeTypes={store:g.Z},this.handleFocused=()=>{this.stores.store.setState({focused:!0})},this.handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken(),this.props.onKeyDown&&this.props.onKeyDown(e)},this.handleSubmit=e=>{0===this.props.value.length&&this.props.onEmptySubmit&&this.props.onEmptySubmit(),this.props.onSubmit&&this.props.onSubmit(e)},this.handleContainerClick=()=>{var e,t;this.props.disabled||(this.input.focusInput(),null===(e=(t=this.props).onClick)||void 0===e||e.call(t))}}willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return s()(f.Z,{capture:!e,onLeft:p.yR,onRight:p.yR,onSelectAll:p.yR,onRedo:p.yR,onUndo:p.yR,onToggleBold:p.yR,onToggleItalics:p.yR,onToggleCode:p.yR,onCut:p.yR,onCopy:p.yR,onPaste:p.yR,onKeypress:p.yR},void 0,s()(f.Z,{capture:!e&&this.props.value.length>0,onDelete:p.yR,onBackspace:p.yR},void 0,this.renderTokenInput()))}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?s()(S.Z,{type:c.Z.All,style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,s()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),s()("div",{style:{flexShrink:0}},void 0,this.renderRight())):this.environment.device.isMobile?s()("div",{style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,s()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:this.isGroup()?6:0}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),s()(m.Z,{show:this.stores.store.state.focused})):s()(S.Z,{type:c.Z.All,style:{...this.getWrapStyle(),...this.props.style},onClick:this.handleContainerClick},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput())}renderRight(){const{showClearButton:e,right:t,onClearButtonClick:i,tokens:n,value:r}=this.props,{isMobile:o}=this.environment.device;return t||(e&&(n.length>0||r.length>0)?s()(v.Z,{onClick:i,style:{flexShrink:0,flexGrow:0,borderRadius:o?24:20,marginTop:2}},void 0,(0,l.X)({width:o?16:14,height:o?16:14,fill:this.theme.lightIconColor})):void 0)}renderInput(){const e=0===this.props.tokens.length;return a.createElement(y.Z,r()({disabled:this.props.disabled,format:y.Z.Format.Transparent},(0,h.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:this.getInputDivStyle(),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:this.isGroup()?20:18},size:1,ref:e=>e&&(this.input=e),type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:this.handleSubmit,onFocus:this.handleFocused,onBlur:this.handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete}))}isGroup(){return this.props.format===b.Group}getDesktopWrapStyle(){const{disabled:e}=this.props;return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:e?"none":this.theme.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}getMobileWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${this.theme.regularDividerColor}`,fontSize:16,background:this.theme.popoverBackground}}getWrapStyle(){var e,t;const{focus:i,format:n}=this.props,{WindowSizeStore:r}=this.environment;return{...this.environment.device.isMobile?{...this.getMobileWrapStyle(),paddingTop:14,paddingBottom:8,paddingLeft:(null===(e=this.context.menu)||void 0===e?void 0:e.menuType)!==u.og.Popup?r.getSafePaddingLeftCSS(16):16,paddingRight:(null===(t=this.context.menu)||void 0===t?void 0:t.menuType)!==u.og.Popup?r.getSafePaddingRightCSS(16):16,...this.props.dontShowBorderBottom&&{borderBottom:"none"}}:{...this.getDesktopWrapStyle(),...this.getStyles()[n].desktopWrapStyle},...this.props.showBorder&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...this.props.showBorder&&this.props.focus&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!this.environment.device.isMobile&&i&&this.getStyles()[this.props.format].inputDivDesktopFocusStyle}}getStyles(){const e={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}};return{[b.Select]:e,[b.Person]:e,[b.Relation]:e,[b.Group]:e,[b.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:3},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[b.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}}}}getInputDivStyle(){return{flexGrow:1,flexShrink:1,flexBasis:this.props.inputFullWidth?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...this.environment.device.isMobile?{margin:"0 8px 8px 0"}:this.getStyles()[this.props.format].inputDivDesktopStyle,...this.props.inputDivStyle}}}D.displayName="TokenInputMenuItem",D.contextTypes={...u.mw,...d.w},D.Format=b;const x=D},67950:(e,t,i)=>{i.d(t,{B:()=>r,Z:()=>s});var n=i(49085);const r={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class o extends n.default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const s=o},76150:(e,t,i)=>{i.d(t,{Hv:()=>r,ZP:()=>a,pd:()=>o});var n=i(49085);let r=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),o=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class s extends n.default{getInitialState(){return{focus:r.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=s},13854:(e,t,i)=>{i.d(t,{QJ:()=>o,ZP:()=>d,yO:()=>s});var n=i(49085),r=i(76150);const o={[r.Hv.StartDate]:"starting",[r.Hv.StartTime]:"starting",[r.Hv.EndDate]:"ending",[r.Hv.EndTime]:"ending"},s={starting:r.Hv.StartDate,ending:r.Hv.EndDate};class a extends n.default{getInitialState(){return{isOpen:!1,focus:r.Hv.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const d=a},41558:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(49085);class r extends n.default{getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime"}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const o=r}}]);