"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3076],{70442:(e,t,o)=>{o.d(t,{$7:()=>I,GF:()=>W,Hp:()=>E,Lf:()=>N,RL:()=>A,rC:()=>D,xv:()=>P,zO:()=>B});o(21703);var i=o(15145),n=o(92785),r=o(59730),s=o(15157),a=o(5366),l=o(45953),d=o(21202),p=o(23867),c=(o(95477),o(33929)),h=o(98165),u=o(80444),m=o(56638),g=o(50906),S=o(54642),v=o(54532),b=o(89858),y=o(9953),f=o(4408),w=o(75018),C=o(24677),x=o(74647),k=o(28014),Z=o(39699),M=o(39865);const T="LastViewedTemplateId",R=(0,a.defineMessages)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function I(e){const{environment:t,item:o,createNewPage:i,isPrivate:n}=e;C.ZH(t),m.Z.setState({open:!0,item:o,createNewPage:i,isPrivate:n,isLoading:!1}),s.Z.set({userId:t.currentUser.id,key:T,value:o.rootId}),g.jWY(t,{template_name:o.name,from:i?"sidebar":"newPage"})}function B(e){let{templateItem:t,currentUserId:o}=e;const i=m.Z.state.item;m.Z.setState({...m.Z.state,item:t}),i!==t&&s.Z.set({userId:o,key:T,value:t.rootId})}function P(e){m.Z.setState({item:m.Z.state.item,open:!1}),C.ZH(e)}async function A(e){const{item:t,environment:o,spaceStore:n}=e;m.Z.state.open&&m.Z.setState({...m.Z.state,isLoading:!0});const r=e.initializeStore?{...e,initializeStore:e.initializeStore,isPrivate:!1,type:"inExistingStore",useMinimalTemplates:!1}:{...e,type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let s=!1;const a=Date.now();let l;try{l=await D(r),s=!0,w.navigateToBlock({environment:o,store:l,pageVisitSource:i.tY.Create}),P(o),o.device.isMobile&&x.close()}finally{var d;const i=Date.now()-a,r=e.initializeStore?h.VP(e.initializeStore):void 0,p=e.initializeStore?!Boolean(r):e.isPrivate;g.enX(o,{template_name:t.name,destination:p?"private":"team",template_block_id:t.rootId,template_duplication_duration_ms:i,team_id:null==r?void 0:r.id,created_page_id:null===(d=l)||void 0===d?void 0:d.id}),g.XyT(o,{from:"inApp",success:s,context:e.from,template_name:t.name,template_block_id:t.rootId,target_space_id:n.id,template_duplication_duration_ms:i})}}async function N(e){const{environment:t,initializeStore:o,item:i,isPrivate:n,useMinimalTemplates:r,spaceStore:s,spaceViewStore:a}=e,d=r?i.rootId:i.previewRootId,p=await S.loadBlockSubtree(t,{block:{id:d,spaceId:i.spaceId},shallow:!1});let h;"success"===p.type&&(h=l.PF.create(p.data.subtreeRecordMap));const u="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:m}=Z.createAndCommit({userAction:u,environment:t,perform:e=>{const i=o||k.KE({environment:t,spaceStore:s,spaceViewStore:a,isPrivate:n,loading:!0,transaction:e});f.fL({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,recordMap:h,debugSource:u});const r=v.K8(t,{blockId:d,inMemoryRecordCache:i.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0});if(!r)throw new Error(c.default.getIntl().formatMessage(R.clientCopyError));return v.E9({environment:t,sourceBlockId:d,targetBlockPointer:i.pointer,sourceBlockSubtree:r,targetInMemoryRecordCache:i.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:i.useCrdt()}),i}});return m}async function D(e){const{environment:t,item:o,useRecordCache:i,isPrivate:n,useMinimalTemplates:r,spaceStore:s,spaceViewStore:a,isOnboarding:l}=e,{serverCommitResult:p,performResult:{pageStore:c,copyBlock:h}}=Z.createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,perform:l=>{let p;p="inExistingStore"===e.type&&e.initializeStore?e.initializeStore:"inTeam"===e.type&&e.teamStore?b.pq({environment:t,spaceStore:s,spaceViewStore:a,teamStore:e.teamStore,from:e.from,loading:!0,appendOrPrepend:e.appendOrPrepend?e.appendOrPrepend:"append",transaction:l}):k.KE({environment:t,spaceStore:s,spaceViewStore:a,isPrivate:n,loading:!0,transaction:l});const c={id:i&&!r?o.previewRootId:o.rootId,table:d.iU,spaceId:o.spaceId};return W({item:o,spaceViewStore:a,transaction:l}),function(e){const{item:t,transaction:o,spaceViewStore:i}=e;if(i){const e=i.getSidebarHiddenTemplateIds();if(e.indexOf(t.rootId)<0){const n=e.concat([t.rootId]);y.sW({store:i,data:{sidebar_hidden_templates:n},transaction:o})}}}({item:o,spaceViewStore:a,transaction:l}),{pageStore:p,copyBlock:c}}});return await p,await E({environment:t,pageStore:c,copyBlock:h,useRecordCache:i,item:o,isOnboarding:Boolean(l)}),c}const _={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0};async function E(e){const{environment:t,pageStore:o,copyBlock:i,item:s,useRecordCache:a,isOnboarding:d}=e,c=l.Ak.create();a&&a.forEachRecord(t.currentUser.id,(e=>{let{model:t}=e;_[t.table]&&c.setModel(t.pointer,t)}));const{currentSpaceStore:h}=u.default.state;if(!h)throw new r.p8("Could not get currentSpaceStore.");return"failed"===(await S.initializePageTemplate(t,{recordMap:c.toJson({allowVersionDowngrade:!1}),sourceBlock:i,targetBlock:{id:o.pointer.id,table:o.pointer.table,spaceId:(0,p.C)(o.pointer.spaceId)},isOnboarding:d})).type&&(Z.createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplate.deletePageWhenError",environment:t,perform:e=>{M.y8({environment:t,blocks:[o],transaction:e})}}),d&&g.XyT(t,{success:!1,template_name:s.name,template_id:s.id,template_block_id:s.rootId,target_space_id:h.id,from:"onboarding"}),n.log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{template_name:s.name,template_id:s.id,template_block_id:s.rootId,is_onboarding:d}}})),o}function W(e){const{item:t,transaction:o,spaceViewStore:i}=e;if(i){const e=i.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const n=e.concat([t.rootId]);y.sW({store:i,data:{visited_templates:n},transaction:o})}}}},28385:(e,t,o)=>{o.d(t,{Z:()=>k});var i=o(10434),n=o.n(i),r=o(23174),s=o.n(r),a=o(67294),l=o(83355);const d=(0,o(45238).I)("teamSize",{viewBox:"0 0 20 20",svg:s()("path",{d:"M7.333 14.667a4.667 4.667 0 1 0 0-9.334 4.667 4.667 0 0 0 0 9.334zm4.356-.548A5.977 5.977 0 0 1 7.333 16a5.977 5.977 0 0 1-4.355-1.881A7.295 7.295 0 0 0 0 20h14.667a7.296 7.296 0 0 0-2.978-5.881zm1.599-4.832a4.664 4.664 0 1 0-5.242-5.241 6.01 6.01 0 0 1 5.242 5.241zm.003 1.347a6.024 6.024 0 0 1-.794 2.414 8.571 8.571 0 0 1 1.656 1.619H20a7.296 7.296 0 0 0-2.978-5.882 5.983 5.983 0 0 1-3.731 1.849z"})});var p=o(5366),c=o(75018),h=o(87279),u=o(8323),m=o(88632),g=o(53610),S=o(64921),v=o(31945),b=o(78140),y=o(64369),f=o(27386),w=o(14694),C=o(58705);class x extends l.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{g.Z.setState({open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?c.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{store:e}=this.props;if(!(0,u.Mk)()||!e.isDefined())return;const{mobileNative:t}=this.environment,o=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return s()(v.ZP,{buttonPopupStore:g.Z,popupType:v.Z4.SlideUp,hidesMobileNativeBottomBar:o,preventSlideUpTransition:o,renderOrigin:e=>a.createElement(S.Z,n()({mobileFeedback:!0},e),s()(w.Z,{left:this.renderIcon(),disableMobileBorder:!0},void 0,s()(p.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"}))),render:()=>{if(m.Z.state.online){const t={menuType:h.og.Modal,title:s()(p.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:s()(p.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose};return a.createElement(b.Z,t,s()(C.Z,{store:e,isMobile:!0}))}this.renderOffline()}})}renderIcon(){return d({fill:this.theme.mediumIconColor,width:16})}renderOffline(){return s()(f.Z,{},void 0,s()(y.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,s()(p.FormattedMessage,{defaultMessage:"Please go online to manage members.",id:"memberSettingsButton.goOnline.prompt"})))}}x.displayName="MemberSettingsButton";const k=x},61671:(e,t,o)=>{o.d(t,{Z:()=>f});var i=o(10434),n=o.n(i),r=o(23174),s=o.n(r),a=o(67294),l=o(83355),d=o(16001),p=o(5366),c=o(75018),h=o(87279),u=o(14786),m=o(64921),g=o(31945),S=o(78140),v=o(15311),b=o(14694);class y extends l.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{u.Z.setState({open:!1})};u.Z.state.source!==u.Y.Updates&&((null==e?void 0:e.supportsNativeHomeOnPhone())||!1)?c.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{device:e,mobileNative:t}=this.environment,o=u.Z.state.open,i=u.Z.state.source!==u.Y.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1);return s()(g.ZP,{popupType:e.isMobile?g.Z4.SlideUp:g.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,buttonPopupStore:u.Z,renderOrigin:t=>a.createElement(m.Z,n()({mobileFeedback:e.isMobile},t),s()(b.Z,{left:(0,d.r)({fill:this.theme.mediumIconColor,width:16}),style:{background:o?this.theme.buttonHoveredBackground:"none"},disableMobileBorder:!0},void 0,s()(p.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"}))),render:()=>{let t;return t=e.isMobile?{menuType:h.og.Modal,title:s()(p.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:s()(p.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose,whiteBackground:!0}:{menuType:h.og.Popup},a.createElement(S.Z,t,s()(v.Z,{isMobile:!0,passwordRequestStore:this.props.passwordRequestStore}))}})}}y.displayName="NotificationSettingsButton";const f=y},47082:(e,t,o)=>{o.d(t,{Z:()=>C});var i=o(10434),n=o.n(i),r=o(23174),s=o.n(r),a=o(67294),l=o(83355),d=o(53465),p=o(72126),c=o(87279),h=o(98742),u=o(34859),m=o(64113),g=o(64921),S=o(37601),v=o(74194),b=o(3386),y=o(53336),f=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}(f||{});class w extends l.Z{constructor(){super(...arguments),this.storeTypes={store:m.Z},this.handleFocused=()=>{this.stores.store.setState({focused:!0})},this.handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken(),this.props.onKeyDown&&this.props.onKeyDown(e)},this.handleSubmit=e=>{0===this.props.value.length&&this.props.onEmptySubmit&&this.props.onEmptySubmit(),this.props.onSubmit&&this.props.onSubmit(e)},this.handleContainerClick=()=>{var e,t;this.props.disabled||(this.input.focusInput(),null===(e=(t=this.props).onClick)||void 0===e||e.call(t))}}willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return s()(b.Z,{capture:!e,onLeft:p.yR,onRight:p.yR,onSelectAll:p.yR,onRedo:p.yR,onUndo:p.yR,onToggleBold:p.yR,onToggleItalics:p.yR,onToggleCode:p.yR,onCut:p.yR,onCopy:p.yR,onPaste:p.yR,onKeypress:p.yR},void 0,s()(b.Z,{capture:!e&&this.props.value.length>0,onDelete:p.yR,onBackspace:p.yR},void 0,this.renderTokenInput()))}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?s()(y.Z,{type:u.Z.All,style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,s()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),s()("div",{style:{flexShrink:0}},void 0,this.renderRight())):this.environment.device.isMobile?s()("div",{style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,s()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:this.isGroup()?6:0}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),s()(S.Z,{show:this.stores.store.state.focused})):s()(y.Z,{type:u.Z.All,style:{...this.getWrapStyle(),...this.props.style},onClick:this.handleContainerClick},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput())}renderRight(){const{showClearButton:e,right:t,onClearButtonClick:o,tokens:i,value:n}=this.props,{isMobile:r}=this.environment.device;return t||(e&&(i.length>0||n.length>0)?s()(g.Z,{onClick:o,style:{flexShrink:0,flexGrow:0,borderRadius:r?24:20,marginTop:2}},void 0,(0,d.X)({width:r?16:14,height:r?16:14,fill:this.theme.lightIconColor})):void 0)}renderInput(){const e=0===this.props.tokens.length;return a.createElement(v.Z,n()({disabled:this.props.disabled,format:v.Z.Format.Transparent},(0,h.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:this.getInputDivStyle(),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:this.isGroup()?20:18},size:1,ref:e=>e&&(this.input=e),type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:this.handleSubmit,onFocus:this.handleFocused,onBlur:this.handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete}))}isGroup(){return this.props.format===f.Group}getDesktopWrapStyle(){const{disabled:e}=this.props;return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:e?"none":this.theme.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}getMobileWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${this.theme.regularDividerColor}`,fontSize:16,background:this.theme.popoverBackground}}getWrapStyle(){var e,t;const{focus:o,format:i}=this.props,{WindowSizeStore:n}=this.environment;return{...this.environment.device.isMobile?{...this.getMobileWrapStyle(),paddingTop:14,paddingBottom:8,paddingLeft:(null===(e=this.context.menu)||void 0===e?void 0:e.menuType)!==c.og.Popup?n.getSafePaddingLeftCSS(16):16,paddingRight:(null===(t=this.context.menu)||void 0===t?void 0:t.menuType)!==c.og.Popup?n.getSafePaddingRightCSS(16):16,...this.props.dontShowBorderBottom&&{borderBottom:"none"}}:{...this.getDesktopWrapStyle(),...this.getStyles()[i].desktopWrapStyle},...this.props.showBorder&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...this.props.showBorder&&this.props.focus&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!this.environment.device.isMobile&&o&&this.getStyles()[this.props.format].inputDivDesktopFocusStyle}}getStyles(){const e={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}};return{[f.Select]:e,[f.Person]:e,[f.Relation]:e,[f.Group]:e,[f.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:3},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[f.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}}}}getInputDivStyle(){return{flexGrow:1,flexShrink:1,flexBasis:this.props.inputFullWidth?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...this.environment.device.isMobile?{margin:"0 8px 8px 0"}:this.getStyles()[this.props.format].inputDivDesktopStyle,...this.props.inputDivStyle}}}w.displayName="TokenInputMenuItem",w.contextTypes={...c.mw,...l.w},w.Format=f;const C=w},22715:(e,t,o)=>{o.d(t,{Z:()=>s});o(23174);var i=o(67294),n=o(480),r=o(24405);o(58047);function s(){window.__c={n:"WebComponentNotSupportedInMobileNativeWarning"};(0,n.O7)(),(0,r.yK)((e=>({container:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return i.createElement(i.Fragment,null)}},42600:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ue});var i=o(23174),n=o.n(i),r=o(67294),s=o(83355),a=o(69615),l=o(15145),d=o(8848),p=o(38780),c=o(69246),h=o(5366),u=o(61045),m=o(87531),g=o(74647),S=o(29974),v=o(95477),b=o(28020),y=o(43250),f=o(73744),w=o(71119),C=o(52533),x=o(45010),k=o(45094),Z=o(41168),M=o(8323),T=o(22709),R=o(34859),I=o(80444),B=o(12768),P=o(72087),A=o(45589),N=o(7755),D=o(78291),_=o(23063),E=o(64921),W=o(3386),L=o(77137),O=o(53336),V=o(56005),F=o(28385),z=o(61671),$=o(4252),U=o(27556),H=o(3553),Y=o(84939),q=o(29477),G=o(24677),X=o(80796),K=o(29337);const J=200;class j extends s.Z{constructor(){super(...arguments),this.handleTouchStart=e=>{const t={x:e.touches[0].clientX,y:e.touches[0].clientY};N.TC.state?t.x>(0,k.qG)(this.environment)?K.Z.setState({touching:!0,swiping:!1,start:t}):this.handleReset():(0,k.YR)(this.environment)&&t.x<100?K.Z.setState({touching:!0,swiping:!1,start:t}):this.handleReset()},this.handleTouchMove=e=>{if(X.Z.state.isDragging)return void this.handleReset();const t=K.Z.state;if(!t.touching)return;const o={x:e.touches[0].clientX,y:e.touches[0].clientY};if(t.swiping)K.Z.setState({touching:!0,swiping:!0,start:t.start,speed:N.TC.state?t.end.x-o.x:o.x-t.end.x,end:o});else{if(Math.abs(o.y-t.start.y)>=25)return void this.handleReset();(!N.TC.state&&o.x-t.start.x>25||N.TC.state&&t.start.x-o.x>25)&&K.Z.setState({touching:!0,swiping:!0,start:t.start,speed:0,end:o})}this.updateTransform()},this.handleTouchEnd=async()=>{const{ThemeStore:e}=this.environment,t=K.Z.state;if(!t.swiping)return;const o=(0,k.qG)(this.environment),i=document.querySelector((0,k.YR)(this.environment)?`.${y.ykc}`:`.${y.Wiy}`),n=document.querySelector(`.${y.Wiy}`),r=Math.abs(t.speed)>=8,s=r?"ease-out":"ease-in-out",a="dark"===e.state.mode?`, 1px 0 0 ${(0,Y.Fq)(this.theme.shadowColor,2*this.theme.shadowOpacity)}`:"",l=`\n\t\t\t${this.theme.mediumBoxShadow}\n\t\t\t${a}\n\t\t`;if(N.TC.state){const e=t.start.x-t.end.x;if(e+25*t.speed>o/2){let t=r?(o-e)/o*J:J;t=Math.max(t,1),i.style.transition=`transform ${t}ms ${s}`,i.style.transform="translateZ(0)translateX(0px)",(0,k.YR)(this.environment)&&(i.style.boxShadow=l,n.style.transition=`filter ${t}ms ${s}`,n.style.filter="brightness(1)"),await ee(i),g.close(),this.handleReset()}else i.style.transition=`transform 200ms ${s}`,i.style.transform=`translateZ(0)translateX(${o}px)`,(0,k.YR)(this.environment)&&(i.style.boxShadow=l,n.style.transition=`filter 200ms ${s}`,n.style.filter="brightness(0.7)"),await ee(i),this.handleReset()}else{const e=t.end.x-t.start.x;if(e+25*t.speed>o/2){let t=r?(o-e)/o*J:J;t=Math.max(t,1),i.style.transition=`transform ${t}ms ${s}`,i.style.transform=`translateZ(0)translateX(${o}px)`,(0,k.YR)(this.environment)&&(i.style.boxShadow=l,n.style.transition=`filter ${t}ms ${s}`,n.style.filter="brightness(0.7)"),await ee(i),g.open(),this.handleReset()}else i.style.transition=`transform 200ms ${s}`,i.style.transform="translateZ(0)translateX(0px)",(0,k.YR)(this.environment)&&(i.style.boxShadow=l,n.style.transition=`filter 200ms ${s}`,n.style.filter="brightness(1)"),await ee(i),this.handleReset()}},this.handleSidebarToggle=()=>{this.updateTransform()},this.updateTransform=()=>{const e=document.querySelector((0,k.YR)(this.environment)?`.${y.ykc}`:`.${y.Wiy}`),t=document.querySelector(`.${y.ykc}`),o=document.querySelector(`.${y.Wiy}`),i=(0,k.qG)(this.environment),n=K.Z.state;if(this.environment.device.isIOS&&(o.style.transform="translateZ(0)translateX(0px)",o.style.filter="brightness(1)",t.style.transform="translateZ(0)translateX(0px)",t.style.filter="brightness(1)"),n.swiping)if(N.TC.state){const t=i-(n.start.x-n.end.x)+25,r=Math.min(Math.max(0,t),i);if(e.style.transition="none",e.style.transform=`translateZ(0)translateX(${r}px)`,(0,k.YR)(this.environment)){e.style.boxShadow=this.theme.mediumBoxShadow,o.style.transition="none";const t=(1-.3*r/i).toString();o.style.filter=`brightness(${t})`}}else{const t=n.end.x-n.start.x-25,r=Math.min(Math.max(0,t),i);if(e.style.transition="none",e.style.transform=`translateZ(0)translateX(${r}px)`,(0,k.YR)(this.environment)){e.style.boxShadow=this.theme.mediumBoxShadow,o.style.transition="none";const t=(1-.3*r/i).toString();o.style.filter=`brightness(${t})`}}else N.TC.state?(e.style.transition="transform 200ms",e.style.transform=`translateZ(0)translateX(${i}px)`,(0,k.YR)(this.environment)&&(e.style.transform=`translateZ(0)translateX(calc(${i}px - 1px))`,e.style.boxShadow=this.theme.mediumBoxShadow,o.style.transition="filter 200ms",o.style.filter="brightness(0.7)"),G.ZH(this.environment)):(e.style.transition="transform 200ms",e.style.transform="translateZ(0)translateX(0)",(0,k.YR)(this.environment)&&(e.style.boxShadow="none",o.style.transition="filter 200ms",o.style.filter="brightness(1)"))}}didMount(){const{device:e}=this.environment;e.isMobile&&(window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchend",this.handleTouchEnd),N.TC.addListener(this.handleSidebarToggle))}willUnmount(){const{device:e}=this.environment;e.isMobile&&(window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),N.TC.removeListener(this.handleSidebarToggle))}handleReset(){K.Z.reset(),this.updateTransform()}}j.displayName="SidebarMobileSwipeListener";const Q=j;async function ee(e){const t=q.UZ();e.addEventListener("transitionend",t.resolve),e.addEventListener("webkitTransitionEnd",t.resolve),await t.promise,e.removeEventListener("transitionend",t.resolve),e.removeEventListener("webkitTransitionEnd",t.resolve)}var te=o(78902),oe=(o(83023),o(42685));const ie=(0,o(45238).I)("settingsUpgradeFilled",{viewBox:"0 0 20 20",svg:n()("path",{d:"M10 19c4.935 0 9.009-4.073 9.009-9 0-4.926-4.082-9-9.018-9C5.065 1 1 5.074 1 10c0 4.927 4.074 9 9 9zm0-4.422c-.47 0-.818-.33-.818-.8v-4.23l.087-1.863-.81 1.01-1 1.053a.762.762 0 01-.558.235c-.435 0-.757-.314-.757-.74 0-.218.07-.392.218-.549l2.994-3.029c.2-.217.4-.313.644-.313.261 0 .461.104.662.313l2.976 3.03a.73.73 0 01.227.548c0 .426-.322.74-.758.74a.73.73 0 01-.557-.235l-.992-1.045-.818-1.027.087 1.871v4.23c0 .47-.348.801-.827.801z"})});var ne=o(50906),re=o(90287),se=o(14694);class ae extends s.Z{renderComponent(){const e=n()(h.FormattedMessage,{defaultMessage:"Upgrade to Pro",id:"upgradeMobileButton.upgradeButton.label"});return n()(E.Z,{mobileFeedback:!0,onClick:this.showUpgradeModal(this.environment)},void 0,n()(se.Z,{left:this.renderIcon(),disableMobileBorder:!0},void 0,e))}renderIcon(){return ie({fill:this.theme.mediumIconColor,width:16})}showUpgradeModal(e){return()=>{ne.sA6(e,{from:"mobile_sidebar",for_subscription_tier:"personal"});const{mobileNative:t}=e;t&&t.openUpgradeModal(re.Bs())}}}ae.displayName="UpgradeMobileButton";const le=ae;var de=o(22715),pe=o(22735),ce=o(13089);class he extends s.Z{constructor(){super(...arguments),this.storeTypes={scrollerStore:A.Z,passwordRequestStore:P.Z},this.handleScrollerMount=e=>{x.Z.SidebarMobileScroller=e},this.handleCloseSidebar=()=>{g.close()},this.handleClickFind=()=>m.Kf({environment:this.environment,analyticsFrom:"sidebar-mobile"}),this.handleOrientationChange=()=>{g.close()},this.isScrolledToTop=this.createComputedStore((()=>0===this.stores.scrollerStore.state.scrollTop)),this.isCurrentIAPSubscriber=()=>{const{currentUserRootStore:e}=I.default.state,t=(0,Z.xR)({environment:this.environment,userRootStore:e});return!(!t||!t.includes(v.default.revenueCat.productIDs.personal.monthly)&&!t.includes(v.default.revenueCat.productIDs.personal.yearly))}}willMount(){window.addEventListener("resize",this.handleOrientationChange)}willUnmount(){window.removeEventListener("resize",this.handleOrientationChange)}renderComponent(){const e=B.default.state;if(e.isOnboarding&&"workspace_setup"===e.stage)return;const t=k.Jr(this.environment);return t?n()(_.Z,{render:()=>n()("div",{className:y.ykc,style:this.getWrapStyle()},void 0,!t&&n()(Q,{}),this.renderSidebar()),isVisible:!0,animationStyle:{width:t?k.Wk(this.environment):"100vw"}}):n()("div",{className:y.ykc,style:{...this.getWrapStyle(),width:"100vw"}},void 0,!t&&n()(Q,{}),this.renderSidebar())}renderSidebar(){return n()(W.Z,{capture:!k.Jr(this.environment)&&N.TC.state,onBackButton:this.handleCloseSidebar},void 0,n()("div",{style:this.getStyle()},void 0,this.renderTopbar(),this.renderOutliner()))}renderTopbar(){const{device:e}=this.environment,t=e.isMobileNative&&e.isTablet&&k.Jr(this.environment);return n()("div",{style:this.getTopbarStyle()},void 0,n()(T.ZP,{shouldShowUnexpandButton:t,format:T._S.Mobile,onSpaceClick:async e=>{let{event:t,spaceViewStore:o}=e;await S.y3({environment:this.environment,spaceViewStore:o,userSettingsStore:I.default.state.currentUserSettingsStore,userRootStore:I.default.state.currentUserRootStore,openInNew:f.DJ(t),pageVisitSource:l.tY.SwitchSpace})}}),!e.isMobileNative&&n()(oe.Z,{format:oe.Z.Format.TopbarMobile}),!e.isMobileNative&&n()(E.Z,{onClick:this.handleClickFind,mobileFeedback:!0,style:he.actionButtonStyle},void 0,(0,p.w)({width:26})))}renderOutliner(){const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserRootStore:o,currentUserStore:i,currentUserSettingsStore:s,mainEditorCurrentBlockStore:a}=I.default.state,l=(0,b.k_)(this.environment).state;if(!(l&&t&&o&&e&&i&&s))return;const d=e.canEdit(),p=(0,C.S$)({environment:this.environment})&&M.QM()&&D.default.state.data&&"unsubscribed_admin"===D.default.state.data.type&&D.default.state.data.revenueCatEnabled&&!this.isCurrentIAPSubscriber(),m=t.getTeamsStores();return n()(H.Z,{store:e,disableEditNearestBlock:!0,render:o=>{let{selectableEvents:i}=o;return r.createElement(O.Z,{store:this.stores.scrollerStore,ref:this.handleScrollerMount,style:he.outlinerStyle,preventType:u.Q7(this.environment),type:R.Z.Y},n()(de.Z,{}),l.showBookmarksSection&&n()($.Z,{type:"bookmarks",shouldPersistToggleState:!0,spaceStore:e,spaceViewStore:t,showAddButton:!1,renderSidebar:e=>{let{contentsAriaId:o,labelAriaId:i}=e;return n()(pe.Z,{type:"bookmarks",itemDepth:0,parentStore:t.getBookmarkedPagesStore(),childStores:t.getBookmarkedPages(),onNavigate:this.handleCloseSidebar,disabled:!d,id:o,"aria-labelledby":i})}}),l.showTeamSection&&n()($.Z,{type:c.kg,sectionLabel:n()(h.FormattedMessage,{defaultMessage:"Teamspaces",id:"sidebarMobile.teamsSection.header"}),shouldPersistToggleState:!0,spaceStore:e,spaceViewStore:t,showAddButton:!1,renderSidebar:e=>{let{contentsAriaId:t}=e;return n()(ce.u,{teams:m,reorderable:!1,onNavigate:this.handleCloseSidebar,id:t})}}),l.showWorkspaceSection&&!l.showTeamSection&&n()($.Z,{type:"workspace",shouldPersistToggleState:!0,spaceStore:e,spaceViewStore:t,showAddButton:!1,renderSidebar:o=>{let{contentsAriaId:i,labelAriaId:r}=o;return n()(pe.Z,{type:"workspace",itemDepth:0,parentStore:e.getPagesStore(),childStores:t.getWorkspacePages(),onNavigate:this.handleCloseSidebar,disabled:!d,id:i,"aria-labelledby":r})}}),l.showSharedSection&&n()($.Z,{type:"shared",shouldPersistToggleState:!0,spaceStore:e,spaceViewStore:t,showAddButton:!1,renderSidebar:o=>{let{headerRef:i,contentsAriaId:a,labelAriaId:p}=o;return r.createElement(r.Fragment,null,n()(pe.Z,{type:"shared",itemDepth:0,parentStore:t.getSharedPagesStore(),childStores:l.visibleSharedPagesStores,onNavigate:this.handleCloseSidebar,disabled:!d,id:a,"aria-labelledby":p}),l.showSharedOverflowButton&&n()(U.vJ,{originRef:i,type:"shared",spaceStore:e,spaceViewStore:t,userSettingsStore:s,allPages:l.allSharedPagesStores,visiblePageIds:l.visibleSharedPagesStores.map((e=>{let{id:t}=e;return t})),render:e=>{let{onClick:t,isPopoverOpen:o}=e;return n()(U.Ke,{isPopoverOpen:o,onClick:t,moreCount:l.allSharedPagesStores.length-l.visibleSharedPagesStores.length,inline:!1})}}))}}),l.showPrivateSection&&!l.showOnlyPrivateSection&&n()($.Z,{type:"private",shouldPersistToggleState:!0,spaceStore:e,spaceViewStore:t,showAddButton:!1,renderSidebar:o=>{let{contentsAriaId:i,labelAriaId:r}=o;return n()(pe.Z,{type:"private",itemDepth:0,parentStore:e.getPagesStore(),childStores:t.getPrivatePages(this.environment),onNavigate:this.handleCloseSidebar,disabled:!d,id:i,"aria-labelledby":r})}}),l.showOnlyPrivateSection&&n()(pe.Z,{type:"private",itemDepth:0,parentStore:e.getPagesStore(),childStores:t.getPrivatePages(this.environment),onNavigate:this.handleCloseSidebar,disabled:!d}),l.showOnlyPrivateSection&&n()("div",{style:{height:20}}),n()(F.Z,{store:e}),n()(L.Z,{request:{},render:()=>null,requestStore:this.stores.passwordRequestStore,performRequest:()=>(0,w.pu)(this.environment)}),n()(z.Z,{passwordRequestStore:this.stores.passwordRequestStore}),a&&e.canEdit()&&n()(te.Z,{store:a,isMobile:!0}),p&&n()(le,{}),n()(V.Z,{}),!1,n()("div",{style:{height:148}}))}})}getWrapStyle(){return k.Jr(this.environment)?{display:"block",height:"100vh",position:"relative",zIndex:3}:k.YR(this.environment)?{display:"block",height:"100vh",position:"fixed",top:0,right:"100%",zIndex:3}:{display:"block",height:"100vh",position:"fixed",top:0,left:0}}getStyle(){return{display:"flex",flexDirection:"column",width:k.qG(this.environment),height:"100%",background:k.YR(this.environment)?this.theme.mobileSidebarAndroidBackground:this.theme.mobileSidebarIOSBackground,willChange:"transform",color:this.theme.mediumTextColor,...k.YR(this.environment)&&{marginLeft:"auto"},...k.Jr(this.environment)&&{position:"absolute",right:0},cursor:"pointer"}}getTopbarStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",alignItems:"center",justifyContent:"space-between",flex:"none",height:a.g,marginTop:e.state.paddingTopCSS,paddingLeft:12,boxShadow:k.YR(this.environment)&&!k.Jr(this.environment)&&N.TC.state?this.isScrolledToTop.state?this.theme.topbarAndroidShadowCollapsed:this.theme.topbarAndroidShadow:`0 1px 0 ${this.theme.regularDividerColor}`,background:k.YR(this.environment)?this.theme.androidSidebarBackground:d.ZP.transparent,transition:"box-shadow 300ms",width:"100%",zIndex:1}}}he.displayName="SidebarMobile",he.outlinerStyle={flexGrow:1,paddingTop:12,userSelect:"none",WebkitUserSelect:"none"},he.actionButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flex:"none",height:"100%",width:44,paddingRight:6};const ue=he},18441:(e,t,o)=>{o.d(t,{P9:()=>l,YJ:()=>d,jc:()=>a,jg:()=>s});o(57658);var i=o(77657),n=o(59753),r=o(32161);function s(e){if(e.integration_id!==i.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,o,n]=t;return{organizationName:o,accountName:n}}function a(e){return n.kk.fromValue(r.P,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const o=a(e);return!!o&&t(o)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o={};for(const i of e){const{accountName:e,organizationName:n}=s(i);p({query:t,accountName:e,organizationName:n})&&(o[e]||(o[e]=[]),o[e].push({externalAuthentication:i,workspaceName:n}))}return o}function p(e){const{accountName:t,organizationName:o,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,r=!!o&&o.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||r}},40462:(e,t,o)=>{o.d(t,{o:()=>r});var i=o(23174),n=o.n(i);o(67294);const r=(0,o(45238).I)("globe2",{viewBox:"0 0 16 16",svg:n()("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},38780:(e,t,o)=>{o.d(t,{w:()=>r});var i=o(23174),n=o.n(i);o(67294);const r=(0,o(45238).I)("mobileBottomBarSearch",{viewBox:"0 0 26 26",svg:n()("path",{d:"M11.1416 19.3779C12.9355 19.3779 14.5898 18.7979 15.9434 17.8311L21.0352 22.9229C21.2715 23.1592 21.583 23.2773 21.916 23.2773C22.6143 23.2773 23.1084 22.7402 23.1084 22.0527C23.1084 21.7305 23.001 21.4297 22.7646 21.1934L17.7051 16.123C18.7686 14.7266 19.4023 12.9971 19.4023 11.1172C19.4023 6.57324 15.6855 2.85645 11.1416 2.85645C6.59766 2.85645 2.88086 6.57324 2.88086 11.1172C2.88086 15.6611 6.59766 19.3779 11.1416 19.3779ZM11.1416 17.5947C7.59668 17.5947 4.66406 14.6621 4.66406 11.1172C4.66406 7.57227 7.59668 4.63965 11.1416 4.63965C14.6865 4.63965 17.6191 7.57227 17.6191 11.1172C17.6191 14.6621 14.6865 17.5947 11.1416 17.5947Z"})})}}]);