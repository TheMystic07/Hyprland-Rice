"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2927],{17688:(e,t,i)=>{i.r(t),i.d(t,{default:()=>zo});var o=i(10434),n=i.n(o),s=i(23174),r=i.n(s),a=(i(57658),i(30541),i(94184)),l=i.n(a),d=i(67294),c=i(1302),p=i(13991),h=i(6740),g=i(49085),u=i(69615),m=i(41432),S=i(99036),v=i(80951),y=i(6695),C=i(42875),f=i(65955),P=i(45238);const k=(0,P.I)("addPageCover",{viewBox:"0 0 14 14",svg:r()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})}),b=(0,P.I)("addPageDiscussion",{viewBox:"0 0 16 16",svg:r()("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var M=i(9999),w=i(27961),T=i(98519),x=i(83303),E=i(72126),I=i(6287),B=i(23867),D=i(90965),_=i(70203),V=i(82990),L=i(51454),R=i(5366),F=i(50906),Z=i(35253),A=i(54564),O=i(51365),H=i(96802),W=i(32603),N=i(39699);function K(e){if(e){const t=(0,_.QaF)(e.getValue());return Boolean(t)}return!1}function z(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function U(e){const{environment:t,store:i,value:o}=e;N.createAndCommit({userAction:"PageViewBlock.setCollectionViewPageDescription",environment:t,perform:e=>{H.FH({stores:[i],update:{hide_collection_view_page_description:o},transaction:e})}})}function G(e){const{environment:t,pageId:i,isExpanded:o,store:n,userSettingsStore:s,descriptionStore:r}=e,a=n.state.isExpanded;n.setState({isExpanded:o});K(r)&&s&&a!==o&&N.createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,perform:e=>{if(o){const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:i}};N.applyOperation({store:s,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:i}};N.applyOperation({store:s,transaction:e,operation:t});let o=z(s);for(;o.length>1e3;){const t=o[0],i={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};N.applyOperation({store:s,transaction:e,operation:i}),o=z(s)}}}})}var j=i(9953),$=i(24677),Q=i(98104),q=i(29373),X=i(89626),Y=i(57819),J=i(4350),ee=i(2834),te=i(78030),ie=i(53223),oe=i(86628),ne=i(63698),se=i(77907),re=i(82136),ae=i(68709);function le(e){window.__c={n:"MarginComments"};const{pageBlockStore:t,isVisible:i,context:o}=e,n=(0,oe.VK)((()=>t.isFullWidth()||o===re.S.CollectionPageView),[o,t]);return r()(ae.p,{allowSelectionWithin:!0,style:{width:n&&i?ne.QB:0}},void 0,d.createElement(se.LazyMarginCommentsSection,e))}var de=i(15201),ce=i(23063),pe=i(91754),he=i(31945),ge=i(25821),ue=i(68785),me=i(78140),Se=i(40721),ve=i(89728),ye=i(26388),Ce=i(480),fe=i(43593),Pe=i(95477),ke=i(28020),be=i(31278);const Me=d.memo((e=>{let{store:t,isEditable:i,hasCover:o,isInSidePeek:n,isInMiniPeek:s,openMenuOnMount:a,openMenuOnMountCallback:l}=e;window.__c={n:"PageIcon"};const c=(0,Ce.O7)(),p=(0,R.useIntl)(),h=(0,oe.VK)((()=>t.hasIcon()),[t]),g=(0,oe.VK)((()=>{if(h)return t.getIcon()}),[h,t]),u=(0,oe.VK)((()=>t.getIconStore()),[t]),S=(0,oe.VK)((()=>t.getType()),[t]),v=(0,oe.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(m.Ti.externalObjectInstancePage)}),[t]),y=(0,oe.VK)((()=>t.isCollectionView()||n||s),[t,n,s]),C=(0,oe.VK)((()=>y?36:v?74:140),[y,v]),f=(0,oe.VK)((()=>t.isEmptyPage()),[t]),P=(0,d.useCallback)((async e=>{const i=t.getIconStore();if(i){const t=(0,fe.Wv)(e,Pe.default.secureFileS3.url,Pe.default.secureFileS3V2.url,Pe.default.secureFileConfig.rootPath,Pe.default.secureFileConfig.hostname),o=t?t.link:e,{serverCommitResult:n}=N.createAndCommit({userAction:"PageIcon.handleChange",environment:c,perform:e=>{j.sO({store:i,value:o,transaction:e})}});await n}}),[c,t]);if(!h)return null;const k={position:"relative",zIndex:1,marginLeft:3,marginBottom:c.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let b;y?k.marginRight=6:k.marginTop=o?-80:c.device.isMobile?0:(0,ke.CP)(c),b=y?{marginTop:(c.device.isMobile,4),marginRight:8}:{marginTop:o?-42:c.device.isMobile?0:(0,ke.CP)(c)};const M=y?36:78;if(i){const e=null==u?void 0:u.table;return r()(be.Z,{disabled:!1,bucket:"secure",icon:g,store:t,isEmptyPage:f,onChange:P,size:C,emojiSize:M,style:k,emojiStyle:b,largeIcon:!0,openMenuOnMount:a,openMenuOnMountCallback:l,iconLoggingData:{recordTable:e,source:"page_header",block_type:S,collection_id:"collection"===e?null==u?void 0:u.id:void 0},label:p.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"})})}return r()(be.Z,{disabled:!0,icon:g,isEmptyPage:f,size:C,emojiSize:M,style:k,emojiStyle:b,largeIcon:!0,label:p.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"})})}));var we=i(97511),Te=i(24405),xe=i(49271),Ee=i(42509),Ie=i(27714),Be=i(75018),De=i(41232),_e=i(33929),Ve=i(67669),Le=i(45094),Re=i(57559),Fe=i(99757),Ze=i(15560),Ae=i(73063),Oe=i(84076),He=i(19987),We=i(79954),Ne=i(44862),Ke=i(65187);function ze(e){window.__c={n:"SyncedIndicators"};const{store:t,collectionContextStore:i}=e,o=(0,oe.VK)((()=>t.isCollectionView()),[t]),n=(0,oe.VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return o&&i&&n?r()(Ne.Z,{collectionStore:n,collectionContextStore:i}):null}const Ue=d.memo((e=>{let{store:t,disabled:i,isInSidePeek:o,isInMiniPeek:s,extraStyles:a,paddingLeft:l,paddingRight:c,titlePlaceholder:h,collectionContextStore:g,shouldShowTemplatePicker:u,onTitleChange:S,onTitleEditText:v,onTitleEsc:y,onTitleUntab:f,onTitleTab:P}=e;window.__c={n:"PageTitle"};const k=(0,Ce.O7)(),b=(0,we.l)(),M=(0,oe.VK)((()=>t.getTitleStore()),[t]),w=(0,oe.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(m.Ti.externalObjectInstancePage)}),[t]),T=(0,oe.VK)((()=>{if(i)return!1;if(Fe.n.state)return!1;const e=b&&b.publicEditModeStore.state;return!(0,Ve.YF)(e)&&t.canEditCollection()}),[i,b,t]),x=(0,oe.VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,Ee.OY)(e.getValue())}),[t]),E=(0,oe.VK)((()=>{const e=t.getModel();return h??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,C.r)(),intl:_e.default.getIntl()}))}),[t,h]),I=!k.device.isMobile&&o,B=(0,oe.VK)((()=>T&&!t.isLocked()&&!w&&!(0,ke.qG)(t.id)),[T,w,t]),D=(0,oe.VK)((()=>t.isEmptyPage()),[t]),_=(0,oe.VK)((()=>t.isTemplate()),[t]),L=(0,oe.VK)((()=>t.getParentCollectionTemplateStores()),[t]),F=(0,oe.VK)((()=>t.getSyncedUri()),[t]),Z=(0,oe.VK)((()=>t.shouldShowBetaTagForProjectManagementLaunch()),[t]),A=function(e){const{store:t,paddingLeft:i,paddingRight:o,isInSidePeek:n,shouldShowBetaTagForProjectManagementLaunch:s,extraStyles:r}=e,a=(0,Ce.O7)(),l=(0,oe.VK)((()=>t.getFormat()),[t]),d=(0,oe.VK)((()=>t.isCollectionView()),[t]),c=(0,oe.VK)((()=>(0,Le.$3)(a)),[a]),h=(0,oe.VK)((()=>(0,Le.vJ)(a)),[a]),g=(0,oe.VK)((()=>t.getAppContainerBlockStore()),[t]),u=(0,oe.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);return(0,Te.yK)((e=>{const t=!!l.page_small_text||a.device.isMobile||d||n?32:40,m=c+h-i-o;return{title:{...xe.ZD,width:u||s?"fit-content":"100%"},selectable:{color:e.regularTextColor,fontWeight:V.Z.fontWeight.bold,lineHeight:1.2,fontSize:t,fontFamily:V.Z.getHeaderFontFamily({pageFont:l.page_font,locale:p.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:a.device.isSafari?"optimizeSpeed":void 0,width:d&&!g?m:void 0,...r},link:{width:16,fill:e.mediumIconColor},placeholder:{...xe.ZD,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}}}),[g,h,a.device.isMobile,a.device.isSafari,r,l.page_font,l.page_small_text,d,u,n,c,i,o,s])}({store:t,isInSidePeek:o,paddingLeft:l,paddingRight:c,shouldShowBetaTagForProjectManagementLaunch:Z,extraStyles:a}),O=(0,oe.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),H=(0,oe.VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),W=(0,oe.VK)((()=>(null==H?void 0:H.canEdit())??!1),[H]),N=(0,oe.VK)((()=>F?(0,De.pI)(F,t.pointer.spaceId):void 0),[t.pointer.spaceId,F]);if(x)return null;if(!M)return null;const K=Re.G.createChildStore(M,t.pointer),z=L&&0===L.length,U=k.device.isIOS,G=r()(Ke.Z,{tagName:"h1",style:{...A.title,fontSize:"1em",fontWeight:"inherit",margin:0},store:M,placeholderStyle:A.placeholder,disabled:!B,placeholder:E,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:y,onUntab:f,onTab:P,disableUpDownArrows:!(!u||_||z||k.device.isMobile)&&D,disableEnter:!(!u||_||z||k.device.isMobile)&&(D&&!s),onChange:S,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title"});return r()("div",{style:I?{flex:1}:void 0},void 0,r()(We.Z,{canSelect:!1,canDrag:!1,canEditText:B,onEditText:v,store:K,style:A.selectable,analyticsName:"page_content",shouldShowDropZone:!0},void 0,U?r()(ae.p,{style:A.title,allowSelectionWithin:!0},void 0,G):G,Z&&r()(Ze.Z,{style:{marginTop:8,marginLeft:8}}),O&&r()(ye.Z,{placement:ye.Z.Placement.Bottom,renderTooltip:e=>d.createElement(R.FormattedMessage,n()({},e,{defaultMessage:"Link to original url",id:"PageTitle.syncedBlock.original"})),render:e=>r()(Oe.Z,{href:N,ignoreLocalHoverState:!0,hovered:!1},void 0,d.createElement(Ae.Z,n()({ariaLabel:"Link"},e,{icon:()=>(0,Ie.N)(A.link),style:{marginLeft:4},onClick:()=>{N&&Be.navigateToExternalURL({url:N,environment:k})}})))}),H&&!k.device.isMobile&&r()(He.Z,{store:H,canEdit:W,buttonStyle:{fontWeight:"normal",margin:0}})),r()("div",{style:{marginLeft:4}},void 0,r()(ze,{store:t,collectionContextStore:g})))})),Ge=e=>{let{store:t,isEditable:i,hasCover:o,isInSidePeek:s,isInMiniPeek:a,paddingLeft:l,paddingRight:c,openMenuOnMount:p,openMenuOnMountCallback:h,...g}=e;return r()("div",{style:{display:"flex",alignItems:"flex-start"}},void 0,r()(Me,{store:t,isEditable:i,hasCover:o,isInSidePeek:s,isInMiniPeek:a,openMenuOnMount:p,openMenuOnMountCallback:h}),d.createElement(Ue,n()({store:t,isInSidePeek:s,isInMiniPeek:a,paddingLeft:l,paddingRight:c},g)))};function je(){window.__c={n:"ImportingMessage"};const e=(0,Te.yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return r()("div",{style:e.wrapper},void 0,r()(ue.Z,{}),r()("div",{style:e.message},void 0,r()(R.FormattedMessage,{defaultMessage:"Importing…",id:"frame.importingMessage"})))}var $e=i(83355),Qe=i(66890),qe=i(79131),Xe=i(73935),Ye=i(39068),Je=i(84619),et=i(45433),tt=i(89767),it=i(47453),ot=i(70663),nt=i(35840),st=i(4615),rt=i(21202),at=i(31869),lt=i(98834),dt=i(60971),ct=i(14473),pt=i(49616),ht=i(75079),gt=i(75081),ut=i(65598),mt=i(29376),St=i(86098),vt=i(45452),yt=i(29798),Ct=i(85526),ft=i(88071),Pt=i(64921),kt=i(32163),bt=i(72495),Mt=i(80559),wt=i(68139);class Tt extends $e.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:yt.Z,customTokenLimit:g.default.createClass(10),draggableListStore:vt.Z},this.getRelationMenuRows=(e,t,i,o,s,r)=>{const{store:a,collectionStore:l,disabled:c,property:p,locked:h}=this.props,g=i.getFormatStore().getKeyStore("app_config_uri").getValue()===et.p$;return e.reduce(((e,u,m)=>{const v=Re.G.createChildStore(a,u),y=v.getAssociatedCollectionStore();if((null==y?void 0:y.id)===S.F0(t)){const u={key:v.id,render:e=>d.createElement(wt.Z,n()({},e,{canDrag:s&&1!==t.limit&&a.canEdit(),collectionStore:l,targetCollectionStore:i,relatedPageStore:v,disabled:c,canConfigureCollection:r,locked:h,isSelected:!0,pageStore:a,property:p,rowType:"section",onActionButtonClick:()=>this.handleRemoveRelationClick(o,v,i),onMouseLeave:()=>this.stores.menuListStore.unsetFocus(),onSecondaryButtonClick:()=>this.handleCreateNewRelation(m+1,i,"relation_section_inline"),onInsertInline:g?()=>{Q.ZH(this.environment)}:()=>this.handleCreateNewRelation(m+1,i,"relation_section_inline"),onOpenPageButtonClick:()=>{ct.O(o,v,this.environment,"relation_section_inline")},index:m+1,propertyLimit:t.limit})),action:e=>{}};e.push(u)}return e}),[])},this.relationValueStore=this.createComputedStore((()=>{const{store:e,schema:t,property:i}=this.props,o=t[i];if(!o||"relation"!==o.type)return[];const n=e.getPropertyValue(i);return v.j$({relationValue:v.rq(n),propertySchema:o,getRecordModel:e.getRecordModel})}),!0),this.numberOfRelations=this.createComputedStore((()=>this.relationValueStore.state.length)),this.handleRemoveRelationClick=(e,t,i)=>{var o;const{store:n,schema:s,property:r,blockPropertyValueOverlayStore:a}=this.props,{collectionContextStore:l}=this.context,d=s[r];if("relation"!==(null==d?void 0:d.type)||!l)return;const c=d.limit?[]:e.filter((e=>e.id!==t.id));N.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:this.environment,perform:e=>{at.sf({store:n,propertyId:r,value:c,environment:this.environment,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:l,analyticsData:{isFromBulkActionsToolbar:pt.VM(a),analyticsFrom:pt.Sy(te.C.Page)},isUnthrottled:!1})}}),F.WFT(this.environment,{from:this.props.analyticsFrom,collection_id:null===(o=this.props.collectionStore)||void 0===o?void 0:o.id,target_collection_id:null==i?void 0:i.id})},this.handleDraggableListDrop=(e,t)=>{const{menuListStore:i}=this.stores,{collectionStore:o,schema:n,property:s,store:r}=this.props,a=n[s];if(!a||"relation"!==a.type)return;const l=S.j0(a);if(!l)return;const d=Re.NW.createChildStore(r,l);if(!(0,ut.NZ)(r)||!this.props.property)return;const c=r.getPropertyValue(this.props.property),p=v.j$({relationValue:v.rq(c),propertySchema:a,getRecordModel:r.getRecordModel}),h=[...e.map((e=>({id:e,spaceId:o.pointer.spaceId,table:rt.iU}))),...p.slice(e.length)];this.handleRelationPropertyMenuUpdate({value:h},d),F.yT1(this.environment,{from:this.props.analyticsFrom}),dt.sv({store:i,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})},this.handleOpenProperty=(e,t,i)=>{const{blockPropertyValueOverlayStore:o,store:n,property:s}=this.props,{collectionContextStore:r}=this.context,a=Xe.findDOMNode(this.relationPropertyPageSectionRef);if(!(a&&a instanceof Element))return;const l=i?null==i?void 0:i.getBoundingClientRect():a.getBoundingClientRect(),d=e?l.top+mt.Mu:l.top+5,c=new DOMRect(l.left,d,l.width,l.height);O.bA({environment:this.environment,blockPropertyValueOverlayStore:o,store:n,property:s,rect:c,format:te.C.Page,mode:t,collectionContextStore:r}),F.udZ(this.environment,{from:this.props.analyticsFrom})},this.handleRelationPropertyPageSectionRefMount=e=>{e&&(this.relationPropertyPageSectionRef=e)},this.handleClearProperty=e=>{this.handleRelationPropertyMenuUpdate({value:[]},e)},this.handleCreateNewRelation=(e,t,i)=>{const{store:o,schema:n,property:s,collectionStore:r}=this.props,{collectionContextStore:a}=this.context;if(!s)return;const l=n[s];if(!l||"relation"!==l.type)return;if(!o.canEdit())return;const d=(0,st.ZP)(),c=r.pointer.spaceId,p=l.limit,h={id:d,table:rt.iU,spaceId:c};if(!(0,ut.NZ)(o)||!this.props.property)return;const g=o.getPropertyValue(this.props.property),u=v.j$({relationValue:v.rq(g),propertySchema:l,getRecordModel:o.getRecordModel}),{customTokenLimit:m}=this.stores,S=m.state;e&&e+1>S&&m.setState(e+1);const y=p?[h]:e?[...u.slice(0,e),h,...u.slice(e)]:[h,...u];this.handleRelationPropertyMenuUpdate({newPage:{id:d,spaceId:c,name:""},value:y},t),F.kmb(this.environment,{...(0,ht.Pn)(a),from:i,target_collection_id:null==t?void 0:t.id})},this.handleRelationPropertyMenuUpdate=(e,t)=>{const{store:i,property:o}=this.props;if(!(0,ut.NZ)(i)||!o)return;let n;N.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:this.environment,perform:s=>{const r=t.id;if(e.newPage&&r){const i=_.TPx(e.newPage.name),o={id:e.newPage.id,version:0,type:m.Ti.page,parent_id:r,parent_table:I.v,alive:!0,properties:{title:i},collection_id:void 0,space_id:e.newPage.spaceId};n=j.ae({environment:this.environment,table:rt.iU,value:o,inMemoryRecordCache:t.inMemoryRecordCache,transaction:s});const a=Re.G.createChildStore(this.props.store,n.pointer),l=t.getDefaultTemplatePageStore();l&&lt.ob({title:{text:i},environment:this.environment,store:a,templateStore:l,isKeyboard:!1,isCreateIn:!1,transaction:s,from:"relation_property_page_section"})}if(e.value){const t=v.ow(e.value),n=i.getPropertyStore(o);j.sO({store:n,value:t,transaction:s})}}}),c.default.afterNextFlush((()=>{if(!n)return;const e=St.Z.findRow(n.id,"section",o);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const i=t.getBlockTitleStore(),s=i.getValue(),r=s?s[0][0].length:0,a={start:{index:r,store:i},end:{index:r,store:i}};Q.NA({multiSelection:a})}))}}renderComponent(){const{schema:e,format:t,locked:i,property:o,collectionStore:s,store:a,disabled:l,visibility:c,isInPeekRenderer:p,topBorder:h}=this.props,{device:g}=this.environment,{collectionContextStore:u}=this.context,m=e[o];if("relation"!==(null==m?void 0:m.type)||!u)return;const v=S.j0(m);if(!v)return;const y=Re.NW.createChildStore(a,v),C=u.permissionScopes.state,f=this.relationValueStore.state,{customTokenLimit:P}=this.stores,k=P.state,b=f.slice(0,k),M=y.getFormatStore().getKeyStore("app_config_uri").getValue()===et.p$;if("section_hide"===c)return;if("minimal"===c||0===this.numberOfRelations.state)return r()(xt,{property:o,propertySchema:m,numberOfRelations:this.numberOfRelations.state,onHandleOpenProperty:this.handleOpenProperty,onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,schema:e,format:t,disabled:l,locked:i,canConfigureCollection:C.canConfigureCollection,blockStore:a,collectionStore:s,collectionContextStore:u,isInPeekRenderer:p,targetCollectionStore:y});const w=1===m.limit,T=!(g.isMobile||l||i||w),x=this.getRelationMenuRows(b,m,y,f,T,C.canConfigureCollection),E=x.map((e=>e.key.toString())),I=r()(kt.Z,{type:kt.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>d.createElement(bt.Z,n()({},e,{disableDesktopPadding:!0,disableMobileBorders:!0}),T?r()(qe.ZP,{direction:"vertical",keys:E,renderKey:t=>e.children[E.indexOf(t)],onDrop:this.handleDraggableListDrop,store:this.stores.draggableListStore}):e.children),items:x}]}),B=y.canEdit(),D=a.canEdit(),_={maxWidth:g.isMobile?"none":300,...!g.isMobile&&{width:"auto"},...g.isMobile&&{paddingLeft:"none"}};return r()(Et,{collectionContextStore:u,title:r()(Mt.Q,{schema:e,format:t,property:o,blockStore:a,collectionStore:s,disabled:l,locked:i,canConfigureCollection:C.canConfigureCollection,intl:_e.default.getIntl(),style:_,popupStyle:_,isInPeekRenderer:p}),collectionStore:s,targetCollectionStore:y,property:o,showRight:!0,disabled:l,schema:e,format:t,locked:i,canEditTargetCollection:y.canEdit(),canConfigureCollection:C.canConfigureCollection,canEditCurrentPage:D,handleMouseMove:this.props.handleMouseMove,onHandleOpenProperty:()=>{this.handleOpenProperty(!1)},onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,onTitleEnter:()=>this.handleCreateNewRelation(void 0,y,"relation_section_inline"),handleClearProperty:()=>this.handleClearProperty(y),topBorder:h},o,r()("div",{style:{...this.getRelationRowWrapStyle(),...g.isMobile&&{paddingLeft:"none"}},onMouseMove:this.props.handleMouseMove,onMouseLeave:this.props.handleMouseLeave},void 0,I,f.length>k&&r()(Pt.Z,{style:this.getShowMoreButtonStyle(),onClick:()=>P.setState(k+10)},void 0,r()(ft.Z,{count:f.length-k,format:Je.l.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})),B&&D&&!i&&r()(Pt.Z,{style:this.getAddNewRelationButtonWrapperStyle(),onClick:()=>{M?this.handleClearProperty(y):this.handleCreateNewRelation(f.length>=k?k:f.length+1,y,"relation_section_footer")},disabled:l||i},void 0,M?(0,tt.R)(this.getMoveToBacklogIconStyle()):1===m.limit?(0,ot.h)(this.getAddNewRelationButtonIconStyle()):(0,it.R)(this.getAddNewRelationButtonIconStyle()),r()("div",{style:Tt.addNewRelationButtonTitleStyle},void 0,M&&r()("span",{style:{color:this.theme.mediumTextColor}},void 0,r()(R.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})),!M&&(1===m.limit?r()(R.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:m.name}}):r()(R.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:m.name}}))))))}getRelationRowWrapStyle(){return{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%"}}getShowMoreButtonStyle(){return{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"}}getAddNewRelationButtonWrapperStyle(){return{display:"flex",alignItems:"center",color:this.theme.lightTextColor,borderRadius:3,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}}getAddNewRelationButtonIconStyle(){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:this.theme.lightIconColor}}getMoveToBacklogIconStyle(){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}}}function xt(e){window.__c={n:"RelationPropertyMinimalPageSection"};const{property:t,propertySchema:i,numberOfRelations:o,schema:n,format:s,disabled:a,locked:l,canConfigureCollection:c,blockStore:p,collectionStore:h,onHandleOpenProperty:g,onHandleRelationPropertyPageSectionRefMount:u,isInPeekRenderer:m,targetCollectionStore:S}=e,v=(0,Te.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:3,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:V.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:V.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),y=(0,Te.Fg)(),C=(0,d.useCallback)((()=>{Ct.Z.setState({...Ct.Z.state,hoveredProperty:t})}),[t]),f=(0,d.useCallback)((()=>{Ct.Z.setState({...Ct.Z.state,hoveredProperty:void 0})}),[]),P=(0,oe.VK)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),k=(0,gt.sN)(et.p$),b=(0,gt.Q_)(et.p$);return r()("div",{style:v.hoverButton,onMouseMove:C,onMouseLeave:f},void 0,r()(Mt.Q,{schema:n,format:s,property:t,blockStore:p,collectionStore:h,disabled:a,locked:l,canConfigureCollection:c,intl:_e.default.getIntl(),style:v.pagePropertiesRowName,popupStyle:v.pagePropertiesRowName,origin:d.createElement("div",{ref:u,style:v.minimalButtonWrapper},r()(Pt.Z,{style:v.minimalButton,onClick:()=>g(!0),onContextMenu:e=>{a||l||!c||(e.preventDefault(),Ct.Z.setState({...Ct.Z.state,openProperty:{property:t,isInPeekRenderer:m}}))}},`minimal-section-${t}`,r()("div",{style:{display:"flex",alignItems:"center"}},void 0,r()(Ye.ZP,{size:14,style:v.iconStyle,theme:y,type:i.type??"relation",icon:i.icon}),P===et.p$?r()(R.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:o,propertyName:i.name,singleTypedItemName:k,pluralTypedItemName:b}}):r()(R.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:o,propertyName:i.name}})))),hideDragHandle:!0,isInPeekRenderer:m}))}function Et(e){window.__c={n:"RelationPropertyPageSectionHeader"};const{collectionStore:t,targetCollectionStore:i,property:o,showRight:s,disabled:a,locked:l,style:c,children:p,canEditTargetCollection:h,canConfigureCollection:g,canEditCurrentPage:u,handleMouseMove:m,onHandleOpenProperty:v,onHandleRelationPropertyPageSectionRefMount:y,onTitleEnter:C,topBorder:f=!0}=e,P=(0,oe.VK)((()=>i.isSyncedCollection()),[i]),k=(0,oe.VK)((()=>{const e=t.getSchema()[o];return Boolean(e&&S.NK(e))}),[t,o]),b=(0,oe.VK)((()=>i.getFormatStore().getKeyStore("app_config_uri").getValue()===et.p$),[i]);return d.createElement("div",{style:{width:"100%"},ref:y},d.createElement(bt.Z,n()({},e,{topBorder:f,children:p,noTextOverflow:!0,isTitleUppercase:!1,right:s&&!P&&!k&&r()("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"}},void 0,u&&r()(It,{disabled:a,handleMouseMove:m,onClick:v,icon:nt.R,tooltipMessage:r()(R.FormattedMessage,b?{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}:{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${o}`),h&&u&&!b&&!l&&r()(It,{disabled:a,handleMouseMove:m,onClick:C,icon:it.R,tooltipMessage:r()(R.FormattedMessage,b?{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}:{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${o}`),r()(se.LazyRelationPropertyCustomizeLayoutMenu,{collectionStore:t,targetCollectionStore:i,property:o,disabled:a||!g,rowType:"section"})),style:{paddingTop:0,paddingBottom:2,width:"100%",...c},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})))}function It(e){window.__c={n:"RelationPropertyPageSectionHeaderButton"};const{disabled:t,handleMouseMove:i,onClick:o,icon:s,key:a,tooltipMessage:l}=e,c=(0,Te.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:3,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return r()(ye.Z,{renderTooltip:()=>l,render:e=>d.createElement(Pt.Z,n()({key:a,style:c.buttonStyle,onMouseMove:i,onClick:o,disabled:t},e),s(c.iconStyle))})}Tt.displayName="RelationPropertyPageSection",Tt.contextTypes={...$e.w,...Qe.xm},Tt.addNewRelationButtonTitleStyle={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};const Bt=Tt;class Dt extends $e.Z{constructor(){super(...arguments),this.renderSection=e=>{const{schema:t,format:i,locked:o,collectionStore:n,store:s,disabled:a,isInPeekRenderer:l,handleMouseMove:d,handleMouseLeave:c,blockPropertyValueOverlayStore:p,topBorder:h}=this.props,g=(i.collection_page_sections||[]).filter((t=>t.section===e)).map((e=>e.visibility))[0];return r()(Bt,{store:s,collectionStore:n,disabled:a,locked:o,property:e,schema:t,handleMouseMove:d,handleMouseLeave:c,handleContextMenu:()=>{},blockPropertyValueOverlayStore:p,format:i,visibility:g,analyticsFrom:"relation_section",isInPeekRenderer:l,topBorder:h})},this.handleReorder=e=>{const{collectionStore:t,format:i}=this.props,o=i.collection_page_sections||[],n=[...E.oA(e.map((e=>o.find((t=>t.section===e))))),...o.filter((t=>!e.includes(t.section)))];N.createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:this.environment,perform:e=>{H.FH({stores:[t],update:{collection_page_sections:n},transaction:e})}})}}renderComponent(){const{locked:e,disabled:t,propertyIds:i,type:o}=this.props,{collectionContextStore:n}=this.context;if(!n)return;const s=n.permissionScopes.state;return"minimal"===o?i.map((e=>r()("div",{},e,this.renderSection(e)))):t||e||!s.canConfigureCollection?r()("div",{style:qe.yA},void 0,i.map((e=>r()("div",{},e,this.renderSection(e))))):r()(qe.ZP,{direction:"vertical",keys:i,renderKey:this.renderSection,onDrop:this.handleReorder})}}Dt.displayName="RelationPropertyPageSections",Dt.contextTypes={...$e.w,...Qe.xm};const _t=Dt;function Vt(e){window.__c={n:"InlinePageSections"};const{state:t,store:i,disabled:o,isInPeekRenderer:n,blockPropertyValueOverlayStore:s,onMouseEnter:a,onMouseLeave:l,topBorder:d}=e,c=(0,oe.VK)((()=>i.isLocked()),[i]),p=(0,oe.VK)((()=>i.getSchema()),[i]);return r()(_t,{topBorder:d,propertyIds:t.sectionPropertyIds,store:i,collectionStore:t.collectionStore,format:t.format,disabled:o,locked:c,schema:p,handleMouseMove:a,handleMouseLeave:l,handleContextMenu:()=>{},blockPropertyValueOverlayStore:s,isInPeekRenderer:n})}function Lt(e){const{collectionStore:t,format:i,sectionPropertyIds:o}=e;return t&&i&&o&&o.length?{type:"visible",collectionStore:t,format:i,sectionPropertyIds:o}:{type:"hidden"}}var Rt=i(77933),Ft=i(97053);const Zt=e=>{let{store:t}=e;return r()("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:Ft.m4,onClick:Ft.h9},void 0,r()(Rt.Z,{type:"page",store:t,headerText:r()(R.FormattedMessage,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0}))};function At(e){let{store:t,collectionViewId:i,context:o,disabled:n}=e;return r()(ie.D,{overridePaddingLeft:0,overridePaddingRight:0,store:t,isFullScreen:!0,viewId:i,disabled:n,hideHeaderActions:o===re.S.InAppTemplatePreview})}var Ot=i(90199),Ht=i(1436),Wt=i(89733),Nt=i(97444),Kt=i(68056),zt=i(18514),Ut=i(61766),Gt=i(1533),jt=i(31792),$t=i(24666),Qt=i(76798),qt=i(32662);class Xt extends $e.Z{constructor(){super(...arguments),this.editor=null,this.storeTypes={store:Gt.Z,buttonPopupStore:Ut.Z},this.renderLockedTooltip=()=>{const{collectionStore:e}=this.props,t=e&&e.getIcon();return r()("div",{style:{display:"flex",alignItems:"start"}},void 0,r()("div",{style:{paddingTop:4,paddingRight:6}},void 0,(0,Ot.b)({width:12})),r()("div",{},void 0,r()("div",{},void 0,r()(R.FormattedMessage,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:r()("span",{style:{whiteSpace:"nowrap",fontWeight:V.Z.fontWeight.bold}},void 0,t&&r()(be.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),e&&r()(Qt.Z,{store:e,style:{display:"inline"}}))}}))))},this.handleTab=e=>!0,this.handleUntab=e=>!0,this.handleEnter=e=>{if(!this.canEdit())return;if(e.preventDefault(),this.editor&&this.editor.isComposing())return;const t=$t.default.state;if("editing"===t.mode){const e=(0,Kt.QY)(t.multiSelection);if(!e)return;N.createAndCommit({userAction:"PageDescription.handleEnter",environment:this.environment,perform:t=>{Nt.hJ({environment:this.environment,store:this.props.descriptionStore,string:"\n",selection:e.selection,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}},this.handleToggleExpanded=e=>{this.isExpanded()||e.preventDefault(),this.togglePageDescription()},this.handleMouseMove=e=>{const{disabled:t}=this.props;Wt.Js({store:this.stores.store,event:e,disabled:t||!1})},this.handleMouseLeave=e=>{const{disabled:t}=this.props;Wt.iV({store:this.stores.store,event:e,disabled:t||!1})}}renderComponent(){return r()("div",{style:{maxWidth:"100%",borderRadius:3,overflow:"hidden",marginBottom:12},onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},void 0,this.renderExpanded())}renderExpanded(){return this.environment.device.isMobile?r()(d.Fragment,{},void 0,this.renderDescriptionText()):r()(ye.Z,{renderTooltip:this.renderLockedTooltip,disableTooltip:!this.props.locked||!this.props.canEdit,render:e=>r()("div",{},void 0,d.createElement("div",n()({style:{display:"flex",cursor:"text"}},e),this.renderDescriptionText()))})}renderDescriptionText(){const{device:e}=this.environment,{intl:t}=this.props;if(this.props.descriptionStore)return d.createElement(Ke.Z,{ref:e=>{this.editor=e},store:this.props.descriptionStore,style:{...Yt,width:780},disabled:this.props.disabled,placeholder:t.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableDateMentions:!0,disableMentions:!0,onTab:this.handleTab,onUntab:this.handleUntab,onEnter:this.handleEnter,onClick:this.isExpanded()?()=>{}:this.handleToggleExpanded,disableStyleAnnotations:e.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline"})}isExpanded(){return this.props.toggleStore.isExpanded()}canEdit(){const{descriptionStore:e}=this.props,t=this.pageContext&&this.pageContext.publicEditModeStore.state;return!this.props.disabled&&(!(0,Ve.YF)(t)&&e.canEdit())}togglePageDescription(){const e=this.isExpanded();G({environment:this.environment,pageId:this.props.pageId,isExpanded:!e,store:this.props.toggleStore,userSettingsStore:this.props.userSettingsStore,descriptionStore:this.props.descriptionStore})}}Xt.displayName="PageDescription",Xt.stores={store:Gt.Z,buttonPopupStore:Ut.Z};const Yt={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3},Jt=(0,R.injectIntl)(Xt);function ei(){window.__c={n:"SprintBoardPageDescription"};const e=(0,Ce.O7)(),t=(0,oe.qz)(void 0,jt.Z),i=(0,oe.VK)((()=>t.state.mouseEntered),[t]),o=(0,Te.yK)((e=>({linkStyle:{...Yt,color:i?e.mediumTextColor:e.lightTextColor,cursor:"pointer"}})),[i]);return r()("div",{style:{display:"flex"},onClick:()=>F.Fsx(e,{from:"sprint_board_learn_how_to_use"})},void 0,r()(Oe.Z,{style:o.linkStyle,href:(0,zt.UY)("guides.sprintPlanning"),external:!0,disabled:!0,onMouseEnter:()=>t.enter(),onMouseLeave:()=>t.exit()},void 0,r()(R.FormattedMessage,{defaultMessage:"Learn how to use Sprints",id:"pageDescription.sprintBoard.message"}),r()(qt.Z,{size:2}),(0,Ht.g)({width:16,display:"inline-block",position:"relative",top:"3px",height:void 0})))}var ti=i(43250),ii=i(7476),oi=i(78089),ni=i(46351),si=i(87404);const ri=e=>{window.__c={n:"NewPageDiscussion"};const{store:t}=e,i=(0,Ce.O7)(),o=(0,d.useMemo)((()=>new si.Z(i,(0,B.C)(t.pointer.spaceId))),[i,t.pointer.spaceId]),n=(0,d.useCallback)((()=>{Q.ZH(i)}),[i]),s=ai({environment:i,discussionInputStore:o,store:t});return r()(se.LazyDiscussionInput,{showAvatar:!0,parentStore:t,onSubmit:s,onCancel:n,discussionInputStore:o,discussionFormat:oi.O2.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})},ai=e=>{const{environment:t,discussionInputStore:i,store:o}=e,n=(0,oe.qz)(void 0,re.Z),s=(0,d.useCallback)((e=>{var i;const n=o.id;null===(i=t.PageDetailsStore)||void 0===i||i.setToggleState({environment:t,type:"discussion",id:n},e)}),[t,o.id]);return(0,d.useCallback)((async()=>{const e=i.state.textStore.getValue(),r=i.state.files;if(e&&e.length>0||r.length>0){const{performResult:a}=N.createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,perform:i=>ii.i8({environment:t,blockStore:o,commentTextValue:e||[],transaction:i,files:r}),skipUpdatingEditedMetadata:!0});if(i.reset(),n.setState({...n.state,forceDiscussionOpen:!1}),s(!0),a&&!t.device.isMobile){await c.default.afterNextFlush();const e=ni.Z.find((e=>e.getStore().id===a.id));e&&Q.NX({store:e.getInputStore().state.textStore})}}}),[i,t,n,s,o])},li=e=>{window.__c={n:"UnresolvedPageDiscussion"};const{store:t,discussionStore:i,isFirst:o,isOnly:n}=e,s=(0,Ce.O7)(),a=(0,d.useMemo)((()=>new si.Z(s,(0,B.C)(t.pointer.spaceId))),[s,t.pointer.spaceId]);return r()(se.LazyDiscussion,{store:i,format:oi.O2.Page,isFirst:o,isOnly:n,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:a},i.id)},di=e=>{const{store:t,showDiscussionInput:i,unresolvedDiscussionStores:o,withLegacyInputPadding:n}=e;return r()("div",{style:{width:"100%",margin:"0 auto"},onMouseDown:Ft.m4,onClick:Ft.h9,className:ti.KA2},void 0,o.map(((e,i,o)=>r()(li,{store:t,discussionStore:e,isFirst:0===i,isOnly:1===o.length},e.id))),i&&r()("div",{style:{padding:n?"6px 4px 12px":"14px 4px 12px"}},void 0,r()(ri,{store:t})))};var ci=i(60177),pi=i(64338),hi=i(77080),gi=i(55217),ui=i(15145),mi=i(64275),Si=i(56666),vi=i(75e3),yi=i(11751),Ci=i(70442),fi=i(21325),Pi=i(59389),ki=i(74284),bi=i(92022),Mi=i(66213),wi=i(14976),Ti=i(15010),xi=i(78316),Ei=i(12921),Ii=i(84210),Bi=i(12534),Di=i(17504),_i=i(80444),Vi=i(88632),Li=i(83212),Ri=i(91496),Fi=i(21199),Zi=i(40698),Ai=i(34574);const Oi=(0,R.defineMessages)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"}});class Hi extends $e.Z{constructor(){super(...arguments),this.moreAIItemsExpandedStore=g.default.createValue(!1),this.moreNewPageItemsExpandedStore=g.default.createValue(!1),this.renderMobileTemplatePreviewItem=e=>({key:e.name,render:t=>d.createElement(Ai.Z,n()({},t,{key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})),action:()=>{Ci.$7({environment:this.environment,item:e,createNewPage:!1,isPrivate:!1})}}),this.renderPageTemplatePickerItem=e=>({key:e.name,render:t=>{var i;return d.createElement(Ai.Z,n()({},t,{key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(i=e.iconFn)||void 0===i?void 0:i.call(e,this.getIconStyle(e)),locked:!1,right:this.maybeRenderEnterIcon(t)}))},action:t=>{fi.M_(this.environment)&&(F.rNQ(this.environment,{template_name:e.name,is_keyboard:"keydown"===t.event.type,from:e.from}),e.onClick(this.environment,this.props.store))}}),this.renderAIDraftPageWithGivenTitleTemplatePickerItem=e=>{const{intl:t}=this.props;return{key:"ask ai",render:i=>{const o=e.length>30?`${e.slice(0,30)}…`:e;return d.createElement(Ai.Z,n()({},i,{key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:e?t.formatMessage(Oi.genericHelpMeWriteNewPage,{filter:o}):t.formatMessage(Oi.genericHelpMeWriteNewPageEmpty),type:"ai",icon:r()("div",{style:{height:24,width:24,borderRadius:3,display:"flex",alignItems:"center",justifyContent:"center",marginRight:10}},void 0,(0,yi.t)({width:16,fill:this.theme.accentColors.purple[400]})),locked:!1,right:this.maybeRenderEnterIcon(i)}))},action:()=>{const{environment:t}=this,{store:i}=this.props;N.createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,perform:e=>{Pi.eV({environment:t,store:i,transaction:e,preventTextSelection:!0})}}),(0,bi.kL)({environment:this.environment,title:e})}}},this.publicEditModeStore=this.createComputedStore((()=>Li.Z.getMode(this.environment,this.props.store))),this.userSettingsPersona=this.createComputedStore((()=>{var e;return null===(e=_i.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.persona}),!1),this.spaceSubscriptionTier=this.createComputedStore((()=>{var e;return null===(e=_i.default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()})),this.suggestedTemplatesExperimentVariant=this.createComputedStore((()=>hi.default.getEligibleGroup({experimentId:"new_page_suggested_templates"})),!1),this.handleEmptyPageContinueClick=e=>{(0,Bi.ZP)({event:e,context:Bi.Af.EditorClick,callback:()=>{fi.M_(this.environment)&&(N.createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:this.environment,perform:e=>{Pi.eV({environment:this.environment,store:this.props.store,transaction:e})}}),F.rNQ(this.environment,{template_name:"empty",is_keyboard:!1}))}})},this.handleTemplatePickerEmptyEnter=()=>{const e=$t.default.state;fi.M_(this.environment)&&"editing"===e.mode&&(N.createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:this.environment,perform:t=>{ki.IO({environment:this.environment,transaction:t,multiSelection:e.multiSelection})}}),F.rNQ(this.environment,{template_name:"empty",is_keyboard:!0}))},this.handleCollectionTemplateClick=e=>{N.createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:this.environment,perform:t=>{const i=this.props.store.getTitleValue();lt.ob({title:""!==_.QaF(i)?{text:i}:"template",environment:this.environment,store:this.props.store,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:t,from:"template_picker"})}})},this.handleTemplateEmptyPageClick=()=>{N.createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:this.environment,perform:e=>{Pi.eV({environment:this.environment,store:this.props.store,transaction:e})}})},this.handleCreateDatabaseTemplateClick=()=>{const{store:e}=this.props,t=e.getAssociatedCollectionStore();if(t&&fi.M_(this.environment)){const{performResult:e}=N.createAndCommit({userAction:"TemplatePicker.newPage",environment:this.environment,perform:e=>lt.nx({environment:this.environment,collectionStore:t,transaction:e})});e&&this.navigateToBlock(e),F.dZq(this.environment,{collection_id:t.id})}},this.handleCloseTemplateSuggestionsClick=()=>{const{currentUserSettingsStore:e}=_i.default.state;F.Bp3(this.environment),e&&N.createAndCommit({userAction:"NewPageSuggestedTemplates.dismissSuggestions",environment:this.environment,perform:t=>{j.sW({store:e.getSettingsStore(),data:{dismissed_new_page_suggested_templates:!0},transaction:t})}})}}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):Be.navigate({environment:this.environment,url:e})}willMount(e){super.willMount(e),e.menuListStore.reset()}renderComponent(){const e=Vi.Z.state.online;return r()(Fi.Z,{capture:!0,render:t=>(0,Di.Z)((i=>d.createElement("div",n()({},t,i,{style:Hi.wrapStyle}),this.renderPlaceholder(),e&&this.renderTemplates())))})}renderTemplates(){const{device:e}=this.environment,{store:t}=this.props,i=this.isCollectionPage(),o=this.isTemplatePage(),n=t.getAssociatedCollectionStore(),s=n?n.getParentBlockStore():void 0,a=n?n.getTemplatePageStores():void 0;return r()("div",{},void 0,!i&&!e.isMobile&&this.renderDesktopPageTemplatePicker(),!i&&e.isTablet&&this.renderMobilePageTemplatePicker(),i&&!o&&n&&s&&a&&a.length>0&&r()(Ri.Z,{isOverlay:!1,collectionStore:n,canConfigureCollection:this.canConfigureCollection(),onTemplateClick:this.handleCollectionTemplateClick,onEmptyEnter:this.handleTemplatePickerEmptyEnter,onEmptyPageClick:this.handleTemplateEmptyPageClick,locked:s.isLocked()}))}renderDesktopPageTemplatePicker(){if(this.isSuggestedTemplatesExperimentEnabled()){const e={key:"Basic",render:e=>r()("div",{},e.key,e.children),items:(0,Zi.XI)(this.environment,this.props.store).map(this.renderPageTemplatePickerItem)},t={key:"Database",render:e=>r()("div",{},e.key,r()("div",{style:this.getGroupTitleStyle({})},void 0,r()(R.FormattedMessage,{defaultMessage:"Database",id:"templatePicker.databaseTemplates.label"})),e.children),items:Zi.Im.filter((e=>e.shouldShow(this.environment))).map(this.renderPageTemplatePickerItem)},i=this.suggestedTemplatesExperimentVariant.state,o=this.userSettingsPersona.state;let n="Suggested templates";return"variant_2"!==i&&"variant_4"!==i||(n=`Suggested templates for ${this.getPersonaLabel()}`),r()(Wi,{variant:void 0===i?"control":i,persona:o,menuListStore:this.props.menuListStore,sectionsBeforeSuggested:[e],sectionsAfterSuggested:[t],handleTemplatePickerEmptyEnter:this.handleTemplatePickerEmptyEnter,suggestedTemplateSectionHeader:e=>r()("div",{style:this.getGroupTitleStyle({})},void 0,n,e&&r()(Ae.Z,{ariaLabel:"Dismiss suggested templates",icon:mi.D,style:{position:"static",width:15,height:15,marginLeft:4,borderRadius:100},iconStyle:{width:13,height:13},onClick:this.handleCloseTemplateSuggestionsClick})),renderPageTemplatePickerItem:this.renderPageTemplatePickerItem})}if((0,Ei.GD)(this.environment,this.publicEditModeStore.state)){const e=(0,Zi.XI)(this.environment,this.props.store),t=(0,Zi.b6)(e,["empty_page"]).map(this.renderPageTemplatePickerItem),i=this.props.store.getTitleValue(),o=(0,wi.Xh)(i,this.props.store).trim(),n=[this.renderAIDraftPageWithGivenTitleTemplatePickerItem(o)],s=(0,Zi.b6)(e,["import","templates"]),a=(0,Zi.b6)(Zi.Im,["table","board","timeline","calendar"]),l=E.zu(Zi.Im,...a),d=this.moreNewPageItemsExpandedStore.state?[...s,...a,...l].map(this.renderPageTemplatePickerItem):[...s,...a].map(this.renderPageTemplatePickerItem).concat(this.renderMoreTemplatePickerItem("moreNew",this.moreNewPageItemsExpandedStore));return r()(kt.Z,{type:kt.i.Vertical,store:this.props.menuListStore,disableInitialScroll:!0,disableCommandEnter:!0,initialFocus:0,onEmptyEnter:this.handleTemplatePickerEmptyEnter,sections:[{key:"Empty page",render:e=>r()("div",{},void 0,e.children),items:[...t,...n]},{key:"Add new",render:e=>r()("div",{},e.key,r()("div",{style:this.getGroupTitleStyle({})},void 0,r()(R.FormattedMessage,{defaultMessage:"Add new",id:"templatePicker.add new.label"})),e.children),items:d}]})}return r()(kt.Z,{type:kt.i.Vertical,store:this.props.menuListStore,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:this.handleTemplatePickerEmptyEnter,sections:[{key:"Basic",render:e=>r()("div",{},e.key,e.children),items:(0,Zi.XI)(this.environment,this.props.store).map(this.renderPageTemplatePickerItem)},{key:"Database",render:e=>r()("div",{},e.key,r()("div",{style:this.getGroupTitleStyle({})},void 0,r()(R.FormattedMessage,{defaultMessage:"Database",id:"templatePicker.databaseTemplates.label"})),e.children),items:Zi.Im.filter((e=>e.shouldShow(this.environment))).map(this.renderPageTemplatePickerItem)}]})}renderMobilePageTemplatePicker(){const e=this.userSettingsPersona.state,t=this.spaceSubscriptionTier.state,i=[{key:"Basic",render:e=>r()("div",{},e.key,e.children),items:Zi.ss.map(this.renderPageTemplatePickerItem)},{key:"Database",render:e=>r()("div",{},e.key,r()("div",{style:this.getGroupTitleStyle({})},void 0,r()(R.FormattedMessage,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})),e.children),items:Zi.Im.filter((e=>e.shouldShow(this.environment))).map(this.renderPageTemplatePickerItem)}];return r()(Ni,{persona:e,subscriptionTier:t,menuListStore:this.props.menuListStore,sectionTitleStyle:this.getGroupTitleStyle({}),handleTemplatePickerEmptyEnter:this.handleTemplatePickerEmptyEnter,sectionsBeforeMobilePreviewSections:i,renderMobileTemplatePreviewItem:this.renderMobileTemplatePreviewItem})}renderMoreTemplatePickerItem(e,t){return{key:e,render:t=>d.createElement(Ai.Z,n()({},t,{key:e,format:"page-menu-item",title:r()(R.FormattedMessage,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,Si.o)({width:20,fill:this.theme.lightIconColor,marginRight:10}),locked:!1,right:this.maybeRenderEnterIcon(t)})),action:()=>t.setState(!0)}}renderPlaceholder(){const e=this.renderPlaceholderMessage();return e?r()("div",{style:Hi.placeholderWrapStyle},void 0,r()("div",{style:this.getPlaceholderStyle(),onClick:this.handleEmptyPageContinueClick},void 0,e)):void 0}renderPlaceholderMessage(){const{device:e}=this.environment,t=this.props.store.isTemplate(),i=Vi.Z.state.online,o=this.isCollectionPage(),n=this.collectionHasTemplates(),s=o&&!n;return i?t?r()(R.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:e.isMobile}}):e.isMobile?s?r()(R.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:!this.canConfigureCollection(),templatebutton:e=>r()(Pt.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick},void 0,e)}}):e.isTablet?r()(R.FormattedMessage,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):r()(R.FormattedMessage,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):s?r()(R.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:!this.canConfigureCollection(),templatebutton:e=>r()(Pt.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick},void 0,e)}}):!(0,Ei.GD)(this.environment,this.publicEditModeStore.state)||o?r()(R.FormattedMessage,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"}):void 0:r()(R.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:e.isMobile}})}isCollectionPage(){return Boolean(this.props.store.getAssociatedCollectionStore())}canConfigureCollection(){const{store:e}=this.props,t=e.getAssociatedCollectionStore(),i=t&&t.getParentBlockStore();return xi.eD({collectionStore:t,collectionViewBlockStore:i,checkNavigableAncestorLocked:!0})}collectionHasTemplates(){const{store:e}=this.props,t=e.getParentCollectionStore(),i=t?t.getTemplatePageStores():void 0;return i&&i.length>0}isTemplatePage(){return this.props.store.isTemplate()}navigateToBlock(e){const{mainEditorCurrentBlockStore:t}=_i.default.state,i=t?(0,Ii.ZP)({store:t,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:ui.tY.LinkInPage}):(0,Ii.ZP)({store:e,fullyQualified:!1,pageVisitSource:ui.tY.LinkInPage});this.navigate(i)}isSuggestedTemplatesExperimentEnabled(){const{currentUserSettingsStore:e,currentSpaceStore:t}=_i.default.state,i=null==e?void 0:e.getSettings();if(!e||!i||!t)return!1;const o="team"===t.getPlanType(),n="en-US"===p.SP,s=null==i?void 0:i.dismissed_new_page_suggested_templates,r=(null==i?void 0:i.persona)&&["productDesign","product","marketing","eng"].includes(i.persona),a=(0,Ti.e2)(e);return o&&n&&!s&&r&&("number"==typeof a&&a<7)&&void 0!==this.suggestedTemplatesExperimentVariant.state}getPersonaLabel(){const{currentUserSettingsStore:e}=_i.default.state,t=null==e?void 0:e.getSettings();switch(null==t?void 0:t.persona){case"design":case"marketing":return t.persona;case"product":return"product management";case"eng":return"engineering";default:return""}}getPlaceholderStyle(){return{...xe.ZD,color:this.theme.lightTextColor,paddingTop:5,paddingBottom:24}}getGroupTitleStyle(e){const{device:t}=this.environment,i={...xe.ZD,marginTop:null!=e&&e.isFirst?8:16,marginBottom:4,textTransform:"uppercase",letterSpacing:1,fontSize:t.isMobile?12:11,color:this.theme.lightTextColor,display:"flex",alignItems:"center",fontWeight:500};return(0,Ei.GD)(this.environment,this.publicEditModeStore.state)?{...i,textTransform:void 0,letterSpacing:0,fontSize:13}:i}getIconStyle(e){return e.isLargeDatabaseIcon?{width:16,fill:this.theme.lightIconColor,marginLeft:2,marginRight:12}:{width:20,fill:this.theme.lightIconColor,marginRight:10}}maybeRenderEnterIcon(e){return(0,Ei.GD)(this.environment,this.publicEditModeStore.state)&&e.focused&&(0,vi.U)({width:14,marginRight:6,fill:this.theme.lightIconColor})}}function Wi(e){let{variant:t,persona:i,menuListStore:o,handleTemplatePickerEmptyEnter:n,sectionsBeforeSuggested:s,sectionsAfterSuggested:a,suggestedTemplateSectionHeader:l,renderPageTemplatePickerItem:c}=e;window.__c={n:"TemplatePickerWithSuggestedTemplates"};const p=(0,se.useDependency)(se.deps.AppTemplates),h=(0,d.useMemo)((()=>{var e;if("control"===t)return[...s,...a];const o=null===(e=p.value)||void 0===e?void 0:e.templatePickerItems.getSuggestedTemplates(t,i).slice(0,3);if(o&&o.length>0){const e={key:"Suggested Templates",render:e=>r()("div",{},e.key,l(!0),e.children),items:o.map(c)};return[...s,e,...a]}if("pending"===p.status){const e={key:"Suggested Templates",render:e=>r()("div",{},e.key,l(!1),r()(ue.Z,{})),items:[]};return[...s,e,...a]}return[...s,...a]}),[p,t,i,s,a,l,c]);return r()(kt.Z,{type:kt.i.Vertical,store:o,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:n,sections:h})}function Ni(e){let{persona:t,subscriptionTier:i,menuListStore:o,sectionTitleStyle:n,handleTemplatePickerEmptyEnter:s,sectionsBeforeMobilePreviewSections:a,renderMobileTemplatePreviewItem:l}=e;window.__c={n:"TemplatePickerMenuWithMobilePreviewSections"};const c=(0,se.useDependency)(se.deps.AppTemplates),p=(0,d.useMemo)((()=>{if(!c.value)return[];return c.value.templatePickerItems.getMobilePreviewTemplates({userPersona:t,subscriptionTier:i}).map((e=>{let{category:t,sectionHeaderMessage:i,templates:o}=e;return{key:t,render:e=>r()("div",{},e.key,r()("div",{style:n},void 0,d.createElement(R.FormattedMessage,i)),e.children),items:o.map(l)}}))}),[t,l,n,i,c]),h="pending"===c.status?r()("div",{style:{marginTop:n.marginTop,marginBottom:n.marginBottom,paddingLeft:10}},void 0,r()(ue.Z,{})):void 0;return d.createElement(d.Fragment,null,r()(kt.Z,{type:kt.i.Vertical,store:o,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:s,sections:[...a,...p]}),h)}Hi.displayName="TemplatePicker",Hi.contextTypes={...Mi.wK,...$e.w},Hi.wrapStyle={width:"100%",display:"flex",flexDirection:"column",marginBottom:"14vh"},Hi.placeholderWrapStyle={width:"100%"};const Ki=(0,R.injectIntl)(Hi),zi=(0,d.forwardRef)((function(e,t){let{store:i,disabled:o,templatePickerMenuListStore:n,onClick:s,legacyStyles:a}=e;window.__c={n:"PageEditor"};const l=(0,ci.Dl)();(0,pi.q7)(null==l?void 0:l.domLock);const c=(0,Ft.Nr)(i),p=(0,Ft.xC)(i),h=(0,Ft.Qg)(i),g=(0,oe.VK)((()=>i.isLocked()||o),[i,o]);return(0,oe.VK)((()=>hi.default.checkGate("layout_editor_on_the_grid")),[])?d.createElement(ge.cx,{className:ti.QS0,onClick:s,ref:t},!h&&r()(gi.Z,{store:i.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:g,experimentalLayout:!0}),c&&r()(ge.bU,{},void 0,r()(ue.Z,{})),p&&r()(ge.bU,{},void 0,r()(Ki,{store:i,menuListStore:n}))):r()(ge.hy,{},void 0,r()("div",{className:ti.QS0,onClick:s,style:a},void 0,!h&&r()(gi.Z,{store:i.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:g}),c&&r()(ue.Z,{}),p&&r()(Ki,{store:i,menuListStore:n})))}));function Ui(e){let{onMouseEnter:t,onMouseMove:i,onMouseLeave:o,headerControls:n}=e;return r()("div",{onMouseEnter:t,onMouseMove:i,onMouseLeave:o},void 0,n)}var Gi=i(82356),ji=i(14871),$i=i(63296),Qi=i(62878),qi=i(13555);const Xi=(0,R.defineMessages)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function Yi(e){window.__c={n:"GtmFavoriteButtons"};const{blockId:t}=e,i=(0,Ce.O7)(),o=(0,R.useIntl)(),n=(0,d.useCallback)((()=>{(0,Qi.M)({environment:i,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,i]),s=(0,d.useCallback)((()=>{const e=`${Pe.default.domainBaseUrl}/ai-gtm/${(0,st.cj)(t)}`;ji.RD({environment:i,stringValue:e,copiedMessage:Xi.linkCopied})}),[t,i]);return r()("div",{style:{marginTop:12,marginBottom:12}},void 0,r()($i.Z,{onClick:s,icon:Ie.N},void 0,o.formatMessage(Xi.share)),i.currentUser.isLoggedIn()&&r()($i.Z,{onClick:n,style:{marginLeft:12},icon:Gi.l},void 0,o.formatMessage(Xi.add)))}var Ji=i(50478),eo=i(41883),to=i(12867),io=i(65091);function oo(e){var t;window.__c={n:"PagePropertiesSection"};const{collectionStore:i,schema:o,store:s,format:a}=e,l=(0,R.useIntl)(),c=(0,Ce.O7)(),p=(0,d.useRef)(null),h=(0,oe.qz)(void 0,jt.Z),g=(0,Te.yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(Ji.C$+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"}})),[]),u=(0,oe.VK)((()=>Boolean(s.isAssociatedCollectionAPageTree())),[s]),m=(a.collection_page_properties||[]).filter((e=>{var t;return null===(t=a.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))})),S=(0,oe.VK)((()=>{const e=s.getModel(),t="on"===hi.default.getGroup("default-new-page-property-to-hide-when-empty")?y.iB(a,o,void 0,y.j5.Collection):i.getFormat(),n=t&&t.property_visibility;if(n){return m.map((t=>({visibility:"show",hasValue:!Boolean(e&&(0,v.no)({block:e,property:t.property,schema:o,getRecordModel:s.getRecordModel,userId:c.currentUser.id,userTimeZone:(0,C.r)(),intl:l})),...t,...n.find((e=>e.property===t.property))})))}return m?m.map((e=>({...e,visibility:"show",hasValue:Boolean(s.getPropertyValue(e.property))}))):[]}),[s,a,o,i,m,l,c.currentUser.id]),f=(0,oe.VK)((()=>Ct.Z.state.forceShowProperties),[]),[P,k]=(0,d.useMemo)((()=>E.uK(S,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}))),[S,o]),b=function(e){return(0,oe.VK)((()=>{if(!hi.default.checkGate("ai_favorites"))return!1;const t=(0,qi.OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e])}(i),M=P.concat(k),{paddingLeft:w,paddingRight:T,width:x}=e,I=((null===(t=p.current)||void 0===t?void 0:t.clientWidth)??Number.MAX_VALUE)<Math.min(5,P.length)*to.Uv;let B;return B=!u||c.device.isMobile||I?r()("div",{style:{paddingBottom:8}},void 0,d.createElement(eo.Z,n()({},e,{showHiddenProperties:f,mergedProperties:u?M:S})),d.createElement(io.ZP,n()({},e,{mergedProperties:u?M:S}))):d.createElement(to.ZP,n()({},e,{rowLength:5,compactProperties:P,hiddenProperties:k})),d.createElement("div",{style:g.pageProperties,onMouseEnter:()=>{h.setState({...h.state,mouseEntered:!0})},onMouseLeave:()=>{h.setState({...h.state,mouseEntered:!1})},ref:p},r()("div",{style:{paddingLeft:w,paddingRight:T,width:x,maxWidth:"100%",padding:u?"10px 0":"8px 0",margin:"0 auto"}},void 0,r()("div",{style:{paddingLeft:w,paddingRight:T,width:x,maxWidth:"100%",paddingTop:"8px",margin:"0 auto"}},void 0,B,b&&r()(Yi,{blockId:s.id}))))}function no(e){window.__c={n:"PageProperties"};const{store:t,format:i,collectionStore:o,disabled:n,blockPropertyValueOverlayStore:s,isInPeekRenderer:a}=e,l=(0,oe.VK)((()=>o.getSchema()),[o]),d=(0,oe.VK)((()=>t.isLocked()),[t]);return r()(oo,{store:t,collectionStore:o,schema:l,format:i,disabled:n,locked:d,width:"100%",blockPropertyValueOverlayStore:s,isInPeekRenderer:a})}const so=e=>{let{store:t,isEditable:i,headerControls:o,hasCover:s,isInSidePeek:a,isInMiniPeek:l,headerFocusStore:c,paddingLeft:p,paddingRight:g,openMenuOnMount:u,openMenuOnMountCallback:m,...S}=e;window.__c={n:"PageTitleWithIcon"};const{device:v,WindowSizeStore:y}=(0,Ce.O7)(),C=v.isMobile&&!s,f=!v.isMobile&&(a||l),P=(0,oe.VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),k=(0,oe.VK)((()=>t.canEdit()),[t]),b=(0,oe.VK)((()=>l?0:y.getSafePaddingLeftCSS(p)),[l,y,p]),M=(0,oe.VK)((()=>y.getSafePaddingRightCSS(g)),[y,g]),w=(0,d.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,h.E)(t)&&c.setState(!0)}),[c]),T=(0,d.useCallback)((e=>{c.setState(!1)}),[c]),x=r()(Me,{store:t,isEditable:i,hasCover:s,isInSidePeek:a,isInMiniPeek:l,openMenuOnMount:u,openMenuOnMountCallback:m}),E=d.createElement(Ue,n()({store:t,isInSidePeek:a,isInMiniPeek:l,paddingLeft:p,paddingRight:g},S));return r()("div",{style:{maxWidth:"100%",paddingLeft:b,width:"100%"},onClick:e=>{e.stopPropagation()}},void 0,r()(ae.p,{onFocus:w,onBlur:T,allowSelectionWithin:!1,style:{pointerEvents:"none"}},void 0,C&&o,!f&&x,!C&&o),r()("div",{style:{paddingRight:M}},void 0,f?r()("div",{style:{display:"flex",alignItems:"flex-start"}},void 0,x,E):E),P?r()(He.Z,{store:P,canEdit:k}):null)};var ro=i(74169),ao=i(3553),lo=i(80365),co=i(57254),po=i(11599),ho=i(83055),go=i(70177),uo=i(87279),mo=i(39500),So=i(45162),vo=i(98165),yo=i(66430),Co=i(45010),fo=i(77546),Po=i(89086),ko=i(18245),bo=i(49427),Mo=i(5162),wo=i(886),To=i(16772),xo=i(80796),Eo=i(73329),Io=i(29755),Bo=i(77144),Do=i(22294),_o=i(19671);class Vo extends g.default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const Lo=Vo;var Ro=i(94896),Fo=i(91551),Zo=i(13023),Ao=i(88923),Oo=i(69784),Ho=i(27724),Wo=i(17963);function No(e){return!!e.isIOS&&"on"===hi.default.getGroup("multi-select-new-page-view-block-layout")}class Ko extends ee.Z{constructor(){super(...arguments),this.contentEl=null,this.clickedAddIconState=!1,this.openResolvedDiscussionPopup=()=>{this.stores.resolvedDiscussionButtonPopupStore.setState({open:!0}),this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0})},this.getContentWrapEl=()=>this.contentEl,this.collectionContextStore=new wo.Z(this.environment),this.discussionInputStore=new si.Z(this.environment,(0,B.C)(this.props.store.pointer.spaceId)),this.documentViewHorizontalOffset=this.createComputedStore((()=>{const{store:e}=this.props;return this.marginCommentsVisible.state&&!this.props.store.isFullWidth()?(0,ne.gC)(this.environment,(0,xi.en)(e),(0,xi.Ks)(e)):0})),this.isCompletionsUiVisible=this.createComputedStore((()=>Boolean((0,Y.RR)(To.default.state)))),this.storeTypes={headerFocusStore:g.default.createClass(!1),headerMouseStore:jt.Z,detailsFocusStore:g.default.createClass(!1),detailsMouseStore:jt.Z,pageViewBlockStore:re.Z,resolvedDiscussionButtonPopupStore:Ut.Z,backlinksButtonPopupStore:Ut.Z,templatePickerMenuListStore:yt.Z,pageDescriptionStore:Lo,loadingPageCoverStore:g.default.createClass(!1)},this.headerAndBottomControlsStore=this.createComputedStore((()=>{if(this.isMiniPeekContext())return{bottomControls:[]};let e=[],t=[];const i=this.pageExpandedBacklinksRenderState(),o=this.pageDiscussionsRenderState({disableDiscussionInput:!1});e=this.getTopControls(),t=this.getBottomControls(i,o);const n=this.getCommentControlPlacement({isTopControlsEmpty:0===e.length,isBottomControlsEmpty:0===t.length,discussionsRenderState:o});"top"===n?e.push(this.renderAddDiscussion({isBottomControl:!1})):"bottom"===n&&t.push(this.renderAddDiscussion({isBottomControl:!0}));return{headerControls:r()("div",{style:this.getHeaderControlsStyle(),className:"notion-page-controls"},void 0,e),bottomControls:t}})),this.hasCoverStore=this.createComputedStore((()=>this.props.store.hasCover())),this.hasIconStore=this.createComputedStore((()=>this.props.store.hasIcon())),this.renderBacklinksIcon=e=>(0,M.J)({...e,transform:"rotate(180deg)"}),this.titleStore=this.createComputedStore((()=>this.props.store.getTitleStore())),this.handleAddIconClick=()=>{this.clickedAddIconState=!1},this.handleAddRandomIconClick=()=>{const{store:e}=this.props;N.createAndCommit({userAction:"PageViewBlock.handleAddRandomIconClick",environment:this.environment,perform:t=>{H.is({store:e,transaction:t})}}),this.clickedAddIconState=!0},this.handleAddRandomCoverClick=async()=>{const{store:e}=this.props,{environment:t}=this,i=e.getCoverStore();if(!i)return;if(i.getValue())return;this.stores.loadingPageCoverStore.setState(!0);const o=(await se.deps.pageCovers.loader()).default;N.createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:t,perform:t=>{const n=Object.keys(o),s=n[E.MX(0,n.length-1)],r=o[s],a=r.items[E.MX(0,r.items.length-1)],l=a.coverUrl,d=a.position;j.sO({store:i,value:l,transaction:t}),H.Mp({store:e,coverPosition:d,transaction:t})}}),this.stores.loadingPageCoverStore.setState(!1)},this.handleAddDiscussion=async()=>{this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0}),F.ZW8(this.environment,{from:"page_comments"}),await c.default.afterNextFlush(),Q.NX({store:this.discussionInputStore.state.textStore})},this.handleShowBacklinks=()=>{this.setBacklinksToggleState(!0)},this.handleShowDiscussion=()=>{this.setDiscussionToggleState(!0)},this.handleAddDescriptionClick=()=>{const{device:e}=this.environment,{pageDescriptionStore:t}=this.stores,{currentUserSettingsStore:i}=_i.default.state,o=this.getDescriptionStore();G({environment:this.environment,pageId:this.props.store.id,store:t,userSettingsStore:i,isExpanded:!0,descriptionStore:o}),c.default.afterNextFlush((()=>{const t=this.getDescriptionStore();t&&(e.isMobileBrowser||Q.NX({store:t}))}))},this.handleHeaderFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,h.E)(t)&&this.stores.headerFocusStore.setState(!0)},this.handleHeaderBlur=()=>{this.stores.headerFocusStore.setState(!1)},this.handleDetailsFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,h.E)(t)&&this.stores.detailsFocusStore.setState(!0)},this.handleDetailsBlur=()=>{this.stores.detailsFocusStore.setState(!1)},this.handleHeaderMouseEnter=()=>{xo.Z.state.isDragging||Oo.Z.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!0})},this.handleHeaderMouseLeave=()=>{xo.Z.state.isDragging||Oo.Z.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!1})},this.handleDetailsMouseEnter=()=>{xo.Z.state.isDragging||Oo.Z.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!0})},this.handleDetailsMouseLeave=()=>{xo.Z.state.isDragging||Oo.Z.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!1})},this.handleHideDescription=()=>{const{pageDescriptionStore:e}=this.stores,{currentUserSettingsStore:t}=_i.default.state,i=this.props.store.id,o=this.getDescriptionStore();G({environment:this.environment,pageId:i,isExpanded:!1,store:e,userSettingsStore:t,descriptionStore:o})},this.handleShowDescription=()=>{const{pageDescriptionStore:e}=this.stores,{currentUserSettingsStore:t}=_i.default.state,i=this.props.store.id,o=this.getDescriptionStore();G({environment:this.environment,pageId:i,isExpanded:!0,store:e,userSettingsStore:t,descriptionStore:o})},this.handleHeaderMouseEnterThrottled=E.P2(this.handleHeaderMouseEnter,100),this.handleHeaderMouseLeaveDebounced=E.Ds(this.handleHeaderMouseLeave,100),this.handleDetailsMouseEnterThrottled=E.P2(this.handleDetailsMouseEnter,100),this.handleDetailsMouseLeaveDebounced=E.Ds(this.handleDetailsMouseLeave,100),this.handleTitleEditText=e=>{const t=this.titleStore.state;t&&($.eP({environment:this.environment,store:this.props.store}),e.isAtStartOfLine?Q.N_({store:t}):Q.NX({store:t}))},this.handleTitleEsc=e=>{const{onTitleEsc:t}=this.props;Q.ZH(this.environment),$.ZH(this.environment),t&&t(e)},this.handleTitleTab=e=>{const{store:t,preventDefaultTitleTabBehavior:i}=this.props;if(i)return!0;if(e.preventDefault(),this.shouldShowProperties()){const e=this.getFormat();if(e&&e.collection_page_properties){const i=e.collection_page_properties.find(((e,t)=>this.canOpenProperty(e.property)));i&&c.default.afterNextFlush((()=>{O.bA({environment:this.environment,blockPropertyValueOverlayStore:this.getBlockPropertyOverlayStore(),collectionContextStore:this.collectionContextStore,store:t,property:i.property,format:te.C.Page})}))}}},this.handleTitleUntab=e=>{if(this.props.preventDefaultTitleUntabBehavior)return!0;this.handleTitleEsc(e)},this.handlePlaceholderClick=()=>{const{store:e}=this.props;!e.canEdit()||this.props.store.isLocked()||this.shouldShowSpinner()||(0,mo.X9)()||N.createAndCommit({userAction:"PageViewBlock.handlePlaceholderClick",environment:this.environment,perform:t=>{q.ls({environment:this.environment,store:e,transaction:t})}})},this.handlePlaceholderWrapClick=e=>{(0,Bi.ZP)({event:e,context:Bi.Af.EditorClick,callback:this.handlePlaceholderClick})},this.handleTitleChange=()=>{this.stores.templatePickerMenuListStore.reset()},this.handleAddTitleClick=()=>{const e=this.titleStore.state;e&&($.ZH(this.environment),Q.NX({store:e}))},this.numberOfBacklinks=this.createComputedStore((()=>(0,lo.L)(this.props.store,this.environment).backlinks.length)),this.discussionToggleStore=this.createComputedStore((()=>{const e=this.props.store.id;return"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.getToggleState({environment:this.environment,type:"discussion",id:e})})),this.backlinksToggleStore=this.createComputedStore((()=>{const e=this.props.store.id;return"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.getToggleState({environment:this.environment,type:"backlinks",id:e})})),this.inlinePropertyIDsStore=this.createComputedStore((()=>{const e=this.getFormat();if(!e)return;const{store:t}=this.props,i=e.collection_page_sections||[],o=this.getSchema();return i.filter((e=>{const i=o[e.section];if(!i||"relation"!==i.type)return;const n=t.getPropertyValue(e.section),s=v.j$({relationValue:v.rq(n),propertySchema:i,getRecordModel:t.getRecordModel}).length;return"inline"===e.visibility&&o[e.section]&&0!==s})).map((e=>e.section))})),this.minimalPropertyIDsStore=this.createComputedStore((()=>{const e=this.getFormat();if(!e)return;const{store:t}=this.props,i=e.collection_page_sections||[],o=this.getSchema();return i.filter((e=>{const i=o[e.section];if(!i||"relation"!==i.type)return;const n=t.getPropertyValue(e.section),s=v.j$({relationValue:v.rq(n),propertySchema:i,getRecordModel:t.getRecordModel}).length;return"minimal"===e.visibility&&o[e.section]||"inline"===e.visibility&&o[e.section]&&0===s})).map((e=>e.section))})),this.showTemplatePickerStore=this.createComputedStore((()=>{const{store:e,loadingContainerStore:t}=this.props,i=this.environment.currentUser.isLoggedIn(),o=this.pageContext&&this.pageContext.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&i&&(!(null!=o&&o.hasPublicPermission)||"edit"===(null==o?void 0:o.permission))&&!this.shouldShowSpinner()&&t.state.ready&&!this.isExternallySyncedPage()&&(!(0,Ei.GD)(this.environment,o)||"completionPopup"!==To.default.state.type))})),this.emptyTitlePlaceholderStore=this.createComputedStore((()=>{const{store:e,titlePlaceholder:t}=this.props,i=e.getModel();return t??(null==i?void 0:i.getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,C.r)(),intl:_e.default.getIntl()}))})),this.shouldShowCollectionViewBlockTitle=this.createComputedStore((()=>{const{store:e}=this.props;if(e.getCollectionViewSourceCollectionStore())return!0;const t=this.titleStore.state;if(!t)return!1;if(_.QaF(t.getValue()))return!0;return!!(0,Po.J5)(t)})),this.titleStyleStore=this.createComputedStore((()=>{const{device:e}=this.environment,{store:t,paddingLeft:i,paddingRight:o}=this.props,n=t.getFormat(),s=!!n.page_small_text,r=t.isCollectionView(),a=s||e.isMobile||r||this.isInSidePeek()?32:40,l=(0,Le.$3)(this.environment)+(0,Le.vJ)(this.environment)-i-o;return{color:this.theme.regularTextColor,fontWeight:V.Z.fontWeight.bold,lineHeight:1.2,fontSize:a,fontFamily:V.Z.getHeaderFontFamily({pageFont:n.page_font,locale:p.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:e.isSafari?"optimizeSpeed":void 0,width:t.isCollectionView()&&!this.props.store.getAppContainerBlockStore()?l:void 0,...this.props.titleStyle}})),this.collectionViewProps=this.createComputedStore((()=>{const{store:e,context:t,disabled:i}=this.props;if(e.isCollectionView())return{store:e,context:t,disabled:i,collectionViewId:this.getCurrentCollectionViewId()}})),this.pageIconProps=this.createComputedStore((()=>({store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:this.isInSidePeek(),openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:()=>{this.clickedAddIconState=!1}}))),this.pageTitleProps=this.createComputedStore((()=>({store:this.props.store,disabled:!this.canEdit(),isInSidePeek:this.isInSidePeek(),isInMiniPeek:this.isMiniPeekContext(),paddingLeft:this.props.paddingLeft,paddingRight:this.props.paddingRight,extraStyles:this.titleStyleStore.state,titlePlaceholder:this.emptyTitlePlaceholderStore.state,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab}))),this.descriptionProps=this.createComputedStore((()=>{const e=this.pageDescriptionRenderState();if("visible"===e.type)return{type:"description",disabled:!this.isEditable(),canEdit:this.canEdit(),locked:this.props.store.isLocked(),pageId:this.props.store.id,toggleStore:this.stores.pageDescriptionStore,descriptionStore:e.descriptionStore,collectionStore:e.collectionStore,userSettingsStore:e.currentUserSettingsStore}}))}get registries(){return super.registries.concat(bo.Z)}getContentInnerWidth(){const e=this.getContentWrapEl();if(e){const t=e.getBoundingClientRect().width,i=this.getContentPadding()??{paddingLeft:0,paddingRight:0};return t-i.paddingLeft-i.paddingRight}}getContentPadding(){const e=this.getContentWrapEl();if(e){if(No(this.environment.device))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),i=parseFloat(t.getPropertyValue("padding-left")),o=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:E.i2(i)?0:i,paddingRight:E.i2(o)?0:o}}}willMount(e){super.willMount(e);const{store:t}=this.props,{currentUserSettingsStore:i}=_i.default.state,o=t.id;this.stores.pageDescriptionStore=new Lo,function(e){const{pageId:t,store:i,userSettingsStore:o,descriptionHasText:n}=e;let s=n;z(o).includes(t)&&(s=!1),i.setState({isExpanded:s})}({pageId:o,store:this.stores.pageDescriptionStore,userSettingsStore:i,descriptionHasText:this.descriptionHasText()})}willMountOrUpdate(e){super.willMountOrUpdate(e);const{store:t,context:i}=e;var o;"page"===this.environment.RouterStore.state.route.name&&(null===(o=this.environment.mobileNative)||void 0===o||o.markTransitionReady({type:"page",id:this.props.store.id}));const n=this.getPageCollectionStore();if(this.collectionContextStore.collectionStore()!==n&&n){const e=n.getParentBlockStore();this.collectionContextStore.setContext({type:"collectionPage",collectionViewBlockStore:e,collectionStore:n})}if(i===re.S.Frame){const e=this.pageContext&&this.pageContext.publicEditModeStore.state;null!=e&&e.hasPublicPermission&&"edit"===e.permission&&!t.isTemplate()?Z.Bw({bannerStore:this.getBannerStore(),id:"EditingPageBanner",contentKey:"editing_page",styleKey:pe.v.White}):Z.qL({bannerStore:this.getBannerStore(),id:"EditingPageBanner"})}if(this.isFrameOrPeekContext()){const e=vo.oZ(t),i=vo.wf(t),o=vo.D0(t);if((0,D.nV)(e))Z.Bw({bannerStore:this.getBannerStore(),id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:pe.v.Red,blockStore:t});else if(i)Z.Bw({bannerStore:this.getBannerStore(),id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:t,styleKey:pe.v.Red});else if(o)Z.Bw({bannerStore:this.getBannerStore(),id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:pe.v.Red});else for(const t of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])Z.qL({bannerStore:this.getBannerStore(),id:t})}if(this.isFrameOrPeekContext()&&(t.isTemplate()?Z.Bw({bannerStore:this.getBannerStore(),id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:pe.v.Beige,blockStore:t,context:this.props.context,disabled:this.props.disabled}):t.isInsideFactoryOrDuplicateBlocksAction()?Z.Bw({bannerStore:this.getBannerStore(),id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:pe.v.Beige,blockStore:t,context:this.props.context,disabled:this.props.disabled}):Z.qL({bannerStore:this.getBannerStore(),id:"CollectionTemplatePage"})),i===re.S.Frame){Io.Z.state.pageMap[t.id]?Z.Bw({bannerStore:this.getBannerStore(),id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:pe.v.Blue,blockStore:t}):Z.qL({bannerStore:this.getBannerStore(),id:"ImportingEvernotePage"})}t.useCrdt()?Z.Bw({bannerStore:this.getBannerStore(),id:"CrdtPage",contentKey:"crdt_page",styleKey:pe.v.Beige}):Z.qL({bannerStore:this.getBannerStore(),id:"CrdtPage"})}didMount(){const{device:e}=this.environment,{store:t,context:i}=this.props,o=this.titleStore.state,n=this.environment.RouterStore.state;let s;var r,a;"page"===n.route.name&&(s=n.route.mobileData,W.updateMetricData({is_push:null===(r=s)||void 0===r?void 0:r.isPush}));if((0,se.startDangerouslyLoadingDependenciesForConsumer)("clipboardActions"),(0,se.startDangerouslyLoadingDependenciesForConsumer)("tableActions"),(0,go.L)(),e.isPhone){const{PageScroller:e}=Co.Z;if(e){if(e.scrollerEl()&&this.canEdit()&&!this.hasCoverStore.state){const t=this.getTitlePaddingHeightWithPaddingTop();e.scrollTo(t)}}}o&&this.shouldSelectTitleOnMount()&&($.eP({environment:this.environment,store:t}),Q.NX({store:o}),e.isAndroid&&(0,Mo.Y)("supportsUntitledPageAutoSelectOnStart")&&(null===(a=this.environment.mobileNative)||void 0===a||a.forceShowSoftKeyboard()));if(i===re.S.Frame&&!this.props.store.isCollectionView()){const e=this.environment.RouterStore.state.initialRoute.name,{initialRenderCompleted:t,initialRenderAfterLoginCompleted:i,initialLoadCachedPageChunkCalledAt:o}=Bo.Z.state;if(t)if(i||"login"!==e){var l;ko.default.measure("navigation_page_render",{environment:this.environment,data:{is_push:(null===(l=s)||void 0===l?void 0:l.isPush)??!1}})}else ko.default.measure("initial_page_render_after_login",{environment:this.environment}),Bo.Z.update((e=>({...e,initialRenderAfterLoginCompleted:!0})));else{var d;W.setInitialRenderCompleted();const t=performance.now();W.measureSubMetric({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:t}),ko.default.measureFromAppStart({metricName:"initial_page_render",endTime:t},{environment:this.environment,data:{...ho.I(),initial_route:e,did_prefetch_for_root_route:yo.l4,is_editable:this.isEditable(),prefetched_page_view_block:null===(d=this.environment.prefetchCache)||void 0===d?void 0:d.didPrefetchPageViewBlock},shouldSendIfStatsigNotInitialized:!0}),void 0!==o&&ko.default.measureFromAppStart({metricName:"load_cached_page_chunk_wait_time",endTime:o},{environment:this.environment,data:{initial_route:e},shouldSendIfStatsigNotInitialized:!0})}this.markTransitionReadyIfNewPageRender()}if(this.collectionContextStore){const e=(0,ht.vS)(this.collectionContextStore);ko.default.measure("collections.open_item_page_lag",{environment:this.environment,data:{...e,peek_mode:Ao.default.getPeekMode()}})}this.maybeSelectFirstBlockForAiOnboarding()}willUnmount(){super.willUnmount(),this.isFrameOrPeekContext()&&(Z.qL({bannerStore:this.getBannerStore(),id:"DeletedPage"}),Z.qL({bannerStore:this.getBannerStore(),id:"CollectionTemplatePage"}))}renderCollectionPageViewBlock(){const{store:e,context:t,style:i,paddingLeft:o,paddingRight:n}=this.props,{WindowSizeStore:s}=this.environment;if(!e.isCollectionView())return;if(t===re.S.CollectionPageView){let e=this.renderCollectionPageViewContent();return(0,So.Aw)(this.environment)&&(e=r()(de.O,{displayName:"PageContent",style:{...Ko.wrapStyle,...i},disabled:!this.canEdit()||this.props.store.isLocked()},void 0,e)),e}const a=this.pageDiscussionsRenderState({disableDiscussionInput:!0});return d.createElement(d.Fragment,null,this.renderCollectionHeader(),"visible"===a.type&&r()("div",{style:{paddingLeft:s.getSafePaddingLeftCSS(o),paddingRight:s.getSafePaddingRightCSS(n)}},void 0,r()(di,{store:this.props.store,showDiscussionInput:a.showDiscussionInput,unresolvedDiscussionStores:a.unresolvedDiscussionStores})),this.renderCollectionView())}renderCollectionPageViewContent(){const{store:e}=this.props;if(e.isCollectionView())return r()("div",{style:{display:"flex",width:"100%",justifyContent:"center",paddingTop:5}},void 0,r()(ce.Z,{isVisible:!0,animationStyle:{width:this.getAdjustedPageWidth()},render:()=>r()("div",{style:{maxWidth:"100%",minWidth:0}},void 0,this.renderDocumentView())}),!this.environment.device.isMobile&&r()(le,{pageBlockStore:this.props.store,isVisible:this.marginCommentsVisible.state,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl}))}layoutV2_getPageContent(){const{bottomControls:e}=this.headerAndBottomControlsStore.state,t=this.pageDiscussionsRenderState({disableDiscussionInput:!1}),i=this.pagePropertiesRenderState(),o=Lt({collectionStore:this.getPageCollectionStore(),format:this.getFormat(),sectionPropertyIds:this.inlinePropertyIDsStore.state}),s=this.pageExpandedBacklinksRenderState(),a=this.marginCommentsRenderState(),c=this.getLayoutContentStyles(),p=this.layoutV2_getLayoutType();return r()(ge.Ar,{type:p,withBottomPadding:!0},void 0,r()(ge.hy,{},void 0,this.renderPageCover()),r()(ge.bU,{},void 0,this.layoutV2_getPeekPageHeaderControls()),r()(ge.bU,{},void 0,this.layoutV2_getPeekPageTitleWithIcon()),r()(ae.p,{allowSelectionWithin:!0,className:l()(ge.zx,"layout-header-detailSections")},void 0,"visible"===i.type&&r()(ge.bU,{},void 0,d.createElement(no,i)),"visible"===o.type&&r()(ge.bU,{},void 0,r()(Vt,{topBorder:!1,state:o,store:this.props.store,disabled:this.props.disabled,onMouseEnter:this.handleDetailsMouseEnter,onMouseLeave:this.handleDetailsMouseLeave,blockPropertyValueOverlayStore:this.getBlockPropertyOverlayStore(),isInPeekRenderer:this.isPeekOrMiniPeekContext()})),s&&r()(ge.bU,{},void 0,r()(Zt,{store:this.props.store})),"visible"===t.type&&r()(ge.bU,{},void 0,d.createElement(di,n()({},t,{store:this.props.store})))),e.length>0&&r()(ge.bU,{},void 0,r()("div",{style:this.getDetailControlsSectionStyle(),className:"notion-page-details-controls"},void 0,e)),r()(ge.cx,{className:"layout-editor",style:{minHeight:"170px"}},void 0,d.createElement(zi,{store:this.props.store,disabled:this.props.disabled,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,onClick:this.isEmptyContentBlock()?this.handlePlaceholderWrapClick:void 0,legacyStyles:c.nonIOSLayoutBody,ref:e=>{e&&(this.contentEl=e)}})),"visible"===a.type&&r()(ge.$K,{},void 0,r()(le,{pageBlockStore:this.props.store,isVisible:this.marginCommentsVisible.state,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl})))}layoutV2_getLayoutType(){return this.isPeekContext()?this.isInSidePeek()?"side-peek":"center-peek":this.isFullWidth()?"wide":"default"}layoutV2_getPeekPageHeaderControls(){const{headerControls:e}=this.headerAndBottomControlsStore.state;if(this.isInSidePeek())return r()(Ui,{onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,headerControls:e})}layoutV2_getPeekPageTitleWithIcon(){const{headerControls:e}=this.headerAndBottomControlsStore.state;return this.isInSidePeek()?d.createElement(Ge,n()({},this.pageIconProps.state,this.pageTitleProps.state)):r()("div",{style:this.getHeaderStyle(),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced},void 0,d.createElement(so,n()({},this.pageIconProps.state,this.pageTitleProps.state,{headerControls:e,headerFocusStore:this.stores.headerFocusStore,paddingLeft:0,paddingRight:0})))}layoutV2_renderCollectionPageViewBlock(){const e=this.descriptionProps.state,t=this.pageDiscussionsRenderState({disableDiscussionInput:!1}),i=this.collectionViewProps.state;return this.props.context===re.S.CollectionPageView?this.layoutV2_renderWikiPageView():r()(ge.Ar,{type:"wide"},void 0,r()(ge.bU,{},void 0,r()(Ui,{onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,headerControls:this.renderCollectionHeaderControls()})),r()(ge.bU,{},void 0,d.createElement(Ge,n()({},this.pageIconProps.state,this.pageTitleProps.state))),e&&r()(ge.bU,{},void 0,d.createElement(Jt,e)),"visible"===t.type&&r()(ge.bU,{},void 0,d.createElement(di,n()({},t,{store:this.props.store}))),i&&r()(ge.bU,{},void 0,d.createElement(At,i)))}layoutV2_renderWikiPageView(){return r()(ge.Ar,{type:"collection-page",withBottomPadding:!0},void 0,r()(zi,{store:this.props.store,disabled:this.props.disabled,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,onClick:this.isEmptyContentBlock()?this.handlePlaceholderWrapClick:void 0}))}renderPersisted(){if(this.props.store.getType()===m.Ti.copyIndicator&&(this.props.store.getParentTable()!==I.v||this.props.store.getParentTable()===I.v&&0===Object.keys(this.props.store.getProperties()).length))return r()(je,{});if(this.props.store.isCollectionView())return r()(Qe.L1,{value:this.collectionContextStore},void 0,hi.default.checkGate("layout_collection_view_page")?this.layoutV2_renderCollectionPageViewBlock():this.renderCollectionPageViewBlock());let e=this.shouldRenderLayoutV2()?this.layoutV2_getPageContent():this.getPageContent();return this.collectionContextStore&&this.collectionContextStore.contextType&&(e=r()(Qe.L1,{value:this.collectionContextStore},void 0,e)),(0,So.Aw)(this.environment)?r()(de.O,{displayName:"PageContent",style:{...Ko.wrapStyle,...this.props.style},disabled:!this.canEdit()||this.props.store.isLocked(),shouldSelectOnEnter:this.shouldSelectOnEnter},void 0,e):e}shouldRenderLayoutV2(){const{device:e}=this.environment;return this.isPeekContext()?hi.default.checkGate("layout_side_peek_page"):!(!this.isFrameContext()||e.isMobile)&&hi.default.checkGate("layout_main_frame_page")}getPageContent(){const e=this.isMiniPeekContext(),t=!this.isExternallySyncedPage(),i=-1*this.documentViewHorizontalOffset.state;return d.createElement(d.Fragment,null,e?null:this.renderPageCover(),r()("div",{style:{width:"100%",display:"flex",justifyContent:"center",zIndex:L.db,flexShrink:0}},void 0,r()(ce.Z,{isVisible:!0,animationStyle:{width:this.getAdjustedPageWidth(),translateX:i},render:()=>r()("div",{style:{maxWidth:"100%",minWidth:0}},void 0,this.renderPageHeader())})),t&&r()("div",{style:{display:"flex",width:"100%",justifyContent:"center",paddingTop:5}},void 0,r()(ce.Z,{isVisible:!0,animationStyle:{width:this.getAdjustedPageWidth(),translateX:i},render:()=>r()("div",{style:{maxWidth:"100%",minWidth:0}},void 0,this.renderDocumentView())}),this.props.context===re.S.Frame&&r()(le,{pageBlockStore:this.props.store,isVisible:this.marginCommentsVisible.state,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl})))}renderDetailsDivider(e){return r()("div",{style:{width:"100%",height:1,background:this.theme.regularDividerColor,marginBottom:8}},e)}renderPageHeader(){const{WindowSizeStore:e}=this.environment,{store:t,paddingLeft:i,paddingRight:o}=this.props,{headerControls:n,bottomControls:s}=this.headerAndBottomControlsStore.state,a=[],l=this.pagePropertiesRenderState();"visible"===l.type&&a.push(d.createElement(no,l));const c=Lt({collectionStore:this.getPageCollectionStore(),format:this.getFormat(),sectionPropertyIds:this.inlinePropertyIDsStore.state});"visible"===c.type&&a.push(r()(Vt,{topBorder:!0,state:c,store:t,disabled:this.props.disabled,onMouseEnter:this.handleDetailsMouseEnter,onMouseLeave:this.handleDetailsMouseLeave,blockPropertyValueOverlayStore:this.getBlockPropertyOverlayStore(),isInPeekRenderer:this.isPeekOrMiniPeekContext()}));this.pageExpandedBacklinksRenderState()&&(a.length>0&&a.push(this.renderDetailsDivider(3)),a.push(r()(Zt,{store:this.props.store}))),(0,co.Gh)(this.props.store)&&(0,Ei.jp)(this.environment.device)&&a.push(r()(se.LazyAiInstructionsPagePreferences,{store:this.props.store}));const p=this.pageDiscussionsRenderState({disableDiscussionInput:!1});return"visible"===p.type&&(a.length>0&&a.push(this.renderDetailsDivider(2)),a.push(r()(di,{store:this.props.store,withLegacyInputPadding:!0,showDiscussionInput:p.showDiscussionInput,unresolvedDiscussionStores:p.unresolvedDiscussionStores}))),a.length>0&&a.push(this.renderDetailsDivider(1)),r()(d.Fragment,{},void 0,r()("div",{style:this.getHeaderStyle(),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced},void 0,r()(so,{store:t,isEditable:this.isEditable(),headerControls:n,hasCover:this.hasCoverStore.state,isInSidePeek:this.isInSidePeek(),isInMiniPeek:this.isMiniPeekContext(),headerFocusStore:this.stores.headerFocusStore,paddingLeft:i,paddingRight:o,openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:this.handleAddIconClick,disabled:!this.canEdit(),extraStyles:this.titleStyleStore.state,titlePlaceholder:this.emptyTitlePlaceholderStore.state,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab})),this.isMiniPeekContext()?null:r()("div",{style:this.getHeaderStyle(),onMouseEnter:this.handleDetailsMouseEnterThrottled,onMouseMove:this.handleDetailsMouseEnterThrottled,onMouseLeave:this.handleDetailsMouseLeaveDebounced},void 0,r()(ae.p,{onFocus:this.handleDetailsFocus,onBlur:this.handleDetailsBlur,allowSelectionWithin:!0,style:{paddingLeft:e.getSafePaddingLeftCSS(i),paddingRight:e.getSafePaddingRightCSS(o),maxWidth:"100%",width:"100%"}},void 0,a,s.length>0&&r()("div",{style:this.getDetailControlsSectionStyle(),className:"notion-page-details-controls"},void 0,s),r()(J.Z,{store:t},t.id))))}getTopControls(){const e=[],t=this.renderAddIcon();t&&e.push(t);const i=this.renderAddCover();return i&&e.push(i),e}getBottomControls(e,t){const i=[],o=!e&&this.renderShowBacklinks();o&&i.push(o);const n="hidden"===t.type,s=n&&this.renderShowDiscussion();s&&i.push(s);const r=this.renderResolveDiscussionButtonPopupMenu();r&&!n&&i.unshift(r);const a=this.renderMinimalPageSections();return a&&i.push(a),i}getCommentControlPlacement(e){const{isTopControlsEmpty:t,isBottomControlsEmpty:i,discussionsRenderState:o}=e,{device:n}=this.environment;return this.shouldRenderAddDiscussion()?"hidden"!==o.type||i?n.isMobile&&t?"bottom":"top":"bottom":"hidden"}renderCollectionHeaderControls(){return r()("div",{onFocus:this.handleHeaderFocus,onBlur:this.handleHeaderBlur,style:{...this.getHeaderControlsStyle()},className:"notion-page-controls"},void 0,this.renderAddIcon(),this.renderAddCover(),this.renderLinkedCollectionViewBlockAddTitle(),this.renderSprintBoardDescriptionToggle(),this.renderDescriptionToggle())}renderCollectionHeader(){const{paddingLeft:e,paddingRight:t}=this.props,{WindowSizeStore:i}=this.environment,o=this.shouldShowCollectionViewBlockTitle.state,n=r()("div",{style:{display:"flex",alignItems:"flex-start"}},void 0,r()(Me,{store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:this.isInSidePeek(),isInMiniPeek:this.isMiniPeekContext(),openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:this.handleAddIconClick}),o&&r()(Ue,{store:this.props.store,disabled:!this.canEdit(),isInSidePeek:this.isInSidePeek(),isInMiniPeek:this.isMiniPeekContext(),paddingLeft:e,paddingRight:t,extraStyles:this.titleStyleStore.state,titlePlaceholder:this.emptyTitlePlaceholderStore.state,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab})),s=this.pagePropertiesRenderState(),a=this.pageDescriptionRenderState();return r()("div",{style:this.getHeaderStyle(),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced},void 0,this.renderPageCover(),r()(ce.Z,{isVisible:!0,animationStyle:{width:this.getAdjustedPageWidth()},render:()=>r()("div",{style:{maxWidth:"100%",paddingLeft:i.getSafePaddingLeftCSS(e)}},void 0,this.renderCollectionHeaderControls(),r()("div",{style:{paddingRight:i.getSafePaddingRightCSS(t),marginBottom:8}},void 0,n,this.renderSprintBoardDescription(),"visible"===a.type&&r()(Jt,{disabled:!this.isEditable(),canEdit:this.canEdit(),locked:this.props.store.isLocked(),pageId:this.props.store.id,toggleStore:this.stores.pageDescriptionStore,descriptionStore:a.descriptionStore,collectionStore:a.collectionStore,userSettingsStore:a.currentUserSettingsStore}),"visible"===s.type&&d.createElement(no,s)))}))}renderPageCover(){const{WindowSizeStore:e}=this.environment,{store:t,paddingLeft:i,paddingRight:o,pageCoverHeight:n}=this.props,s=t.isCollectionView()?"20vh":n;return r()(ae.p,{allowSelectionWithin:!1,style:this.getPageCoverStyle(),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced},void 0,r()(ro.Z,{height:s,store:t,disabled:!this.isEditable(),paddingLeft:e.getSafePaddingLeftCSS(i),paddingRight:e.getSafePaddingRightCSS(o),proxyWidth:e.state.width}))}isExternallySyncedPage(){const{store:e}=this.props;if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(m.Ti.externalObjectInstancePage)}renderAddIcon(){const{device:e}=this.environment;if(this.isEditable()&&!(0,ke.qG)(this.props.store.id)&&!this.hasIconStore.state)return r()(ve.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomIconClick,icon:f.o},"add-icon",e.isSmallPhone?r()(R.FormattedMessage,{id:"pageViewBlock.add.pageIconMobile",defaultMessage:"Icon"}):r()(R.FormattedMessage,{id:"pageViewBlock.add.pageIcon",defaultMessage:"Add icon"}))}renderAddCover(){const{device:e}=this.environment;if(this.isEditable()&&!(0,ke.qG)(this.props.store.id)&&!this.hasCoverStore.state)return!0===this.stores.loadingPageCoverStore.state?r()(ve.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,disabled:!0,icon:k},"add-cover-loading",e.isSmallPhone?r()(R.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobileLoading",defaultMessage:"Loading"}):r()(R.FormattedMessage,{id:"pageViewBlock.add.pageCoverLoading",defaultMessage:"Loading cover"})):r()(ve.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomCoverClick,icon:k},"add-cover",e.isSmallPhone?r()(R.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobile",defaultMessage:"Cover"}):r()(R.FormattedMessage,{id:"pageViewBlock.add.pageCover",defaultMessage:"Add cover"}))}renderLinkedCollectionViewBlockAddTitle(){var e;const{store:t}=this.props,{device:i}=this.environment;if(!this.isEditable()||!t.isCollectionView()||t.getCollectionViewSourceCollectionStore())return;return _.QaF(null===(e=this.titleStore.state)||void 0===e?void 0:e.getValue())?void 0:r()(ve.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddTitleClick,icon:x.c},"add-title",i.isSmallPhone?r()(R.FormattedMessage,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):r()(R.FormattedMessage,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"}))}renderSprintBoardDescriptionToggle(){const{store:e}=this.props,{device:t}=this.environment;if(!e.isCollectionView()||!this.isSprintBoard()||!this.isEditable())return;return Boolean(e.getFormat().hide_collection_view_page_description)?r()(ve.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:()=>U({environment:this.environment,store:e,value:!1}),icon:w.z},void 0,t.isSmallPhone?r()(R.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):r()(R.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})):r()(ve.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:()=>{U({environment:this.environment,store:e,value:!0})},icon:w.z},void 0,r()(R.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"}))}renderDescriptionToggle(){const{store:e}=this.props,{device:t}=this.environment;if(e.isCollectionView()&&e.getCollectionViewSourceCollectionStore())return this.shouldShowDescription()?r()(ve.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleHideDescription,icon:w.z},void 0,r()(R.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})):this.isEditable()&&!this.descriptionHasText()?r()(ve.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleAddDescriptionClick,icon:w.z},void 0,t.isSmallPhone?r()(R.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):r()(R.FormattedMessage,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})):this.descriptionHasText()?r()(ve.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleShowDescription,icon:w.z},void 0,t.isSmallPhone?r()(R.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):r()(R.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})):void 0}shouldRenderAddDiscussion(){const{store:e}=this.props;return!po.A$("comments","section_hide")&&(!e.isCollectionView()&&(!e.isInsideCollection()&&(!this.hasDiscussionToShow()&&(!!e.canComment()&&(!!this.environment.currentUser.isLoggedIn()&&!this.stores.pageViewBlockStore.state.forceDiscussionOpen)))))}renderAddDiscussion(e){const{device:t}=this.environment;return r()(ve.Z,{style:this.getControlHoverStyle({isBottomControl:e.isBottomControl}),isLightGray:!0,onClick:this.handleAddDiscussion,icon:b},"add-comment",t.isSmallPhone?r()(R.FormattedMessage,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):r()(R.FormattedMessage,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"}))}renderShowDiscussion(){if(!po.A$("comments","section_hide")&&this.hasDiscussionToShow()){const e=this.getNumberOfComments();return r()(ve.Z,{isGray:!0,onClick:this.handleShowDiscussion,icon:b,style:this.getDetailControlButtonStyle()},"show-comments",r()(R.FormattedMessage,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}}))}}renderShowBacklinks(){const e=this.numberOfBacklinks.state;if(0===e)return;if(po.A$("backlinks","section_hide"))return;const t=t=>{let{onClick:i=E.ZT,tooltipEvents:o={},buttonPopupEvents:s={}}=t;return d.createElement(ve.Z,n()({isGray:!0,icon:this.renderBacklinksIcon,style:this.getDetailControlButtonStyle(),onClick:i},s,o),r()(R.FormattedMessage,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:e}}))},i=r()(ye.Z,{renderTooltip:()=>r()(R.FormattedMessage,{defaultMessage:"Show pages linked to this page",id:"pageViewBlock.show.backlinks.tooltip"}),placement:ye.Z.Placement.Bottom,delayThreshold:400,render:e=>t({tooltipEvents:e,onClick:this.handleShowBacklinks})},"show-backlinks"),o=r()(he.ZP,{buttonPopupStore:this.stores.backlinksButtonPopupStore,popupType:he.Z4.Popup,renderOrigin:e=>t({buttonPopupEvents:e}),render:()=>{const e={menuType:uo.og.Popup,width:500};return d.createElement(me.Z,e,this.numberOfBacklinks.state>0?r()(Zt,{store:this.props.store}):null)}},"backlinks-popup");return po.A$("backlinks","section_collapsed")?o:i}isSprintBoard(){const{store:e}=this.props;return"sprint_board"===e.getFormat().special_page_for_pm_launch}renderSprintBoardDescription(){const{store:e}=this.props;if(this.isSprintBoard()&&!Boolean(e.getFormat().hide_collection_view_page_description))return r()(ei,{})}pageDescriptionRenderState(){if(!this.shouldShowDescription())return{type:"hidden"};const e=this.getDescriptionStore();if(!e)return{type:"hidden"};const{pageDescriptionStore:t}=this.stores;if(!t.isExpanded())return{type:"hidden"};const{store:i}=this.props,{currentUserSettingsStore:o}=_i.default.state;return{type:"visible",descriptionStore:e,currentUserSettingsStore:o,collectionStore:i.getCollectionViewSourceCollectionStore()}}pagePropertiesRenderState(){const{store:e}=this.props;if(e.isCollectionViewPageWithContent())return{type:"hidden"};const t=this.getPageCollectionStore();if(!t)return{type:"hidden"};const i=this.getFormat();return i?{type:"visible",store:e,format:i,collectionStore:t,disabled:!this.canEdit(),blockPropertyValueOverlayStore:this.getBlockPropertyOverlayStore(),isInPeekRenderer:this.isPeekOrMiniPeekContext()}:{type:"hidden"}}renderMinimalPageSections(){const{store:e,disabled:t}=this.props,i=this.getPageCollectionStore();if(!i)return;const o=this.getSchema(),n=this.getFormat(),s=e.isLocked();if(!n)return;const a=this.minimalPropertyIDsStore.state;return a&&a.length?r()(_t,{propertyIds:a,store:e,collectionStore:i,disabled:t,locked:s,schema:o,handleMouseMove:this.handleDetailsMouseEnter,handleMouseLeave:this.handleDetailsMouseLeave,handleContextMenu:()=>{},blockPropertyValueOverlayStore:this.getBlockPropertyOverlayStore(),format:n,type:"minimal",isInPeekRenderer:this.isPeekOrMiniPeekContext()}):void 0}pageDiscussionsRenderState(e){if(po.A$("comments","section_hide"))return{type:"hidden"};const t=this.environment.currentUser.isLoggedIn(),i=this.shouldShowDiscussion(),{store:o}=this.props,n=ut.vV(o,{recursivelyLoadAllDiscussions:!1}),s=!e.disableDiscussionInput&&t&&o.canComment()&&0===n.length&&!this.isExternallySyncedPage();return!i||!s&&0===n.length?{type:"hidden"}:{type:"visible",showDiscussionInput:s,unresolvedDiscussionStores:n}}marginCommentsRenderState(){return this.isFrameContext()?{type:"visible"}:{type:"hidden"}}renderResolveDiscussionButtonPopupMenu(){const{device:e}=this.environment,t=ut.mY(this.props.store,{recursivelyLoadAllDiscussions:!1});if(0===t.length)return;const i=r()(R.FormattedMessage,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:t.length}});return(0,Le.Sx)(this.environment)?r()(ve.Z,{icon:T.k,isGray:!0,style:this.getDetailControlButtonStyle(),onClick:()=>{A.Ib({environment:this.environment,blockStore:this.props.store,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:t.map((e=>e.id))})}},void 0,i):r()(he.ZP,{buttonPopupStore:this.stores.resolvedDiscussionButtonPopupStore,popupType:e.isMobile?he.Z4.SlideUp:he.Z4.Popup,renderOrigin:e=>d.createElement(ve.Z,n()({icon:T.k,isGray:!0,style:this.getDetailControlButtonStyle()},e),i),render:i=>{let o;return o=e.isMobile?{menuType:uo.og.Modal,title:r()(R.FormattedMessage,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:r()(Se.DoneMenuText,{}),onClickRight:i.close,whiteBackground:!0}:{menuType:uo.og.Popup,width:500},d.createElement(me.Z,o,t.map(((e,t,o)=>r()(ao.Z,{store:e,droppable:!0,render:()=>r()(se.LazyDiscussion,{store:e,format:oi.O2.Menu,isFirst:0===t,isOnly:1===o.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:this.props.store,onDismiss:i.close},e.id)},e.id))))}},"resolve-discussions")}renderCollectionView(){const{store:e,paddingLeft:t,paddingRight:i,context:o}=this.props;if(!e.isCollectionView())return;const n=this.getCurrentCollectionViewId();return r()(ie.D,{overridePaddingLeft:t,overridePaddingRight:i,store:e,isFullScreen:!0,viewId:n,disabled:this.props.disabled,hideHeaderActions:o===re.S.InAppTemplatePreview})}renderDocumentView(){const e=this.getLayoutContentStyles(),t=this.isEmptyContentBlock()?this.handlePlaceholderWrapClick:void 0;return No(this.environment.device)?r()("div",{style:e.wrapper},void 0,e.leftPadding&&r()(ae.p,{allowSelectionWithin:!1,style:e.leftPadding,onClick:t}),this.renderDocumentViewContent(e.body,t),e.rightPadding&&r()(ae.p,{allowSelectionWithin:!1,style:e.rightPadding,onClick:t})):this.renderDocumentViewContent(e.nonIOSLayoutBody,t)}renderDocumentViewContent(e,t){const{store:i}=this.props,o=this.shouldShowSpinner(),n=this.showTemplatePickerStore.state;return d.createElement("div",{style:e,ref:e=>{e&&(this.contentEl=e)},className:ti.QS0,onClick:t},!this.isExternallySyncedPage()&&r()(gi.Z,{store:i.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:this.props.store.isLocked()||this.props.disabled,disableHoverMenu:this.isMiniPeekContext()}),o&&r()(ue.Z,{}),this.isFrameOrPeekContext()&&n&&!this.isMiniPeekContext()&&r()(Ki,{store:i,menuListStore:this.stores.templatePickerMenuListStore}),this.isMiniPeekContext()&&this.isEmptyContentBlock()&&r()("div",{style:{paddingLeft:2,color:this.theme.pageTitlePlaceholderTextColor}},void 0,r()(R.FormattedMessage,{defaultMessage:"Add description",id:"text.miniPeek.placeholder"})))}pageExpandedBacklinksRenderState(){return!!this.shouldShowBacklinks()&&0!==this.numberOfBacklinks.state}setDiscussionToggleState(e){const t=this.props.store.id;"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.setToggleState({environment:this.environment,type:"discussion",id:t},e)}setBacklinksToggleState(e){const t=this.props.store.id;"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.setToggleState({environment:this.environment,type:"backlinks",id:t},e)}isCurrentBlock(){return this.props.store===_i.default.state.mainEditorCurrentBlockStore}getBlockPropertyOverlayStore(){return this.isPeekOrMiniPeekContext()?Zo.Z:_o.Z}isEmptyContentBlock(){const{store:e}=this.props;return!e.hasContent()&&(!e.isCollectionView()||e.isType("collection_view_page")&&e.isCollectionViewPageWithContent())}isFullWidth(){const{store:e,context:t}=this.props;if(t===re.S.CollectionPageView)return!0;const{device:i}=this.environment,{isPhone:o}=i,n=e.isFullWidth(),s=e.isCollectionView(),r=this.isPeekOrMiniPeekContext();return n&&!o||s||r||o}getAdjustedPageWidth(){return this.isFullWidth()?"100%":ke.CC}getNumberOfComments(){const{store:e}=this.props;return ut.Xp(e,{recursivelyLoadAllDiscussions:!1})}hasDiscussionToShow(){return this.getNumberOfComments()>0}shouldShowDiscussion(){if(this.stores.pageViewBlockStore.state.forceDiscussionOpen)return!0;const e=po.dy(this.environment,"comments"),t=po.A$("comments","section_collapsed");if(this.props.store.isInsideCollection()&&!this.hasDiscussionToShow()&&(e||t))return!0;if(!this.hasDiscussionToShow())return!1;const i=this.discussionToggleStore.state;return void 0===i?e:i}shouldShowBacklinks(){const e=po.dy(this.environment,"backlinks"),t=this.backlinksToggleStore.state;return void 0===t?e:t}descriptionHasText(){return K(this.getDescriptionStore())}shouldSelectOnEnter(){return 0===Ho.default.state.stores.length}shouldShowDescription(){if("sprint_board"===this.props.store.getFormat().special_page_for_pm_launch)return!0;const e=this.stores.pageDescriptionStore.isExpanded();return(this.descriptionHasText()||this.isEditable())&&e}getDescriptionStore(){const{store:e}=this.props;return e.getCollectionViewSourceDescriptionStore()}shouldShowProperties(){return Boolean(this.getPageCollectionStore())}getPageCollectionStore(){return this.props.store.getAssociatedCollectionStore()}getBannerStore(){return this.isPeekOrMiniPeekContext()?Fo.Z:Eo.Z}getSchema(){return this.props.store.getSchema()}getFormat(){const e=this.getPageCollectionStore();if(!e)return;const t=this.getSchema(),i=e.getFormat();return y.iB(i,t,void 0,y.j5.Collection)}canOpenProperty(e){if(!this.getPageCollectionStore())return!1;const t=this.getSchema()[e];return Boolean(t&&!S.uk.includes(t.type))}shouldShowSpinner(){const{store:e}=this.props;return Boolean(Wo.Z.state.pageMap[e.id])||Ro.Z.state.pages.has(e.id)}isEditable(){return this.canEditCollection()&&!this.props.store.isLocked()&&!this.isExternallySyncedPage()}getCurrentCollectionViewId(){if(this.isCurrentBlock()){const{RouterStore:e}=this.environment;return e.state.route.collectionViewId}}shouldSelectTitleOnMount(){const{device:e}=this.environment,{store:t}=this.props,i=this.titleStore.state,{forceSelectTitleOnMount:o}=this.props;return!!i&&(!!o||!t.isCollectionView()&&(!(e.isMobile&&!(0,zt.NW)(this.environment)&&!(0,Mo.Y)("supportsUntitledPageAutoSelectOnStart"))&&(!_.QaF(i.getValue())||this.isEmptyContentBlock()&&!e.isMobile)))}markTransitionReadyIfNewPageRender(){const{device:e,RouterStore:t}=this.environment,{route:i}=t.state,o=this.props.store;var n;e.isMobileNative&&"page"===i.name&&i.showMoveTo&&o.isEmptyTitle()&&o.isEmptyPage()&&(null===(n=this.environment.mobileNative)||void 0===n||n.markTransitionReady({type:"new_page",id:o.id}))}maybeSelectFirstBlockForAiOnboarding(){if("space_for_ai"!==(0,X.sy)())return;const e=this.props.store.getContentStores()[0],t=X.__.state;e&&e.id===t&&($.eP({environment:this.environment,store:e}),Q.NX({store:e.getBlockTitleStore()}))}isMiniPeekContext(){return this.props.context===re.S.MiniPeekView}isPeekContext(){return this.props.context===re.S.PeekView}isPeekOrMiniPeekContext(){return this.props.context===re.S.PeekView||this.props.context===re.S.MiniPeekView}isFrameContext(){return this.props.context===re.S.Frame}isFrameOrPeekContext(){return this.isFrameContext()||this.isPeekOrMiniPeekContext()}isInSidePeek(){return xi.en(this.props.store)&&(Ao.default.isSidePeekOpen()||Ao.default.isSidePeekClosing.state)}getPageCoverStyle(){const e=this.getHeaderStyle();return e.zIndex=L.ag,e}getHeaderStyle(){const{store:e}=this.props,t={width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flexGrow:0};return e.isCollectionView()&&(e.isLocked()&&(t.cursor="default"),fo.eA(this.environment)&&(t.position="sticky",t.left=0)),t}getTitlePaddingMarginTop(){return this.environment.device.isMobile?16:this.isPeekOrMiniPeekContext()?32:80}getTitlePaddingMarginBottom(){return this.environment.device.isMobile?32:4}getTitlePaddingHeightWithPaddingTop(){return Ko.titlePaddingHeight+this.getTitlePaddingMarginTop()}getHeaderControlsStyle(){const{store:e}=this.props,{device:t}=this.environment,{isMobile:i}=t,o=this.getTitlePaddingMarginTop();let n,s,r;return i?this.hasCoverStore.state?(this.hasIconStore.state,r="block",n=o,s=4):(r="flex",n=o,s=this.getTitlePaddingMarginBottom()):e.isCollectionView()||this.isInSidePeek()?(r="flex",this.hasCoverStore.state?(n=16,s=4):(n=4,s=4)):(r="flex",this.hasIconStore.state?(n=8,s=4):this.hasCoverStore.state?(n=16,s=4):(n=o,s=this.getTitlePaddingMarginBottom())),{display:r,justifyContent:"flex-start",flexWrap:"wrap",marginTop:n,marginBottom:s,marginLeft:-1,color:this.theme.lightTextColor,fontFamily:V.Z.getCompositeFontFamily(p.SP).sans,height:this.environment.device.isMobile?"auto":24,pointerEvents:"auto"}}getDetailControlsSectionStyle(){return{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:this.theme.lightTextColor,fontFamily:V.Z.getCompositeFontFamily(p.SP).sans}}getControlHoverIsVisible(e){const{device:t}=this.environment,i=this.stores.headerMouseStore.state.mouseEntered,o=this.stores.detailsMouseStore.state.mouseEntered,n=this.stores.headerFocusStore.state,s=this.stores.detailsFocusStore.state;return!!t.isMobile||(e?o&&!Do.Z.state.isKeyboardMode||s:i&&!Do.Z.state.isKeyboardMode||n)}getControlHoverStyle(e){let{isBottomControl:t}=e;const{device:i}=this.environment,o=this.getControlHoverIsVisible(t);return{opacity:o?1:0,pointerEvents:o?"auto":"none",transition:"opacity 100ms ease",marginBottom:i.isMobile?0:-16}}getDetailControlButtonStyle(){return{fontWeight:V.Z.fontWeight.medium,color:this.theme.mediumTextColor}}getLayoutContentStyles(){const{device:e}=this.environment,{context:t,paddingLeft:i,paddingRight:o,paddingBottom:n}=this.props,{store:s}=this.props,r=s.getFormat(),a=r.page_font||Ko.defaultFontFamily,l=Ko.fontFamily[a],d=this.isPeekOrMiniPeekContext(),c=this.isEmptyContentBlock()&&d&&!this.showTemplatePickerStore.state&&!this.shouldShowSpinner(),p=t===re.S.FrontPageTemplatePreview||t===re.S.InAppTemplatePreview;let h,g,m;if(e.isMobile)m=e.isAndroid?Ko.defaultAndroidFontSize:Ko.defaultMobileFontSize;else{m=r.page_small_text?Ko.fontSmallSize[a]||Ko.defaultFontSmallSize:Ko.fontSize[a]||Ko.defaultFontSize}let S={},v={},y={};if(!c){const{WindowSizeStore:e}=this.environment,t=e.getSafePaddingLeftCSS(i),s=e.getSafePaddingRightCSS(o);S={gridTemplateColumns:`${t} calc(100% - ${t} - ${s}) ${s}`},h={},g={},v=this.isCompletionsUiVisible.state?{paddingBottom:"600px"}:this.isMiniPeekContext()?{paddingBottom:0}:this.isEmptyContentBlock()?{paddingBottom:"15vh"}:{paddingBottom:n},y={...v,paddingLeft:t,paddingRight:s}}const C=Ko.fontLetterSpacing[a],f=Ko.fontLineHeight[a]||1.5;let P={};d&&(P=this.isMiniPeekContext()?{minHeight:Ko.miniPeekViewContentMinHeight,zIndex:1,paddingLeft:0,paddingRight:0}:{minHeight:Ko.peekViewContentMinHeight,zIndex:1});let k={};p&&(k={margin:"0 auto"});let b={};if(e.isPhone&&!s.isCollectionView()&&this.canEdit()&&!this.hasCoverStore.state){const e=132,t=this.getTitlePaddingHeightWithPaddingTop();b={minHeight:`calc(100vh - ${u.g+e-t}px)`}}return{wrapper:{flexShrink:0,flexGrow:1,display:"grid",gridTemplateColumns:"100%",maxWidth:"100%",width:"100%",...S},leftPadding:h,body:{display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:l,fontSize:m,letterSpacing:C?`${C}em`:void 0,lineHeight:f,zIndex:L.ke,...v,...P,...k,...b},rightPadding:g,nonIOSLayoutBody:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:l,fontSize:m,letterSpacing:C?`${C}em`:void 0,lineHeight:f,width:"100%",zIndex:L.ke,...y,...P,...k,...b}}}}Ko.wrapStyle={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},Ko.defaultFontFamily=V.Z.getCompositeFontFamily(p.SP).sans,Ko.defaultFontSize=16,Ko.defaultMobileFontSize=16,Ko.defaultAndroidFontSize=17,Ko.defaultFontSmallSize=14,Ko.titlePaddingHeight=28,Ko.peekViewContentMinHeight=240,Ko.miniPeekViewContentMinHeight=80,Ko.fontFamily={serif:V.Z.getCompositeFontFamily(p.SP).serif,mono:V.Z.getCompositeFontFamily(p.SP).mono},Ko.fontSize={serif:17,mono:15},Ko.fontSmallSize={serif:15,mono:14},Ko.fontLetterSpacing={serif:0,mono:.055},Ko.fontLineHeight={serif:1.6,mono:1.6};const zo=Ko},70177:(e,t,i)=>{i.d(t,{L:()=>p});var o=i(13991),n=i(65669),s=i(90902),r=i(24990);const a={ko:()=>i.e(692).then(i.bind(i,13547)),es:()=>i.e(883).then(i.bind(i,98610)),de:()=>i.e(3224).then(i.bind(i,36802)),fr:()=>i.e(5038).then(i.bind(i,96627)),pt:()=>i.e(2138).then(i.bind(i,88048)),zh:()=>i.e(7835).then(i.bind(i,41787)),ja:()=>i.e(6377).then(i.bind(i,28202)),da:()=>i.e(7677).then(i.bind(i,99815)),fi:()=>i.e(6970).then(i.bind(i,65651)),nb:()=>i.e(3031).then(i.bind(i,92967)),nl:()=>i.e(2579).then(i.bind(i,86541)),sv:()=>i.e(382).then(i.bind(i,63462))};let l=!1,d=!1;async function c(e){for(const[i,o]of Object.entries(e.emojiLocaleKeywords)){var t;s.Q4[i]={...s.Q4[i],keywords:[...o,...(null===(t=s.Q4[i])||void 0===t?void 0:t.keywords)||[]]}}await r.Z.waitUntilLoaded(),r.Z.update((t=>{let{emojiByName:i,...o}=t;return{...o,emojiByName:{...i,...e.emojiByName}}}))}const p=(0,n.Z)((async()=>{await async function(){d||(await c(await i.e(3552).then(i.bind(i,62706))),d=!0)}(),await async function(){if(l)return;const[e]=o.SP.split("-");e in a&&(await c(await a[e]()),l=!0)}()}))},17031:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(35431);class n extends o.Z{findCollectionTemplatePickerItemFromStore(e){if(e)return this.find((t=>t.props.templateStore===e))}}const s=new n},65955:(e,t,i)=>{i.d(t,{o:()=>s});var o=i(23174),n=i.n(o);i(67294);const s=(0,i(45238).I)("addPage",{viewBox:"0 0 14 14",svg:n()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},89767:(e,t,i)=>{i.d(t,{R:()=>s});var o=i(23174),n=i.n(o);i(67294);const s=(0,i(45238).I)("collectionInbox",{viewBox:"0 0 14 14",svg:n()("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},18557:(e,t,i)=>{i.d(t,{z:()=>s});var o=i(23174),n=i.n(o);i(67294);const s=(0,i(45238).I)("flag",{viewBox:"0 0 13 14",svg:n()("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},82356:(e,t,i)=>{i.d(t,{l:()=>s});var o=i(23174),n=i.n(o);i(67294);const s=(0,i(45238).I)("import",{viewBox:"0 0 16 16",svg:n()("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},70663:(e,t,i)=>{i.d(t,{h:()=>s});var o=i(23174),n=i.n(o);i(67294);const s=(0,i(45238).I)("replace",{viewBox:"0 0 16 16",svg:n()("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})}}]);