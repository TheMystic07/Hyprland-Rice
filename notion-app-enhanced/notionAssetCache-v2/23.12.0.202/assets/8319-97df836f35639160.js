"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8319],{33338:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(23174),o=i.n(n),s=(i(67294),i(480)),r=i(24405),l=i(42853),a=i(64921);function d(e){window.__c={n:"CollectionViewFilterPill"};const{icon:t,title:i,on:n,hasDiff:d,wrapStyle:u,innerStyle:h,hideChevron:m}=e,c=(0,r.Fg)(),g=(0,s.O7)();return o()("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...d&&{position:"relative"},...u}},void 0,o()(a.Z,{disabled:e.disabled,style:p(Boolean(n),c,h,g.device.isMobile),hoveredStyle:n?{background:c.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:n?{background:c.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick},void 0,t,i,!m&&(0,l.i)({width:10,marginLeft:4,marginTop:1,fill:n?c.blueColor:c.lightIconColor})),d&&o()("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===c.mode?c.accentColors.orange[500]:c.accentColors.orange[300],border:`1px solid ${c.contentBackground}`,width:9,height:9,borderRadius:9}}))}function p(e,t,i,n){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:n?28:24,lineHeight:n?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...i}}},255:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(23174),o=i.n(n),s=(i(67294),i(83355)),r=i(53465),l=i(73063);class a extends s.Z{constructor(){super(...arguments),this.styles={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}}}renderComponent(){const{onClick:e,disabled:t}=this.props,i=this.styles,{device:n}=this.environment,s=n.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return o()(l.Z,{icon:r.X,onClick:e,disabled:t,disableBackground:!0,style:s})}}a.displayName="MenuItemRemoveButton";const d=a},8319:(e,t,i)=>{i.d(t,{z:()=>q,Z:()=>U});var n=i(10434),o=i.n(n),s=i(23174),r=i.n(s),l=i(67294),a=i(83355),d=i(47453),p=i(72126),u=i(97880),h=i(5366),m=i(75024),c=i(49085);class g extends c.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const M=g;var v=i(33338),y=i(42922),b=i(52275),C=i(89728),S=i(53437),k=i(72495),T=i(75689),I=i(91642),f=i(92785),B=i(91155),F=i(87279),R=i(29798),Z=i(72087),O=i(78140),x=i(32163),w=i(43765),P=i(40721),L=i(77137),D=i(47082);class A extends a.Z{constructor(){super(...arguments),this.storeTypes={requestStore:Z.Z,menuListStore:R.Z},this.renderRequest=(e,t,i)=>{const{labelText:n,value:s}=this.props,{menuListStore:a}=this.stores,d=e=>l.createElement(k.Z,o()({},e,{title:n.resultSectionTitle,loading:!i}));if(e)return f.log({level:"error",from:n.componentDebugName,type:"requestFailed",error:(0,B.Ui)(e),data:{miscDataToConvertToString:{query:s}}}),r()(d,{},void 0,r()(w.Z,{title:r()(h.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})}));if(!t)return r()(d,{},void 0,r()(w.Z,{title:r()(h.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})}));if(t&&0===t.length)return r()(d,{},void 0,r()(w.Z,{title:r()(h.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})}));const p={key:"results",items:t.map(this.getResultMenuItem),render:d};return r()(x.Z,{type:x.i.Vertical,store:a,initialFocus:0,sections:[p]})},this.handleMenuInputRemoveLast=()=>{const{items:e,onRemove:t}=this.props,i=p.Z$(e);i&&t(i)},this.getResultMenuItem=e=>{const{renderResultMenuItem:t,onConfirm:i}=this.props;return{key:e,action:()=>i(e),render:i=>t(e,i)}},this.styles={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}}}renderComponent(){const{value:e,items:t,performRequest:i}=this.props,{requestStore:n}=this.stores,o={query:e,current:t};return l.createElement(O.Z,this.getMenuProps(),r()(L.Z,{debounce:100,requestStore:n,request:o,performRequest:i,render:this.renderRequest}))}renderTokenInput(){const{labelText:e,value:t,items:i,disabled:n,onChange:o,renderToken:s,onRemove:l,onClear:a}=this.props,d=i.map((e=>s(e,{onRemove:()=>l(e)})));return r()(D.Z,{focus:!this.isMobile()||void 0,focusAfterAnimation:!0,format:D.Z.Format.FilterValue,tokens:d,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:this.handleMenuInputRemoveLast,onClearButtonClick:a,value:t,onChange:o,showClearButton:!0,disabled:Boolean(n),style:this.styles.inputMenu})}getMenuProps(){const{onDismiss:e,labelText:t}=this.props,i=this.styles;if(this.isMobile()){return{menuType:F.og.Modal,title:t.title,right:r()(P.DoneMenuText,{}),onClickRight:e,header:this.renderTokenInput()}}return{menuType:F.og.Popup,onClickOutside:e,header:this.renderTokenInput(),...i.menu}}isMobile(){const{device:e}=this.environment;return e.isMobile}}A.displayName="SearchTokenInputMenu";const E=A;let q=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class z extends a.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=l.createRef(),this.storeTypes={componentStore:M},this.renderMobileFilterSummary=e=>{const{title:t,items:i,renderItemForSummary:n}=this.props,{disableFilters:o}=e,s=this.styles,a={...m.mK,...s.summary},d=i.length-1,p=r()("ul",{style:a},void 0,i.map(((e,t)=>r()("li",{style:s.summaryItem},e,r()(l.Fragment,{},void 0,n(e),t!==d&&","," ")))));return r()(T.Z,{disabled:o,onClick:this.handleMenuOpenMobile,onClickClear:this.clearItems,label:t,title:p})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:i}=this.props,{componentStore:{state:n}}=this.stores;return l.createElement(l.Fragment,null,l.createElement(E,o()({},this.props,{value:n.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),this.clearItems()},onRemove:this.handleFilterRemove,renderToken:e})),t&&r()(k.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"}},void 0,r()(C.Z,{onClick:()=>{this.clearItems()}},void 0,r()(h.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})),i&&r()(y.Z,{onClick:()=>{this.handleMenuClose("applyButton")}},void 0,r()(h.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"}))))},this.handleMenuOpen=e=>{this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:i}=this.stores;this.clearInput(),i.setState({...i.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:i}=this.stores,{indexToReplace:n}=i.state;"number"==typeof n&&n<t.length?this.replaceItem(n,e):t.includes(e)&&z.Mode.Pill?this.removeItem(e):this.addItem(e),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleFilterRemove=e=>{this.removeItem(e)},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:i}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const n=e?e(i.state):i.state;i.setState({...n,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.removeItem=e=>{const{items:t,onChange:i}=this.props;i(t.filter((t=>t!==e)))},this.clearItems=()=>{const{onChange:e}=this.props;e([])},this.replaceItem=(e,t)=>{const{items:i,onChange:n}=this.props;n(i.slice(0,e).concat(t,i.slice(e+1)))},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:m.yv(this.environment,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===this.props.mode?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:n}}=this.stores,o=i||n.isMenuOpen;let s;const l=(()=>e===z.Mode.Section?(s=t,this.renderSectionOrigin()):e===z.Mode.Button?this.renderButtonOrigin():e===z.Mode.Pill?this.renderPillOrigin():void(0,u.t1)(e))();return r()(I.Z,{title:s,marginAfter:e===z.Mode.Section,style:this.styles.sectionMenuItem},void 0,e!==z.Mode.Pill&&this.renderFilters({disableFilters:o,showLabel:!1}),l,r()(S.ZP,{popupType:S.ZP.PopupType.Popup,placementToOrigin:S.ZP.Placement.Bottom,alignmentToOrigin:S.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:n.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0}))}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:n}=this.props,o=this.styles,s=this.getThemeColors(),a={...o.menuItem,...s.buttonMenuItem};return l.createElement("div",{ref:this.origin,style:o.menuItemWrapper},r()(b.Z,{disabled:i||this.isMenuOpen(),icon:e(o.icon),title:t,focused:n,onClick:e=>this.handleMenuOpen(),style:a}))}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:n}=this.props,o=this.styles,s=this.props.mode===q.Pill&&this.props.hasItemsSelected;return l.createElement("div",{ref:this.origin,style:o.menuItemWrapper},r()(v.Z,{on:s,icon:e({...o.icon,...n}),title:r()("span",{},void 0,t),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:i?.4:1}}))}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=this.styles,n=this.getThemeColors();return r()(l.Fragment,{},void 0,l.createElement("div",{ref:this.origin,style:i.menuItemWrapper}),r()(b.Z,{disabled:t||this.isMenuOpen(),icon:(0,d.R)(i.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...i.appendListItemButton,...n.appendListItemButton}}))}renderMobile(e){const{disabled:t}=this.props,i=t||this.isMenuOpen(),n=e===z.Mode.Section?this.renderMobileFilterSummary({disableFilters:i}):this.renderMobileButtonOrigin({disableFilters:i});return r()(S.ZP,{popupType:S.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:n,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:i}=this.props,n=this.styles;return r()(b.Z,{disabled:e.disableFilters,focused:!1,icon:t({...n.icon}),title:i,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:n}=this.environment,o=t.map(((t,o)=>r()("li",{},`${t}_${o}`,i(t,{disabled:e.disableFilters,onRemove:()=>this.handleFilterRemove(t),onClick:()=>n.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(o)}))));return r()("ul",{style:m.mK},void 0,o)}addItem(e){const{items:t,onChange:i}=this.props,n=t.concat(e);i(p.jj(n))}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},appendListItemButton:{color:this.theme.lightTextColor}}}}z.displayName="SearchTokenFilter",z.Mode=q;const U=z},75689:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(10434),o=i.n(n),s=i(23174),r=i.n(s),l=i(67294),a=i(83355),d=i(82990),p=i(52275),u=i(24006),h=i(255);class m extends a.Z{constructor(){super(...arguments),this.styles={menuItem:{background:void 0,minHeight:void 0,fontSize:this.environment.device.isMobile?d.Z.fontSize.UISmall.mobile:d.Z.fontSize.UIRegular.desktop,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}renderComponent(){const{disabled:e,label:t,title:i,onClick:n,isToggle:s,...a}=this.props,d=this.getThemeColors(),u=this.styles,h=r()("span",{style:d.menuItemLabel},void 0,t);return l.createElement(p.Z,o()({focused:!1},a,{inline:s,disabled:e,icon:h,title:i,right:this.renderRight(),onClick:n,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:u.menuItem,desktopIconStyle:u.menuItemLabel}))}renderRight(){const{disabled:e}=this.props,t=this.styles.rightWrapper;return this.props.isToggle?r()("div",{style:t},void 0,r()(u.Z,{on:this.props.isToggleActive,onClick:this.props.onClick})):r()(h.Z,{disabled:e,onClick:this.props.onClickClear})}getThemeColors(){return{menuItemLabel:{color:this.theme.lightTextColor}}}}m.displayName="SearchFilterSummaryMenuItem";const c=m},91642:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(10434),o=i.n(n),s=i(67294),r=i(83355),l=i(72495);class a extends r.Z{constructor(){super(...arguments),this.styles={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}}}renderComponent(){const{title:e,marginAfter:t,desktopStyle:i,desktopTitleStyle:n,...r}=this.props,a=this.styles,d=(t||i)&&{...t&&a.marginAfter,...i},p=n?{...a.desktopTitleStyle,...n}:a.desktopTitleStyle;return s.createElement(l.Z,o()({isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:p,shouldShowBottomDivider:!1,title:e,style:r.style},r))}}a.displayName="SearchSectionMenuItem";const d=a}}]);