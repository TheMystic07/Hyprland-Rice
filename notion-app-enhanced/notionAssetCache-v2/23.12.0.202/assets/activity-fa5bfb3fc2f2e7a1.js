"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1471],{18021:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K});var r=o(10434),i=o.n(r),s=o(23174),n=o.n(s),a=(o(57658),o(67294)),d=o(83355),l=o(40902),c=o(15145),u=o(41432),h=o(39068),p=o(55061),g=o(89101),v=o(21202),m=o(6287),b=o(13493),A=o(70279),y=o(33709),f=o(15047),S=o(99108),O=o(97880),M=o(5366),T=o(17652),k=o(57559),P=o(27289),_=o(18669),R=o(99786),w=o(66096),Z=o(80821),B=o(66602),E=o(85893),I=o(70690),C=o(64540),L=o(30582),D=o(87383),F=o(62987),N=o(51925),V=o(17022),U=o(69616),j=o(12472),W=o(36081),G=o(22649),X=o(78976),x=o(1136),H=o(45669),Y=o(84076),q=o(63381),z=o(13658);class $ extends d.Z{constructor(){super(...arguments),this.renderBlockEdit=(e,t,o)=>{const{tabArgs:r}=this.props,{source:i}=r;let s=this.getRecordModel({table:v.iU,id:e.block_id});s&&s.type===u.Ti.tableRow&&(s=this.getRecordModel({table:v.iU,id:s.parent_id}));const a=s?s.getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}):g._j.root,d=this.environment.device.isMobile;return"block-deleted"===e.type?e.block_data.block_value.type===u.Ti.page?n()(Y.Z,{href:a,onClick:()=>(0,V.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,G.OD)({source:i,isMobile:d})},t,n()(q.Z,{edit:e,rootStore:this.props.rootStore})):n()("div",{style:(0,G.OD)({source:i,isMobile:d})},t,n()(q.Z,{edit:e,rootStore:this.props.rootStore})):n()(Y.Z,{href:a,onClick:()=>(0,V.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,G.OD)({source:i,isMobile:d})},t,n()(q.Z,{edit:e,rootStore:this.props.rootStore}))},this.renderCollectionPropertyEdit=(e,t)=>{if("collection-property-changed"!==e.type)return;const{source:o}=this.props.tabArgs,r=this.environment.device.isMobile;return n()(Y.Z,{href:t,innerStyle:(0,G.OD)({source:o,isMobile:r})},void 0,n()(q.Z,{edit:e,rootStore:this.props.rootStore}))},this.getRecordStore=e=>this.props.rootStore.getRecordStore(this.props.rootStore,e),this.getSpaceStore=e=>k.H2.createChildStore(this.props.rootStore,{table:f.bx,id:e}),this.getDiscussionContext=()=>{const e=(0,U.cr)({activity:this.props.activity,rootStore:this.props.rootStore});if(e)return e.context}}willMountOrUpdate(){this.warmCommentData(),this.environment.KatexStore.loadIfNeeded(this.getDiscussionContext)}warmCommentData(){if("commented"===this.props.activity.type){const t=this.getRecordStore({table:y.qF,id:this.props.activity.discussion_id,spaceId:this.props.activity.space_id});if(t.isDefined()){const o=t.getCommentStores();for(const t of o){var e;null===(e=t.getCreatedByStore())||void 0===e||e.load()}}}}renderComponent(){const{activity:e,rootStore:t,tabArgs:o,isLast:r,useRedesignedIA:i}=this.props;switch(e.type){case"block-edited":return this.renderBlockEditActivity(e);case"block-property-edited":return n()(_.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"collection-row-created":case"collection-row-deleted":return this.renderCollectionRowActivity(e);case"top-level-block-created":case"top-level-block-deleted":return this.renderTopLevelBlockActivity(e);case"permissions-edited":return this.renderPermissionsActivity(e);case"permission-group-edited":return this.renderPermissionGroupActivity(e);case"user-mentioned":return n()(D.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"commented":return(0,T.H7)()?n()(w.P,{activity:e,tabArgs:o,rootStore:t,isLast:r}):n()(R.w5,{activity:e,tabArgs:o,rootStore:t,isLast:r,useRedesignedIA:i});case"user-invited":return n()(L.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"collection-edited":return this.renderCollectionEdited(e);case"collection-view-edited":return this.renderCollectionViewEdited(e);case"collection-property-edited":return this.renderCollectionPropertyEdited(e);case"reminder":return n()(I.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"page-locked":case"page-unlocked":return this.renderPageLockActivity(e);case"email-edited":return n()(Z.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"access-requested":return n()(P.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"page-deleted":case"page-restored":case"page-permanently-deleted":return this.renderPageDeleteOrRestoreActivity(e);case"team-membership-edited":return n()(C.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"private-content-transferred":return n()(E.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"permission-group-mentioned":return n()(B.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});case"verification-expired":return n()(F.Z,{activity:e,rootStore:t,tabArgs:o,isLast:r});default:(0,O.t1)(e)}}renderBlockEditActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=(0,S.hI)(e.edits).filter((e=>{const{block_value:t}="block-changed"===e.type?e.block_data.after:e.block_data;return t.parent_table!==A.x_}));if(0===d.length)return;const l=this.getBlockStore(d[0].navigable_block_id);if(!l.isDefined())return;const c=(0,U.P6)({edits:d,rootStore:o}),u=(0,U.XW)(c),h=n()(X.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {pageTitle}} other {{authorOrAuthors} edited {pageTitle}}}",id:"activity.blockEdited.header",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h}})),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:l.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:l.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(z.Z,{visible:5,items:d.map(((t,o)=>this.renderBlockEdit(t,o,e)))}),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionRowActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=e.edits[0],l=this.getBlockStore(e.collection_row_id);if(!l.isDefined())return;if(!l.getProperties())return;const c=(0,U.P6)({edits:e.edits,rootStore:o}),u=(0,U.XW)(c),h=n()(X.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p="collection-row-created"===d.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {pageTitle}} other {{authorOrAuthors} created {pageTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h},id:"activity.collectionRowCreated.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {pageTitle}} other {{authorOrAuthors} deleted {pageTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h},id:"activity.collectionRowDeleted.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:l.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:l.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderTopLevelBlockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=e.edits[0],l=this.getBlockStore(e.top_level_block_id);if(!l.isDefined())return;const c=l.hasSpacePermission(),u=(0,U.P6)({edits:e.edits,rootStore:o}),h=(0,U.XW)(u),p=n()(X.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});let g;return g=c?"top-level-block-created"===d.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created workspace page {pageTitle}} other {{authorOrAuthors} created workspace page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockWorkspaceCreated.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted workspace page {pageTitle}} other {{authorOrAuthors} deleted workspace page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockWorkspaceDeleted.header"}):"top-level-block-created"===d.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created private page {pageTitle}} other {{authorOrAuthors} created private page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockPrivateCreated.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted private page {pageTitle}} other {{authorOrAuthors} deleted private page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockPrivateDeleted.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,g),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:l.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,notification:r,icon:n()(N.BE,{authors:u}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})))}renderPermissionsActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s,source:d}=t;if(!e.edits)return;const c=(0,S.hI)(e.edits);if(0===c.length)return;let u,h;const p=c[0];if(p.navigable_block_id){const r=this.getBlockStore(p.navigable_block_id);if(!r.isDefined())return;h=n()(X.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u=(0,U.jC)({recordId:r.id,recordType:"block",tab:s,rootStore:o,environment:this.environment})}else{const r=this.getSpaceStore(p.space_id);if(!r.isDefined())return;h=n()(X.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u=(0,U.jC)({recordId:p.space_id,recordType:"space",tab:s,rootStore:o,environment:this.environment})}const{autojoinEdits:g,inheritanceEdits:v,otherEdits:m}=l.md(e.edits),b=[];g.forEach(((t,d)=>{const l=(0,U.P6)({edits:[t],rootStore:o}),c=(0,U.XW)(l);b.push(a.createElement(N.ZP,i()({key:`autojoin-${d}`,timestamp:t.timestamp,header:n()("span",{},void 0,n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} joined {pageOrSpaceName}} other {{authorOrAuthors} joined {pageOrSpaceName}}}",values:{numberOfAuthors:l.length,authorOrAuthors:c,pageOrSpaceName:h},id:"activity.permissionsActivity.header"})),isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:t.navigable_block_id,notification:r,icon:n()(N.BE,{authors:l}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s}))))}));const A=this.environment.device.isMobile;v.forEach(((l,c)=>{const p=(0,U.P6)({edits:[l],rootStore:o}),g=(0,U.XW)(p);let v;"permission-restriction-created"===l.type?v=n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restricted access for {pageOrSpaceName}} other {{authorOrAuthors} restricted access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,pageOrSpaceName:h,inSudoMode:l.inSudoMode},id:"activity.restrictPermissionsForActivity.header"}):"permission-restriction-deleted"===l.type&&(v=n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored inherited access for {pageOrSpaceName}} other {{authorOrAuthors} restored inherited access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,pageOrSpaceName:h,inSudoMode:l.inSudoMode},id:"activity.restorePermissionsForActivity.header"})),b.push(a.createElement(N.ZP,i()({key:`inheritance-${c}`,timestamp:parseInt(e.end_time),header:n()("span",{},void 0,v),isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:l.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()("div",{style:(0,G.OD)({source:d,isMobile:A})},void 0,n()(q.Z,{edit:l,rootStore:this.props.rootStore})),n()(j.Z,{tabArgs:t,activity:e,isMobile:A,environment:this.environment,rootStore:o})))}));const y=(l,c,h)=>{if(l.length>0){const g=(0,U.P6)({edits:l,rootStore:o});b.push(a.createElement(N.ZP,i()({key:c,timestamp:parseInt(e.end_time),header:h,isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:p.navigable_block_id,notification:r,icon:n()(N.BE,{authors:g}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),l.map(((e,t,o)=>n()("div",{style:(0,G.OD)({source:d,isMobile:A})},t,n()(q.Z,{edit:e,rootStore:this.props.rootStore},t)))),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})))}},f=m.filter((e=>!e.inSudoMode));if(f.length>0){const e=(0,U.P6)({edits:f,rootStore:o}),t=(0,U.XW)(e);y(f,"other",n()("span",{},void 0,n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}}",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:h},id:"activity.updatedPermissionsForActivity.header"})))}const O=m.filter((e=>e.inSudoMode));if(O.length>0){const e=(0,U.P6)({edits:O,rootStore:o}),t=(0,U.XW)(e);y(O,"other-sudo",n()("span",{},void 0,n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}} using administrator privileges",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:h},id:"activity.updatedPermissionsForActivityInSudoMode.header"})))}return b}renderPermissionGroupActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s,source:d}=t;if(!e.edits)return;const l=(0,S.hI)(e.edits)[0];if(!l)return;const c=this.getSpaceStore(l.space_id);if(!c.isDefined())return;const u=(0,V.ME)(c.getModel().getRenderUrl({})),h=n()(W.Z,{permissionGroup:(0,p.c_)({activity:e,getRecordValue:this.getRecordValue}),spaceId:e.space_id}),g=(0,U.P6)({edits:e.edits,rootStore:o}),v=this.environment.device.isMobile;return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,this.renderPermissionGroupEditedHeader({activity:e,authors:g,groupName:h})),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:e.space_id,recordType:"space",tab:s,rootStore:o,environment:this.environment}),rootStore:o,notification:r,icon:n()(N.BE,{authors:g}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(Y.Z,{href:u,onClick:()=>(0,V.dG)({...t,environment:this.environment,activity:e}),innerStyle:(0,G.OD)({source:d,isMobile:v})},void 0,n()(q.Z,{edit:l,rootStore:o})),n()(j.Z,{tabArgs:t,activity:e,isMobile:v,environment:this.environment,rootStore:o}))}renderCollectionEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=this.getRecordStore({table:m.v,id:e.collection_id,spaceId:e.space_id});if(!d.isDefined())return;const u=e.edits[0];if(!u)return;const h=d.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),p=(0,U.P6)({edits:e.edits,rootStore:o}),g=(0,U.XW)(p),v=n()(X.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),b="collection-created"===u.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {collectionTitle}} other {{authorOrAuthors} created {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:v},id:"activity.collectionCreated.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {collectionTitle}} other {{authorOrAuthors} edited {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:v},id:"activity.collectionEdited.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,b),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),l.OC(u)&&this.renderCollectionDescriptionEdit(u,h),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionDescriptionEdit(e,t){const{source:o}=this.props.tabArgs,r=this.environment.device.isMobile;return n()(Y.Z,{href:t,innerStyle:(0,G.OD)({source:o,isMobile:r})},void 0,n()(q.Z,{edit:e,rootStore:this.props.rootStore}))}renderCollectionViewEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=this.getRecordStore({table:m.v,id:e.collection_id,spaceId:e.space_id});if(!d.isDefined())return;const l=this.getRecordStore({table:b.n,id:e.collection_view_id,spaceId:e.space_id});if(!l.isDefined())return;const c=(0,S.hI)(e.edits)[0];if(!c)return;const u=this.renderCollectionViewTitle(l,e),h=n()(X.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p=(0,U.P6)({edits:e.edits,rootStore:o}),g=(0,U.XW)(p);let v;return v="collection-view-created"===c.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewCreated.header"}):"collection-view-deleted"===c.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewDeleted.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewEdited.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,v),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionPropertyEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=(0,S.hI)(e.edits),l=d[0];if(!l)return;const u=this.getRecordStore({table:m.v,id:e.collection_id,spaceId:e.space_id});if(!u.isDefined())return;const h=u.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),p="collection-property-changed"===l.type?l.collection_property_data.after:l.collection_property_data,g=(0,U.P6)({edits:e.edits,rootStore:o}),v=(0,U.XW)(g),b=n()(X.Z,{titledRecordStore:u,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),A=this.renderCollectionPropertyTitle(p);let y;return y="collection-property-created"===l.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:b,collectionPropertyTitle:A},id:"activity.collectionPropertyCreated.header"}):"collection-property-deleted"===l.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:b,collectionPropertyTitle:A},id:"activity.collectionPropertyDeleted.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:b,collectionPropertyTitle:A},id:"activity.collectionPropertyEdited.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,y),isLast:this.props.isLast,isPrivate:(0,U.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:g}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(z.Z,{visible:5,items:d.map((e=>this.renderCollectionPropertyEdit(e,h)))}),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderPageLockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=e.edits[0],l=this.getBlockStore(d.navigable_block_id);if(!l.isDefined())return;const c=(0,U.P6)({edits:e.edits,rootStore:o}),u=(0,U.XW)(c),h=n()(X.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p="page-locked"===e.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} locked {blockTitle}} other {{authorOrAuthors} locked {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"activity.pageLocked.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} unlocked {blockTitle}} other {{authorOrAuthors} unlocked {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"activity.pageUnlocked.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isPrivate:(0,U.jC)({recordId:l.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),isLast:this.props.isLast,rootStore:o,navigableBlockId:l.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderPageDeleteOrRestoreActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const d=e.edits[0];if(!d)return;const l=this.getRecordStore({table:v.iU,id:d.navigable_block_id,spaceId:d.space_id});if(!l.isDefined())return;const c=(0,U.P6)({edits:e.edits,rootStore:o}),u=(0,U.XW)(c),h=n()(X.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});let p;return"page-deleted"===e.type?p=n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {blockTitle}} other {{authorOrAuthors} deleted {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pageDeleted.header"}):"page-restored"===e.type?p=n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored {blockTitle}} other {{authorOrAuthors} restored {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pageRestored.header"}):"page-permanently-deleted"===e.type?p=n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} permanently deleted {blockTitle}} other {{authorOrAuthors} permanently deleted {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pagePermanentlyDeleted.header"}):(0,O.t1)(e),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isPrivate:(0,U.jC)({recordId:l.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),isLast:this.props.isLast,rootStore:o,navigableBlockId:l.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:!1},(0,V.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(j.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionPropertyTitle(e){const{theme:t}=this;return n()("span",{style:{...G.nP,whiteSpace:"nowrap"}},void 0,n()(h.ZP,{icon:e.icon,type:e.type,size:12,style:$.svgIconStyle,theme:t}),e.name)}renderCollectionViewTitle(e,t){const{tabArgs:o}=this.props;if(!e.isDefined())return;const r=e.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),i=e.getFormat().collection_view_icon,s=e.getType();return n()(Y.Z,{href:r,onClick:()=>(0,V.V3)({environment:this.environment,activity:t,...o}),external:!1,innerStyle:{...G.lS,...G.nP},inline:!0},void 0,n()(x.F,{viewIcon:i,viewType:s,color:"light",style:{display:"inline-block",verticalAlign:"middle",marginRight:4,marginBottom:2},size:12}),n()(H.Z,{collectionViewName:e.getName(),collectionViewType:e.getType()}))}isTopbarUpdatesMenu(){return"pageUpdatesSidebar"===this.props.tabArgs.tab}renderPermissionGroupEditedHeader(e){const{activity:t,authors:o,groupName:r}=e,i=(0,U.XW)(o),s=(0,S.hI)(t.edits||[])[0];return s?"permission-group-created"===s.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created group {groupName}} other {{authorOrAuthors} created group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:G.nP},void 0,r)},id:"activity.updatedPermissionGroupCreated.header"}):"permission-group-deleted"===s.type?n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted group {groupName}} other {{authorOrAuthors} deleted group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:G.nP},void 0,r)},id:"activity.updatedPermissionGroupDeleted.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:G.nP},void 0,r)},id:"activity.updatedPermissionGroupEditedDefault.header"}):n()(M.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:G.nP},void 0,r)},id:"activity.updatedPermissionGroupEdit.header"})}get getRecordValue(){return this.props.rootStore.getRecordValue}get getRecordModel(){return this.props.rootStore.getRecordModel}getBlockStore(e){return k.G.createChildStore(this.props.rootStore,{table:v.iU,id:e})}}$.displayName="Activity",$.svgIconStyle={width:12,height:12,display:"inline-block",verticalAlign:"middle",marginBottom:2,marginRight:4};const K=$}}]);