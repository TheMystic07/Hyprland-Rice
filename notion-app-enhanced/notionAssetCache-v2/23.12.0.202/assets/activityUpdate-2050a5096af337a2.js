"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7866],{93963:(e,t,o)=>{o.d(t,{z:()=>a});var r=o(23174),i=o.n(r),s=(o(67294),o(24405)),n=o(5366);function a(e){let{color:t,size:o,style:r}=e;window.__c={n:"StatusDot"};const a=(0,n.useIntl)(),l=(0,s.yK)((e=>({dot:{height:o||8,width:o||8,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[o,t,r]);return i()("div",{role:"img","aria-label":a.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},30050:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var r=o(10434),i=o.n(r),s=o(23174),n=o.n(s),a=(o(57658),o(67294)),l=o(83355),d=o(40902),c=o(15145),u=o(41432),h=o(39068),p=o(92785),g=o(55061),v=o(89101),m=o(21202),b=o(6287),A=o(13493),y=o(70279),f=o(33709),S=o(15047),O=o(99108),M=o(97880),T=o(5366),k=o(57559),P=o(1136),_=o(45669),w=o(84076),C=o(63381),R=o(13658),Z=o(99786),B=o(17022),I=o(69616),E=o(12472),D=o(36081),L=o(22649),F=o(78976),N=o(51925);class V extends l.Z{constructor(){super(...arguments),this.renderBlockEdit=(e,t,o)=>{const{tabArgs:r}=this.props,{source:i}=r;let s=this.getRecordModel({table:m.iU,id:e.block_id});s&&s.type===u.Ti.tableRow&&(s=this.getRecordModel({table:m.iU,id:s.parent_id}));const a=s?s.getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}):v._j.root,l=this.environment.device.isMobile;return"block-deleted"===e.type?e.block_data.block_value.type===u.Ti.page?n()(w.Z,{href:a,onClick:()=>(0,B.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,L.OD)({source:i,isMobile:l})},t,n()(C.Z,{edit:e,rootStore:this.props.rootStore})):n()("div",{style:(0,L.OD)({source:i,isMobile:l})},t,n()(C.Z,{edit:e,rootStore:this.props.rootStore})):n()(w.Z,{href:a,onClick:()=>(0,B.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,L.OD)({source:i,isMobile:l})},t,n()(C.Z,{edit:e,rootStore:this.props.rootStore}))},this.renderCollectionPropertyEdit=(e,t)=>{if("collection-property-changed"!==e.type)return;const{source:o}=this.props.tabArgs,r=this.environment.device.isMobile;return n()(w.Z,{href:t,innerStyle:(0,L.OD)({source:o,isMobile:r})},void 0,n()(C.Z,{edit:e,rootStore:this.props.rootStore}))},this.getRecordStore=e=>this.props.rootStore.getRecordStore(this.props.rootStore,e),this.getSpaceStore=e=>k.H2.createChildStore(this.props.rootStore,{table:S.bx,id:e}),this.getDiscussionContext=()=>{const e=(0,I.cr)({activity:this.props.activity,rootStore:this.props.rootStore});if(e)return e.context}}willMountOrUpdate(){this.warmCommentData(),this.environment.KatexStore.loadIfNeeded(this.getDiscussionContext)}warmCommentData(){if("commented"===this.props.activity.type){const t=this.getRecordStore({table:f.qF,id:this.props.activity.discussion_id,spaceId:this.props.activity.space_id});if(t.isDefined()){const o=t.getCommentStores();for(const t of o){var e;null===(e=t.getCreatedByStore())||void 0===e||e.load()}}}}renderComponent(){const{activity:e,rootStore:t,tabArgs:o,isLast:r}=this.props,i=e.type;if(!d.KN(i))return p.log({level:"error",from:"ActivityUpdate",type:"unsupportedActivityType",data:{message:`Activity type ${i} is not supported for ActivityUpdate`}}),null;switch(i){case"block-edited":return this.renderBlockEditActivity(e);case"collection-row-created":case"collection-row-deleted":return this.renderCollectionRowActivity(e);case"top-level-block-created":case"top-level-block-deleted":return this.renderTopLevelBlockActivity(e);case"permissions-edited":return this.renderPermissionsActivity(e);case"permission-group-edited":return this.renderPermissionGroupActivity(e);case"commented":return n()(Z.w5,{activity:e,tabArgs:o,rootStore:t,isLast:r,useRedesignedIA:!1});case"collection-edited":return this.renderCollectionEdited(e);case"collection-view-edited":return this.renderCollectionViewEdited(e);case"collection-property-edited":return this.renderCollectionPropertyEdited(e);case"page-locked":case"page-unlocked":return this.renderPageLockActivity(e);case"page-deleted":case"page-restored":case"page-permanently-deleted":return this.renderPageDeleteOrRestoreActivity(e);default:(0,M.t1)(i)}}renderBlockEditActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=(0,O.hI)(e.edits).filter((e=>{const{block_value:t}="block-changed"===e.type?e.block_data.after:e.block_data;return t.parent_table!==y.x_}));if(0===l.length)return;const d=this.getBlockStore(l[0].navigable_block_id);if(!d.isDefined())return;const c=(0,I.P6)({edits:l,rootStore:o}),u=(0,I.XW)(c),h=n()(F.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {pageTitle}} other {{authorOrAuthors} edited {pageTitle}}}",id:"activity.blockEdited.header",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h}})),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:d.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:d.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(R.Z,{visible:5,items:l.map(((t,o)=>this.renderBlockEdit(t,o,e)))}),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionRowActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=e.edits[0],d=this.getBlockStore(e.collection_row_id);if(!d.isDefined())return;if(!d.getProperties())return;const c=(0,I.P6)({edits:e.edits,rootStore:o}),u=(0,I.XW)(c),h=n()(F.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p="collection-row-created"===l.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {pageTitle}} other {{authorOrAuthors} created {pageTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h},id:"activity.collectionRowCreated.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {pageTitle}} other {{authorOrAuthors} deleted {pageTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,pageTitle:h},id:"activity.collectionRowDeleted.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:d.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:d.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderTopLevelBlockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=e.edits[0],d=this.getBlockStore(e.top_level_block_id);if(!d.isDefined())return;const c=d.hasSpacePermission(),u=(0,I.P6)({edits:e.edits,rootStore:o}),h=(0,I.XW)(u),p=n()(F.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});let g;return g=c?"top-level-block-created"===l.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created workspace page {pageTitle}} other {{authorOrAuthors} created workspace page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockWorkspaceCreated.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted workspace page {pageTitle}} other {{authorOrAuthors} deleted workspace page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockWorkspaceDeleted.header"}):"top-level-block-created"===l.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created private page {pageTitle}} other {{authorOrAuthors} created private page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockPrivateCreated.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted private page {pageTitle}} other {{authorOrAuthors} deleted private page {pageTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,pageTitle:p},id:"activity.topLevelBlockPrivateDeleted.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,g),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:d.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,notification:r,icon:n()(N.BE,{authors:u}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})))}renderPermissionsActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s,source:l}=t;if(!e.edits)return;const c=(0,O.hI)(e.edits);if(0===c.length)return;let u,h;const p=c[0];if(p.navigable_block_id){const r=this.getBlockStore(p.navigable_block_id);if(!r.isDefined())return;h=n()(F.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u=(0,I.jC)({recordId:r.id,recordType:"block",tab:s,rootStore:o,environment:this.environment})}else{const r=this.getSpaceStore(p.space_id);if(!r.isDefined())return;h=n()(F.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u=(0,I.jC)({recordId:p.space_id,recordType:"space",tab:s,rootStore:o,environment:this.environment})}const{autojoinEdits:g,inheritanceEdits:v,otherEdits:m}=d.md(e.edits),b=[];g.forEach(((t,l)=>{const d=(0,I.P6)({edits:[t],rootStore:o}),c=(0,I.XW)(d);b.push(a.createElement(N.ZP,i()({key:`autojoin-${l}`,timestamp:t.timestamp,header:n()("span",{},void 0,n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} joined {pageOrSpaceName}} other {{authorOrAuthors} joined {pageOrSpaceName}}}",values:{numberOfAuthors:d.length,authorOrAuthors:c,pageOrSpaceName:h},id:"activity.permissionsActivity.header"})),isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:t.navigable_block_id,notification:r,icon:n()(N.BE,{authors:d}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s}))))}));const A=this.environment.device.isMobile;v.forEach(((d,c)=>{const p=(0,I.P6)({edits:[d],rootStore:o}),g=(0,I.XW)(p);let v;"permission-restriction-created"===d.type?v=n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restricted access for {pageOrSpaceName}} other {{authorOrAuthors} restricted access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,pageOrSpaceName:h,inSudoMode:d.inSudoMode},id:"activity.restrictPermissionsForActivity.header"}):"permission-restriction-deleted"===d.type&&(v=n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored inherited access for {pageOrSpaceName}} other {{authorOrAuthors} restored inherited access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,pageOrSpaceName:h,inSudoMode:d.inSudoMode},id:"activity.restorePermissionsForActivity.header"})),b.push(a.createElement(N.ZP,i()({key:`inheritance-${c}`,timestamp:parseInt(e.end_time),header:n()("span",{},void 0,v),isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:d.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()("div",{style:(0,L.OD)({source:l,isMobile:A})},void 0,n()(C.Z,{edit:d,rootStore:this.props.rootStore})),n()(E.Z,{tabArgs:t,activity:e,isMobile:A,environment:this.environment,rootStore:o})))}));const y=(d,c,h)=>{if(d.length>0){const g=(0,I.P6)({edits:d,rootStore:o});b.push(a.createElement(N.ZP,i()({key:c,timestamp:parseInt(e.end_time),header:h,isLast:this.props.isLast,isPrivate:u,rootStore:this.props.rootStore,navigableBlockId:p.navigable_block_id,notification:r,icon:n()(N.BE,{authors:g}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),d.map(((e,t,o)=>n()("div",{style:(0,L.OD)({source:l,isMobile:A})},t,n()(C.Z,{edit:e,rootStore:this.props.rootStore},t)))),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})))}},f=m.filter((e=>!e.inSudoMode));if(f.length>0){const e=(0,I.P6)({edits:f,rootStore:o}),t=(0,I.XW)(e);y(f,"other",n()("span",{},void 0,n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}}",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:h},id:"activity.updatedPermissionsForActivity.header"})))}const S=m.filter((e=>e.inSudoMode));if(S.length>0){const e=(0,I.P6)({edits:S,rootStore:o}),t=(0,I.XW)(e);y(S,"other-sudo",n()("span",{},void 0,n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}} using administrator privileges",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:h},id:"activity.updatedPermissionsForActivityInSudoMode.header"})))}return b}renderPermissionGroupActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s,source:l}=t;if(!e.edits)return;const d=(0,O.hI)(e.edits)[0];if(!d)return;const c=this.getSpaceStore(d.space_id);if(!c.isDefined())return;const u=(0,B.ME)(c.getModel().getRenderUrl({})),h=n()(D.Z,{permissionGroup:(0,g.c_)({activity:e,getRecordValue:this.getRecordValue}),spaceId:e.space_id}),p=(0,I.P6)({edits:e.edits,rootStore:o}),v=this.environment.device.isMobile;return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,this.renderPermissionGroupEditedHeader({activity:e,authors:p,groupName:h})),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:e.space_id,recordType:"space",tab:s,rootStore:o,environment:this.environment}),rootStore:o,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(w.Z,{href:u,onClick:()=>(0,B.dG)({...t,environment:this.environment,activity:e}),innerStyle:(0,L.OD)({source:l,isMobile:v})},void 0,n()(C.Z,{edit:d,rootStore:o})),n()(E.Z,{tabArgs:t,activity:e,isMobile:v,environment:this.environment,rootStore:o}))}renderCollectionEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=this.getRecordStore({table:b.v,id:e.collection_id,spaceId:e.space_id});if(!l.isDefined())return;const u=e.edits[0];if(!u)return;const h=l.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),p=(0,I.P6)({edits:e.edits,rootStore:o}),g=(0,I.XW)(p),v=n()(F.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),m="collection-created"===u.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {collectionTitle}} other {{authorOrAuthors} created {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:v},id:"activity.collectionCreated.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {collectionTitle}} other {{authorOrAuthors} edited {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:v},id:"activity.collectionEdited.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,m),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),d.OC(u)&&this.renderCollectionDescriptionEdit(u,h),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionDescriptionEdit(e,t){const{source:o}=this.props.tabArgs,r=this.environment.device.isMobile;return n()(w.Z,{href:t,innerStyle:(0,L.OD)({source:o,isMobile:r})},void 0,n()(C.Z,{edit:e,rootStore:this.props.rootStore}))}renderCollectionViewEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=this.getRecordStore({table:b.v,id:e.collection_id,spaceId:e.space_id});if(!l.isDefined())return;const d=this.getRecordStore({table:A.n,id:e.collection_view_id,spaceId:e.space_id});if(!d.isDefined())return;const c=(0,O.hI)(e.edits)[0];if(!c)return;const u=this.renderCollectionViewTitle(d,e),h=n()(F.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p=(0,I.P6)({edits:e.edits,rootStore:o}),g=(0,I.XW)(p);let v;return v="collection-view-created"===c.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewCreated.header"}):"collection-view-deleted"===c.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewDeleted.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:p.length,authorOrAuthors:g,collectionTitle:h,collectionViewTitle:u},id:"activity.collectionViewEdited.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,v),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:p}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionPropertyEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=(0,O.hI)(e.edits),d=l[0];if(!d)return;const u=this.getRecordStore({table:b.v,id:e.collection_id,spaceId:e.space_id});if(!u.isDefined())return;const h=u.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),p="collection-property-changed"===d.type?d.collection_property_data.after:d.collection_property_data,g=(0,I.P6)({edits:e.edits,rootStore:o}),v=(0,I.XW)(g),m=n()(F.Z,{titledRecordStore:u,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),A=this.renderCollectionPropertyTitle(p);let y;return y="collection-property-created"===d.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:m,collectionPropertyTitle:A},id:"activity.collectionPropertyCreated.header"}):"collection-property-deleted"===d.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:m,collectionPropertyTitle:A},id:"activity.collectionPropertyDeleted.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:v,collectionTitle:m,collectionPropertyTitle:A},id:"activity.collectionPropertyEdited.header"}),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,y),isLast:this.props.isLast,isPrivate:(0,I.jC)({recordId:e.collection_id,recordType:"collection",tab:s,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,notification:r,icon:n()(N.BE,{authors:g}),showSnapshotButton:this.isTopbarUpdatesMenu()},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(R.Z,{visible:5,items:l.map((e=>this.renderCollectionPropertyEdit(e,h)))}),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderPageLockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=e.edits[0],d=this.getBlockStore(l.navigable_block_id);if(!d.isDefined())return;const c=(0,I.P6)({edits:e.edits,rootStore:o}),u=(0,I.XW)(c),h=n()(F.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),p="page-locked"===e.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} locked {blockTitle}} other {{authorOrAuthors} locked {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"activity.pageLocked.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} unlocked {blockTitle}} other {{authorOrAuthors} unlocked {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"activity.pageUnlocked.header"});return a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isPrivate:(0,I.jC)({recordId:d.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),isLast:this.props.isLast,rootStore:o,navigableBlockId:d.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderPageDeleteOrRestoreActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:s}=t;if(!e.edits)return;const l=e.edits[0];if(!l)return;const d=this.getRecordStore({table:m.iU,id:l.navigable_block_id,spaceId:l.space_id});if(!d.isDefined())return;const c=(0,I.P6)({edits:e.edits,rootStore:o}),u=(0,I.XW)(c),h=n()(F.Z,{titledRecordStore:d,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});let p;return"page-deleted"===e.type?p=n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {blockTitle}} other {{authorOrAuthors} deleted {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pageDeleted.header"}):"page-restored"===e.type?p=n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored {blockTitle}} other {{authorOrAuthors} restored {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pageRestored.header"}):"page-permanently-deleted"===e.type?p=n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} permanently deleted {blockTitle}} other {{authorOrAuthors} permanently deleted {blockTitle}}}",values:{numberOfAuthors:c.length,authorOrAuthors:u,blockTitle:h},id:"emailActivity.pagePermanentlyDeleted.header"}):(0,M.t1)(e),a.createElement(N.ZP,i()({timestamp:parseInt(e.end_time),header:n()("span",{},void 0,p),isPrivate:(0,I.jC)({recordId:d.id,recordType:"block",tab:s,rootStore:o,environment:this.environment}),isLast:this.props.isLast,rootStore:o,navigableBlockId:d.id,notification:r,icon:n()(N.BE,{authors:c}),showSnapshotButton:!1},(0,B.h9)({notification:r,activity:e,environment:this.environment,tab:s})),n()(E.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o}))}renderCollectionPropertyTitle(e){const{theme:t}=this;return n()("span",{style:{...L.nP,whiteSpace:"nowrap"}},void 0,n()(h.ZP,{icon:e.icon,type:e.type,size:12,style:V.svgIconStyle,theme:t}),e.name)}renderCollectionViewTitle(e,t){const{tabArgs:o}=this.props;if(!e.isDefined())return;const r=e.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:c.tY.Activity}),i=e.getFormat().collection_view_icon,s=e.getType();return n()(w.Z,{href:r,onClick:()=>(0,B.V3)({environment:this.environment,activity:t,...o}),external:!1,innerStyle:{...L.lS,...L.nP},inline:!0},void 0,n()(P.F,{viewIcon:i,viewType:s,color:"light",style:{display:"inline-block",verticalAlign:"middle",marginRight:4,marginBottom:2},size:12}),n()(_.Z,{collectionViewName:e.getName(),collectionViewType:e.getType()}))}isTopbarUpdatesMenu(){return"pageUpdatesSidebar"===this.props.tabArgs.tab}renderPermissionGroupEditedHeader(e){const{activity:t,authors:o,groupName:r}=e,i=(0,I.XW)(o),s=(0,O.hI)(t.edits||[])[0];return s?"permission-group-created"===s.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created group {groupName}} other {{authorOrAuthors} created group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:L.nP},void 0,r)},id:"activity.updatedPermissionGroupCreated.header"}):"permission-group-deleted"===s.type?n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted group {groupName}} other {{authorOrAuthors} deleted group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:L.nP},void 0,r)},id:"activity.updatedPermissionGroupDeleted.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:L.nP},void 0,r)},id:"activity.updatedPermissionGroupEditedDefault.header"}):n()(T.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:n()("span",{style:L.nP},void 0,r)},id:"activity.updatedPermissionGroupEdit.header"})}get getRecordValue(){return this.props.rootStore.getRecordValue}get getRecordModel(){return this.props.rootStore.getRecordModel}getBlockStore(e){return k.G.createChildStore(this.props.rootStore,{table:m.iU,id:e})}}V.displayName="ActivityUpdate",V.svgIconStyle={width:12,height:12,display:"inline-block",verticalAlign:"middle",marginBottom:2,marginRight:4};const U=V},44295:(e,t,o)=>{o.d(t,{I:()=>s});var r=o(23174),i=o.n(r);o(67294);const s=(0,o(45238).I)("random",{viewBox:"0 0 14 14",svg:i()("path",{d:"M9.45002,6.2999567 C8.87013,6.2999567 8.40002,5.8298565 8.40002,5.24995625 C8.40002,4.670056 8.87013,4.1999558 9.45002,4.1999558 C10.0299,4.1999558 10.5,4.670056 10.5,5.24995625 C10.5,5.8298565 10.0299,6.2999567 9.45002,6.2999567 Z M4.55,6.2999567 C3.9701,6.2999567 3.5,5.8298565 3.5,5.24995625 C3.5,4.670056 3.9701,4.1999558 4.55,4.1999558 C5.1299,4.1999558 5.6,4.670056 5.6,5.24995625 C5.6,5.8298565 5.1299,6.2999567 4.55,6.2999567 Z M6.993,0 C10.864,0 14,3.13600534 14,7.000007 C14,10.8639987 10.864,14 6.993,14 C3.129,14 0,10.8639987 0,7.000007 C0,3.13600534 3.129,0 6.993,0 Z M7,12.5999994 C10.094,12.5999994 12.6,10.0939983 12.6,7.000007 C12.6,3.90600567 10.094,1.4000046 7,1.4000046 C3.906,1.4000046 1.4,3.90600567 1.4,7.000007 C1.4,10.0939983 3.906,12.5999994 7,12.5999994 Z M7,10.8499986 C5.369,10.8499986 3.976,9.83499821 3.416,8.4000076 L4.585,8.4000076 C5.075,9.23299796 5.964,9.7999982 7,9.7999982 C8.036,9.7999982 8.932,9.23299796 9.415,8.4000076 L10.584,8.4000076 C10.024,9.83499821 8.631,10.8499986 7,10.8499986 Z"})})}}]);