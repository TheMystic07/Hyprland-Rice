"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2921],{87147:(e,t,i)=>{i.d(t,{Z:()=>B});var o=i(23174),r=i.n(o),a=i(67294),s=i(480),n=i(86628),d=i(24405),c=i(15145),l=i(5366),u=i(21202),m=i(15047),g=i(29369),h=i(19889),v=i(97880),p=i(33929),b=i(45094),f=i(95697),y=i(57559),A=i(62820),S=i(35817),M=i(84076),_=i(31278),R=i(86176),C=i(76798),w=i(45653),O=i(17022),k=i(22649);function I(e){window.__c={n:"TitleCard"};const{titledRecordStore:t,rootStore:i,activity:o,tabArgs:I}=e,B=i.getRecordModel,K=(0,n.VK)((()=>t.getModel()),[t]),V=(0,s.O7)(),T=(0,n.VK)((()=>null==K?void 0:K.getRenderIcon({getRecordModel:B})),[K,B]),Z=(0,d.yK)((e=>({container:{...k.lS,display:"block",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:3,marginTop:8,padding:10},icon:{...k.e9,marginRight:8},activityTitle:{display:"inline",whiteSpace:"normal",marginRight:void 0!==T?3:0,wordBreak:"break-word",...k.nP},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1},subtitle:{fontSize:12,color:e.lightTextColor},avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.lightTextColor}})),[T]),P=(0,n.VK)((()=>{if(K&&K.table!==g.e0)return K.getRenderUrl({getRecordModel:B,pageVisitSource:c.tY.Notification})}),[K,B]),x=(0,a.useCallback)((()=>{const e=t.table;switch(e){case u.iU:case m.bx:(0,O.V3)({environment:V,activity:o,...I});break;case g.e0:(0,O.dG)({environment:V,activity:o,...I}),S.hI({environment:V,teamStore:t,shouldScroll:!0}),A.Z.setState({...A.Z.state,open:!1});break;default:(0,v.t1)(e)}}),[o,V,I,t]),q=(0,n.VK)((()=>{const e=t.table;switch(e){case"space":const i=t.getPublicSpaceData();return i&&"none"!==i.role?r()("div",{},void 0,r()(l.FormattedMessage,{id:"activity.titleCard.spaceSubtitle",defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}} · {planType}",values:{numberOfWorkspaceMembers:p.default.formatNumber(i.memberCount),planType:p.default.formatMessage((0,b.em)(i.subscriptionTier))}})):null;case"block":return r()(R.Z,{store:t});case"team":const o=t.getUserIdsInTeam().length,a=t.getTeamAccessLevel();return r()("div",{},void 0,r()(l.FormattedMessage,{id:"activity.titleCard.teamSubtitle",defaultMessage:"{accessLevel} · {numberOfTeamMembers, plural, one {{numberOfTeamMembers} member} other {{numberOfTeamMembers} members}}",values:{accessLevel:a,numberOfTeamMembers:o}}));default:(0,v.t1)(e)}}),[t]),F=(0,n.VK)((()=>{const e=t.table;let o=[];switch(e){case"space":const r=t.getModel();if(!r)break;o=r.getUserPermissionItems().map((e=>e.user_id));break;case"block":const a=t.getCreatedByPointer();(null==a?void 0:a.table)===h.KJ&&(o=[a.id]);break;case"team":o=(0,f.xf)({teamStore:t,spaceStore:i});break;default:(0,v.t1)(e)}const a=Math.max(0,o.length-3),s=Math.min(o.length,3);return r()("div",{style:Z.avatarContainer},void 0,o.slice(0,3).map(((e,i)=>{const o=y.U6.createChildStore(t,{table:h.KJ,id:e}),a=i===s-1;if(o)return r()(w.Z,{userStore:o,size:24,avatarShouldShowShadow:!1,style:a?Z.rightmostAvatar:Z.overlappingAvatar,isOffline:!1,hasTooltip:!V.device.isMobile})})),a>0&&r()("div",{style:Z.remainderCount},void 0,r()(l.FormattedMessage,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:a}})))}),[V.device.isMobile,Z,t,i]);return K?r()(M.Z,{href:P,onClick:x,external:!1,innerStyle:Z.container,inline:!0},void 0,r()("div",{style:Z.flexRow},void 0,T&&r()(_.Z,{disabled:!0,icon:T,isEmptyPage:!1,size:25,style:Z.icon}),r()("div",{style:Z.title},void 0,r()(C.Z,{store:t,style:Z.activityTitle}),r()("div",{style:Z.subtitle},void 0,q)),r()("div",{style:Z.spacer}),r()("div",{},void 0,F))):null}const B=a.memo(I)},27289:(e,t,i)=>{i.d(t,{Z:()=>me});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(24405),u=i(5366),m=i(58129),g=i(21202),h=i(15047),v=i(29369),p=i(19889),b=i(97880),f=i(82990),y=i(4708),A=i(33929),S=i(57559),M=i(83355),_=i(49085),R=i(66897),C=i(7057),w=i(24211),O=i(72126),k=i(77420),I=i(48298),B=i(50906),K=i(91376),V=i(64404),T=i(69616),Z=i(61519),P=i(62385),x=i(64369);class q extends M.Z{constructor(){super(...arguments),this.storeTypes={role:_.default.createClass(void 0)}}renderComponent(){const{accessRequestStore:e}=this.props;if(e.isDefined()){if(e.isResolvedSpaceMembershipRequest())return this.renderResolvedSpaceMembershipRequest();if(this.canResolveMembershipRequests())return s()("div",{style:{display:"flex",alignItems:"center"}},void 0,s()(P.Z,{onClick:()=>this.resolveMembershipRequest("approved"),style:this.getButtonStyle(!1)},void 0,s()(u.FormattedMessage,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})),s()(P.Z,{onClick:()=>this.resolveMembershipRequest("rejected"),style:{height:26,paddingLeft:8,paddingRight:8}},void 0,s()(u.FormattedMessage,{defaultMessage:"Decline",id:"approveSpaceMembershipActivityAction.declineButton.label"})),!this.environment.device.isMobile&&n.createElement(n.Fragment,null,s()(Z.Z,{size:1,vertical:!0,style:{height:26,paddingLeft:8,paddingRight:8}}),s()(P.Z,{onClick:()=>{B.E50(this.environment,{disable_membership_requests:this.props.spaceStore.getDisableMembershipRequests()}),this.handleOpenSettingsMembersRequests()},style:{height:26,paddingLeft:8,paddingRight:8}},void 0,s()(u.FormattedMessage,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"}))))}}renderResolvedSpaceMembershipRequest(){const{accessRequestStore:e,spaceStore:t}=this.props;if(!e.isDefined())return;const i=e.getResolvedByPointer(t.id),o=e.isResolvedSpaceMembershipRequest()&&i&&this.renderActor(i);return n.createElement(n.Fragment,null,s()(x.Z,{isSecondaryColor:!0},void 0,"approved"===e.getStatus()?s()(u.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestApproved.title",values:{grantedBy:o}}):s()(u.FormattedMessage,{defaultMessage:"Declined by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestDeclined.title",values:{grantedBy:o}})),s()(x.Z,{isSmall:!0,isSecondaryColor:!0},void 0,(0,C.Yx)(Math.min(e.getResolvedTime()??1/0,Date.now()),"medium_with_time",(0,w.E2)(this.props.intl))))}handleOpenSettingsMembersRequests(){K.r$({currentTab:"members",subtab:V.Q.Requests})}canResolveMembershipRequests(){return this.props.spaceStore.canEditMembership()}renderActor(e){const{table:t,id:i}=e,o=O.oA([this.getActor(t,i)]);return(0,T.XW)(o)}getActor(e,t){if(e===p.KJ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,R.dp)(i)}if(e===k.cZ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,R.D$)(i)}}get rootStore(){return this.props.accessRequestStore}async resolveMembershipRequest(e){if(!this.canResolveMembershipRequests())return;const t=this.environment,{spaceStore:i,accessRequestStore:o}=this.props;if(!o.isDefined())return;const r=this.getActor(p.KJ,o.getForActorId());r&&r.table===p.KJ&&await I.kn({environment:t,store:i,accessRequestStore:o,forActor:r.__IM_SORRY__getValue(),status:e,from:"notification"})}getButtonStyle(e){const t={height:26,paddingLeft:8,paddingRight:8,boxShadow:this.theme.plainButtonBoxShadow,fontSize:12,marginRight:10};return e?t:{...t,color:this.theme.regularTextColor,fontWeight:500}}}q.displayName="ApproveSpaceMembershipActivityAction";const F=(0,u.injectIntl)(q);var L=i(13991),E=i(27006),D=i(54368),U=i(19719),z=i(17659),G=i(76464),W=i(9953),H=i(39699),N=i(41168),j=i(78291),J=i(7567);class Y extends M.Z{constructor(){super(...arguments),this.storeTypes={role:_.default.createClass(void 0)},this.handleApproveMembershipRequest=async()=>{},this.handleGrantPageAccess=async()=>{const{targetBlockStore:e,accessRequestStore:t}=this.props,i=this.getInviteTargetWithNewPermissionItem();if(!("permissionItem"in i))return;const o=this.environment.currentUser.id;if(!o)return;if("type"in i){let t;if("existingUser"===i.type){t=(await G.n_({environment:this.environment,store:e,inviteTargets:[i],inviteRole:i.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else if("bot"===i.type){t=(await G.n_({environment:this.environment,store:e,inviteTargets:[i],inviteRole:void 0,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else(0,b.t1)(i);if(!t)return}H.createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:this.environment,perform:r=>{"type"in i||G.ep({environment:this.environment,transaction:r,store:e,permissionItems:[i.permissionItem]}),W.sW({store:t,transaction:r,data:{granted_time:Date.now(),granted_by_table:p.KJ,granted_by_id:o,resolved_time:Date.now(),resolved_by_table:p.KJ,resolved_by_id:o,status:"approved"}})}});const r=t.getValue(),a=r&&r.created_time&&r.granted_time?r.granted_time-r.created_time:void 0;B.nCD(this.environment,{requestId:r&&r.id,timeElapsedSinceRequest:a,newAccessLevel:i.permissionItem.role,...this.getGrantOrIgnoreAccessArgs()})},this.handleRoleChange=e=>{const t=this.props.accessRequestStore.id,i=this.stores.role.state;this.stores.role.setState(e),B.If_(this.environment,{requestId:t,previousAccessLevel:i,newAccessLevel:e,...this.getGrantOrIgnoreAccessArgs()})},this.handleArchive=()=>{const{notification:e}=this.props;e&&(H.createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:this.environment,perform:t=>{z.aZ({notification:e,rootStore:this.props.accessRequestStore,transaction:t})}}),B.cOL(this.environment,this.getGrantOrIgnoreAccessArgs()))}}renderComponent(){const e=this.props.accessRequestStore.getValue();if(!e)return;if((0,m.Kc)(e))return this.renderGrantedAccessRequest(e);if(!this.canGrantAccess())return;const t=e.parent_table===h.bx,i=this.getCurrentPermissionItem();if(i&&!t){const t=this.renderActor(e.for_actor_table,e.for_actor_id),o=i.role===this.getRole();return n.createElement(n.Fragment,null,s()(x.Z,{isSecondaryColor:!0,style:{marginBottom:6}},void 0,s()(u.FormattedMessage,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:t}})),s()(J.ZP,{upgradeButtonName:"user_permission_item",role:this.getRole(),table:g.iU,blockType:this.props.targetBlockStore.getType(),type:e.for_actor_table===p.KJ?"user_permission":"bot_permission",onChange:this.handleRoleChange,isInvite:!0,buttonStyle:this.getButtonStyle(!0)}),s()(P.Z,{onClick:this.handleGrantPageAccess,style:this.getButtonStyle(o)},void 0,s()(u.FormattedMessage,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})),this.renderArchiveButton())}return n.createElement(n.Fragment,null,s()(J.ZP,{upgradeButtonName:"user_permission_item",role:this.getRole(),table:g.iU,blockType:this.props.targetBlockStore.getType(),type:e.for_actor_table===p.KJ?"user_permission":"bot_permission",onChange:this.handleRoleChange,isInvite:!0,buttonStyle:this.getButtonStyle(!1)}),s()(P.Z,{onClick:this.handleGrantPageAccess,style:this.getButtonStyle(!1)},void 0,s()(u.FormattedMessage,{defaultMessage:"Grant access",id:"grantPageAccessActivityAction.grantAccessButton.label"})),this.renderArchiveButton())}renderGrantedAccessRequest(e){const t=this.renderActor(e.granted_by_table,e.granted_by_id),i=(0,C.$b)(Math.min(e.granted_time,Date.now()),L.SP,A.default.getIntl());return n.createElement(n.Fragment,null,s()(x.Z,{isSecondaryColor:!0},void 0,s()(u.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"grantPageAccessActivityAction.accessGranted.title",values:{grantedBy:t,time:i}})),s()(x.Z,{isSmall:!0,isSecondaryColor:!0},void 0,i))}renderArchiveButton(){const{notification:e}=this.props;if(e&&!e.visited)return s()(P.Z,{onClick:this.handleArchive,style:{height:26,paddingLeft:8,paddingRight:8}},void 0,s()(u.FormattedMessage,{defaultMessage:"Ignore",id:"grantPageAccessActivityAction.ignoreButton.label"}))}getRole(){const e=this.getCurrentPermissionItem(),t=e&&e.role;return this.stores.role.state||t||this.props.initialRole}getNewPermissionItem(){const e=this.props.accessRequestStore.getValue();if(e)return e.for_actor_table===p.KJ?{type:"user_permission",user_id:e.for_actor_id,role:this.getRole()}:e.for_actor_table===k.cZ?{type:"bot_permission",bot_id:e.for_actor_id,role:this.getRole()}:void(e.for_actor_table!==D.y&&(0,b.t1)(e.for_actor_table))}getInviteTargetWithNewPermissionItem(){const e=this.getNewPermissionItem();if(!e)return{};if(this.getCurrentPermissionItem())return{permissionItem:e};const{data:t}=j.default.state;if("user_permission"===e.type){const i=this.rootStore.getRecordValue({table:p.KJ,id:e.user_id}),o=t?N.CM(t):[],r=o&&o.some((t=>t.userId===e.user_id));return i&&!r?{type:"existingUser",value:i,permissionItem:e}:{permissionItem:e}}if("bot_permission"===e.type){const i=this.rootStore.getRecordValue({table:k.cZ,id:e.bot_id}),o=(t?N.NM(t):[]).some((t=>t.botId===e.bot_id));return i&&!o?{type:"bot",value:i,permissionItem:e}:{permissionItem:e}}(0,b.t1)(e)}getCurrentPermissionItem(){const e=this.props.accessRequestStore.getValue();if(!e)return;const t=this.props.targetBlockStore.getPermissionItems();for(const i of t){if(e.for_actor_table===p.KJ&&(0,E.jg)(i)&&i.user_id===e.for_actor_id)return i;if(e.for_actor_table===k.cZ&&(0,E.FB)(i)&&i.bot_id===e.for_actor_id)return i}}canGrantAccess(){return this.props.targetBlockStore.canAdmin()}renderActor(e,t){const i=O.oA([this.getActor(e,t)]);return(0,T.XW)(i)}getActor(e,t){if(e===p.KJ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,R.dp)(i)}if(e===k.cZ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,R.D$)(i)}}get rootStore(){return this.props.accessRequestStore}getButtonStyle(e){const t={height:26,paddingLeft:8,paddingRight:8,boxShadow:this.theme.plainButtonBoxShadow,fontSize:12,marginRight:10};return e?t:{...t,color:this.theme.regularTextColor,fontWeight:500}}getGrantOrIgnoreAccessArgs(){const{notification:e}=this.props;return{tab:U.Jn(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}}Y.displayName="GrantPageAccessActivityAction";const X=Y;var $=i(18698);const Q=function(e){window.__c={n:"ApproveTeamMembershipActivityButton"};const{accessRequestStore:t,teamStore:i}=e,o=(0,d.O7)(),r=(0,u.useIntl)(),{isRequestResolved:a,resolvedStatus:n,resolvedTime:m}=(0,c.VK)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),g=(0,c.VK)((()=>{const e=t.getResolvedById();if(!e)return;const i=S.U6.createChildStore(t,{table:p.KJ,id:e});return i?i.getDisplayName(r):void 0}),[t,r]),h=async e=>{await $.ow({environment:o,teamStore:i,accessRequestStore:t,status:e})},v=(0,l.yK)((e=>({container:{display:"flex",alignItems:"center"},approveButton:{height:26,paddingLeft:8,paddingRight:8,fontSize:12,marginRight:10,fontWeight:500,boxShadow:e.plainButtonBoxShadow},declineButton:{height:26,paddingLeft:8,paddingRight:8}})),[]);return s()("div",{style:v.container},void 0,a?s()("div",{},void 0,s()(x.Z,{isSecondaryColor:!0},void 0,s()(u.FormattedMessage,"approved"===n?{defaultMessage:"Approved by {grantedBy}",id:"approveTeamMembershipActivityButton.requestApproved.title",values:{grantedBy:g}}:{defaultMessage:"Declined by {grantedBy}",id:"approveTeamMembershipActivityButton.requestDeclined.title",values:{grantedBy:g}})),s()(x.Z,{isSmall:!0,isSecondaryColor:!0},void 0,(0,C.Yx)(Math.min(m??0,Date.now()),"medium_with_time",(0,w.E2)(r)))):s()("div",{},void 0,s()(P.Z,{style:v.approveButton,onClick:()=>h("approved")},void 0,s()(u.FormattedMessage,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})),s()(P.Z,{style:v.declineButton,onClick:()=>h("rejected")},void 0,s()(u.FormattedMessage,{defaultMessage:"Decline",id:"approveTeamMembershipActivityButton.declineButton.label"}))))};var ee=i(51925),te=i(17022),ie=i(12472),oe=i(22649),re=i(78976),ae=i(56162);function se(e){let{activity:t,rootStore:i,tabArgs:o,isLast:a}=e;window.__c={n:"AccessRequestedActivity"};const{notification:g,tab:v,source:p}=o,b=(0,n.useMemo)((()=>t.edits??[]),[t]),f=b[0],A=(0,d.O7)(),M=A.device.isMobile,_=(0,l.yK)((()=>({message:{paddingLeft:(0,oe.c3)({source:p,isMobile:M}),paddingRight:16,marginTop:8,marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"}})),[p,M]),R=S.oK.createChildStore(i,{table:m.J8,id:t.access_request_id}),C=(0,c.VK)((()=>R.getModel()),[R]),w=(0,c.VK)((()=>(null==C?void 0:C.getParentTable())===h.bx&&!(0,y.p1)()),[C]),O=C&&s()(ne,{activity:t,accessRequest:C,rootStore:i,tabArgs:o}),k=f.message,I=(0,c.VK)((()=>(0,T.P6)({edits:b,rootStore:i})),[b,i]),B=(0,c.VK)((()=>(0,T.XW)(I)),[I]);return w||!O?null:n.createElement(ae.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,O),isLast:a,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:g,icon:s()(ee.BE,{authors:I}),showSnapshotButton:!1},(0,te.h9)({notification:g,activity:t,environment:A,tab:v})),k&&s()("div",{style:_.message},void 0,s()(x.Z,{isSmall:!0},void 0,s()(u.FormattedMessage,{id:"activity.accessRequested.messageLabel",defaultMessage:"Message from {author}",values:{author:B}})),s()(x.Z,{isMultiline:!0,style:_.messageLabel},void 0,k)),s()(ue,{activity:t,accessRequestStore:R,rootStore:i,source:p,notification:g}),s()(ie.Z,{tabArgs:o,activity:t,isMobile:A.device.isMobile,environment:A,rootStore:i}))}function ne(e){window.__c={n:"AccessRequestHeader"};const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,a=(0,c.VK)((()=>i.getParentTable()),[i]);switch(a){case h.bx:return s()(ce,{activity:t,accessRequest:i,rootStore:o});case v.e0:return s()(le,{activity:t,rootStore:o,tabArgs:r});case g.iU:return s()(de,{activity:t,tabArgs:r,rootStore:o});default:(0,b.t1)(a)}}function de(e){window.__c={n:"BlockAccessRequestHeader"};const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,n.useMemo)((()=>t.edits??[]),[t]),a=(0,c.VK)((()=>(0,T.P6)({edits:r,rootStore:i})),[r,i]),d=(0,c.VK)((()=>(0,T.XW)(a)),[a]);if(!t.navigable_block_id)return null;const l=S.G.createChildStore(i,{table:g.iU,id:t.navigable_block_id});return s()(u.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to {pageName}} other {{authorOrAuthors} requested access to {pageName}}}",values:{numberOfAuthors:a.length,authorOrAuthors:d,pageName:s()(re.Z,{titledRecordStore:l,activity:t,tabArgs:o,getRecordModel:i.getRecordModel})},id:"activity.accessRequested.header"})}function ce(e){window.__c={n:"MembershipRequestHeader"};const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,n.useMemo)((()=>t.edits??[]),[t]),a=(0,l.yK)((()=>({inviteePhrase:{fontWeight:f.Z.fontWeight.semibold}})),[]),d=(0,c.VK)((()=>i.getForActorPointer(o.id)),[i,o.id]),m=d.table===p.KJ?S.U6.createChildStore(o,d):void 0,g=(0,c.VK)((()=>null==m?void 0:m.getModel()),[m]),h=(0,c.VK)((()=>null==g?void 0:g.getEmail()),[g]),v=(0,c.VK)((()=>i.getForActorId()===i.getCreatedById()),[i]),b=(0,c.VK)((()=>(0,T.P6)({edits:r,rootStore:o})),[r,o]),y=(0,c.VK)((()=>(0,T.XW)(b)),[b]),M=(0,c.VK)((()=>{if(!v)return h;const e=null==g?void 0:g.getFullName(A.default.getIntl());return e?`${e} (${h})`:h}),[v,g,h]);return g&&d.table===p.KJ?s()(u.FormattedMessage,v?{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:s()("span",{style:a.inviteePhrase},void 0,M)},id:"activity.accessRequestedMembershipFromGuest.header"}:{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested {invitee} to become a workspace member} other {{authorOrAuthors} requested {invitee} to become a workspace member}}",values:{numberOfAuthors:b.length,authorOrAuthors:y,invitee:s()("span",{style:a.inviteePhrase},void 0,M)},id:"activity.accessRequestedMembership.header"}):null}function le(e){window.__c={n:"TeamMembershipRequestHeader"};const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,n.useMemo)((()=>t.edits??[]),[t]),a=(0,c.VK)((()=>(0,T.P6)({edits:r,rootStore:i})),[r,i]),d=(0,c.VK)((()=>(0,T.XW)(a)),[a]);if(!r||!t.team_id)return null;const l=S.zX.createChildStore(i,{table:v.e0,id:t.team_id});return s()(u.FormattedMessage,{defaultMessage:"{user} requested to become a member of {teamName}",values:{user:s()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,d),teamName:s()(re.Z,{titledRecordStore:l,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header"})}function ue(e){window.__c={n:"AccessRequestedActions"};const{activity:t,accessRequestStore:i,rootStore:o,source:r,notification:a}=e,u=(0,n.useMemo)((()=>t.edits||[]),[t])[0],m=(0,c.VK)((()=>i.getParentTable()),[i]),p=(0,c.VK)((()=>i.getParentId()),[i]),f=(0,d.O7)().device.isMobile,y=(0,l.yK)((e=>({actionPrimaryContainer:{paddingLeft:(0,oe.c3)({source:r,isMobile:f}),paddingTop:12,paddingBottom:8},actionButton:(0,oe.b9)(e)})),[r,f]),A=p?S.G.createChildStore(o,{table:g.iU,id:p}):void 0,M=(0,c.VK)((()=>m===g.iU&&Boolean(null==A?void 0:A.canAdmin())),[m,A]);if(!m||!p||!u)return null;switch(m){case g.iU:return M&&A?s()("div",{style:y.actionPrimaryContainer},void 0,s()(X,{accessRequestStore:i,targetBlockStore:A,initialRole:"reader",buttonStyle:y.actionButton,notification:a})):null;case h.bx:const e=S.H2.createChildStore(o,{table:m,id:p});return s()("div",{style:y.actionPrimaryContainer},void 0,s()(F,{accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:y.actionButton,notification:a}));case v.e0:const t=S.zX.createChildStore(o,{table:m,id:p});return s()("div",{style:y.actionPrimaryContainer},void 0,s()(Q,{accessRequestStore:i,teamStore:t}));default:(0,b.t1)(m)}}const me=n.memo(se)},18669:(e,t,i)=>{i.d(t,{Z:()=>O});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(15145),u=i(41432),m=i(5366),g=i(89101),h=i(21202),v=i(99108),p=i(57559),b=i(84076),f=i(63381),y=i(13658),A=i(51925),S=i(17022),M=i(69616),_=i(12472),R=i(22649),C=i(78976),w=i(56162);function O(e){window.__c={n:"BlockPropertyEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{tab:l,notification:u,source:g}=o,b=(0,v.hI)(t.edits??[]),f=b.length>0,R=p.G.createChildStore(i,{table:h.iU,id:b[0].navigable_block_id}),O=(0,c.VK)((()=>(0,M.P6)({edits:b,rootStore:i})),[b,i]),I=(0,c.VK)((()=>(0,M.XW)(O)),[O]),B=(0,d.O7)(),K=(0,c.VK)((()=>(0,M.jC)({recordId:R.id,recordType:"block",tab:l,rootStore:i,environment:B})),[R,l,i,B]);if(!(0,c.VK)((()=>R.isDefined()),[R])||!f)return null;const V=s()(C.Z,{titledRecordStore:R,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),T="pageUpdatesSidebar"===l;return n.createElement(w.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,s()(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated {pageTitle}} other {{authorOrAuthors} updated {pageTitle}}}",id:"activity.blockEdited.standardizedHeader",values:{numberOfAuthors:O.length,authorOrAuthors:I,pageTitle:V}})),isLast:a,isPrivate:K,rootStore:i,navigableBlockId:R.id,notification:u,icon:s()(A.BE,{authors:O}),showSnapshotButton:T,showRecordPath:!0},(0,S.h9)({notification:u,activity:t,environment:B,tab:l})),s()(y.Z,{visible:5,items:b.map(((e,r)=>s()(k,{edit:e,rootStore:i,onClick:()=>(0,S.dG)({environment:B,activity:t,...o}),source:g,isMobile:B.device.isMobile},r)))}),s()(_.Z,{tabArgs:o,activity:t,isMobile:B.device.isMobile,environment:B,rootStore:i}))}function k(e){window.__c={n:"BlockPropertyEditComponent"};const{rootStore:t,edit:i,onClick:o,source:r,isMobile:a}=e,n=(0,c.VK)((()=>function(e,t){const i=t.getRecordModel({table:h.iU,id:e.block_id}),o=(null==i?void 0:i.getType())===u.Ti.tableRow?t.getRecordModel({table:h.iU,id:i.getParentId()}):i;return null==o?void 0:o.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:l.tY.Notification})}(i,t)||g._j.root),[i,t]);return s()(b.Z,{href:n,onClick:o,innerStyle:(0,R.OD)({source:r,isMobile:a})},void 0,s()(f.Z,{edit:i,rootStore:t}))}},66096:(e,t,i)=>{i.d(t,{P:()=>J});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(24405),u=i(15145),m=i(45433),g=i(72126),h=i(5366),v=i(54368),p=i(21202),b=i(77420),f=i(33709),y=i(19889),A=i(70203),S=i(97880),M=i(82990),_=i(4083),R=i(60682),C=i(14976),w=i(98165),O=i(65598),k=i(77907),I=i(57559),B=i(2456),K=i(64921),V=i(31278),T=i(76798),Z=i(70301),P=i(45653),x=i(65187),q=i(51925),F=i(17022),L=i(69616),E=i(22649),D=i(56162),U=i(99786);function z(e){let{activity:t,tabArgs:i,rootStore:o,isLast:a}=e;window.__c={n:"CommentActivityWithIndentedGroupingIA"};const m=t.edits??[],{source:g,tab:h,notification:v}=i;let b=m.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,S.t1)(e)}}));0===b.length&&0!==m.length&&"updates_sidebar"!==g&&(b=m);const y=b.length>0,A=(0,d.O7)(),R=(0,c.VK)((()=>o.getRecordStore(o,{table:f.qF,id:t.discussion_id,spaceId:t.space_id})),[o,t]),C=(0,c.VK)((()=>R.isDefined()),[R]),O=(0,c.VK)((()=>{const e=R.getParentPointer();if(e)return I.G.createChildStore(o,e)}),[R,o]),k=(0,c.VK)((()=>Boolean(O&&O.isDefined())),[O]),B=(0,c.VK)((()=>{const e=null==O?void 0:O.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t.navigable_block_id,O]),V=I.G.createChildStore(o,{table:p.iU,id:B}),T=(0,c.VK)((()=>V.isDefined()),[V]),Z=(0,c.VK)((()=>Boolean(O&&(0,w.fl)((0,w.qA)(O)))),[O]),P=(0,c.VK)((()=>{if(!Z||!O)return;const e=O.getModel();return e?e.getRenderUrl({getRecordModel:o.getRecordModel,discussionId:t.discussion_id,pageVisitSource:u.tY.Notification}):void 0}),[Z,O,o,t.discussion_id]),x=(0,c.VK)((()=>(0,L.P6)({edits:b,rootStore:o})),[b,o]),z=(0,c.VK)((()=>(0,L.XW)(x)),[x]),W=Z,H=(0,l.yK)((()=>({flex:{display:"flex"},header:{fontWeight:M.Z.fontWeight.semibold}})),[]),J=(0,n.useCallback)((e=>{if((0,F.dG)({...i,environment:A,activity:t,mightCloseTab:W}),!Z&&O){var o;const r=e.target;_.oK({environment:A,discussionStore:R,rect:r.getBoundingClientRect(),blockStore:O,discussionLocation:(0,U.Kg)({forReplyMenu:!0,source:i.source}),activityId:t.id,notificationId:null===(o=i.notification)||void 0===o?void 0:o.id})}}),[t,Z,O,R,A,i,W]),Y=(0,n.useCallback)((()=>{(0,F.BE)({...i,environment:A,activity:t,mightCloseTab:W})}),[i,A,t,W]),X=(0,c.VK)((()=>(0,L.jC)({recordId:B,recordType:p.iU,tab:h,rootStore:o,environment:A})),[B,h,o,A]),$=A.device.isMobile,Q=(0,c.VK)((()=>(0,U.Kg)({source:g,forReplyMenu:!1})),[g]),ee=(0,c.VK)((()=>(0,L.cr)({activity:t,rootStore:o})),[t,o]),te=t.discussion_id,ie=null==ee?void 0:ee.context,oe=(0,c.VK)((()=>{const e=V.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[V]);if(!(y&&T&&k&&C))return null;const re=s()(j,{authorCount:x.length,authorPhrase:z,databaseType:oe,commentCount:b.length});return s()(K.Z,{href:P},void 0,n.createElement(D.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{style:H.header},void 0,re),isLast:a,isPrivate:X,rootStore:o,prominentTitleLink:void 0,navigableBlockId:B,notification:v,icon:s()(q.BE,{authors:x}),showSnapshotButton:!1,showRecordPath:!1},(0,F.h9)({notification:v,environment:A,tab:h,activity:t})),s()(N,{navigableBlockStore:V,discussionId:te,discussionContext:ie,alwaysHighlightWithBlockBar:!0,url:P,onClick:J,rootStore:o,source:g}),s()("div",{style:{display:"flex",flexDirection:"column",gap:12,marginTop:12}},void 0,te&&s()("div",{style:{...(0,E.OD)({source:g,isMobile:$})}},void 0,s()(G,{rootStore:o,discussionId:te,url:P,discussionLocation:Q,onReactionClick:Y})))))}function G(e){window.__c={n:"DiscussionThread"};const{rootStore:t,discussionId:i,url:o,discussionLocation:r,onReactionClick:a}=e,d=(0,c.VK)((()=>I.t1.createChildStore(t,{table:f.qF,id:i,spaceId:t.id})),[t,i]),u=(0,c.VK)((()=>O.D4(d).filter((e=>e.isDefined()))),[d]),m=(0,c.VK)((()=>{const e=u.map((e=>e.getCreatedByPointer())).filter(S.$K).filter((e=>e.table===y.KJ));return(0,g.mN)(e,(e=>{let{id:t}=e;return t})).map((e=>I.t1.createChildStore(d,e)))}),[d,u]),v=u.length>3,p=u.length-3,b=(0,l.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:12},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:3},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12}})),[]);return s()("div",{style:b.discussion},void 0,v?n.createElement(n.Fragment,null,s()(W,{commentStore:u[0],discussionLocation:r,onReactionClick:a}),s()(K.Z,{href:o,style:b.truncateRepliesButton},void 0,s()("div",{style:b.avatars},void 0,m.map(((e,t)=>{const i=t===m.length-1;return s()(P.Z,{userStore:e,size:24,isOffline:!1,avatarShouldShowShadow:!1,style:{position:"relative",...!i&&{marginRight:-5}}},e.id)}))),s()("div",{style:b.truncationText},void 0,s()(h.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.commentTruncatedReplies",defaultMessage:"{numberOfTruncatedReplies} {numberOfTruncatedReplies, plural, one {reply...} other {replies...}}",values:{numberOfTruncatedReplies:p}}))),s()(W,{commentStore:u[u.length-2],discussionLocation:r,onReactionClick:a}),s()(W,{commentStore:u[u.length-1],discussionLocation:r,onReactionClick:a})):n.createElement(n.Fragment,null,u.map(((e,t)=>s()(W,{commentStore:e,discussionLocation:r,onReactionClick:a},t)))))}function W(e){window.__c={n:"DiscussionThreadComment"};const{commentStore:t,discussionLocation:i,onReactionClick:o}=e,r=(0,h.useIntl)(),[a,d]=(0,n.useState)(!1),u=(0,c.VK)((()=>{const e=t.getCreatedByPointer();if(e)return I.t1.createChildStore(t,e)}),[t]),m=(0,c.VK)((()=>u?u.getDisplayName(r):s()(h.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[u,r]),g=(0,c.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=I.t1.createChildStore(t,{table:p.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return s()(B.ZP,{blockValue:i,rootStore:t},e)})).filter(S.$K)}),[t]),f=(0,c.VK)((()=>t.getUserVisibleReactions().length>0),[t]),A=!f,_=(0,c.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]);let R;u?u.table===b.cZ?R=s()(Z.Z,{botStore:u,size:24}):u.table===y.KJ?R=s()(P.Z,{userStore:u,size:24}):u.table===v.y?R=s()(P.Z,{userStore:void 0,size:24}):(0,S.t1)(u):R=s()(P.Z,{userStore:void 0,size:24});const C=(0,l.yK)((e=>({avatarAndCommentContainer:{...A&&{position:"relative"},display:"flex",gap:12},commentContainer:{display:"flex",marginLeft:8},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:6,verticalAlign:"top",textAlign:"left",lineHeight:M.Z.lineHeight.UIRegular.desktop,...M.Z.textOverflowStyle},commentText:{display:"inline",fontSize:14,color:e.accentColors.gray[500],lineHeight:M.Z.lineHeight.UIRegular.desktop},fullName:{fontWeight:M.Z.fontWeight.semibold,fontSize:14,lineHeight:M.Z.lineHeight.UIRegular.desktop,marginRight:8},editedBadge:{color:e.mediumTextColor,paddingLeft:4},reactionBar:{height:"fit-content"}})),[A]);return s()("div",{style:C.avatarAndCommentContainer,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},void 0,s()("div",{},void 0,R),s()("div",{style:C.commentContainer},void 0,s()("span",{style:C.commentClampContainer},void 0,s()("span",{style:C.fullName},void 0,m),s()(x.Z,{style:C.commentText,store:O.zP(t),disabled:!0,disableDateMentions:!0,disableEquationInteraction:!0}),g,_&&s()("span",{style:C.editedBadge},void 0,s()(h.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})))),(a||f)&&s()("div",{style:C.reactionBar},void 0,s()(k.LazyReactionBar,{parentStore:t,discussionLocation:i,onClick:o})))}function H(e){window.__c={n:"PageTitle"};const{store:t}=e,i=(0,c.VK)((()=>t.getIcon()),[t]),o=(0,c.VK)((()=>t.isEmptyPage()),[t]),r=(0,l.yK)((()=>({container:{display:"flex",gap:4,alignItems:"center"},recordTitle:{...M.Z.textOverflowStyle}})),[]);return s()("div",{style:r.container},void 0,s()(V.Z,{icon:i,isEmptyPage:o,size:14,disabled:!0}),s()(T.Z,{store:t,style:r.recordTitle}))}function N(e){window.__c={n:"CommentContextForGrouping"};const{navigableBlockStore:t,rootStore:i,source:o,discussionId:r,alwaysHighlightWithBlockBar:a,discussionContext:n}=e,u=0===(0,A.llS)(n).length||a,m=(0,d.O7)(),g=m.device.isMobile,h=(0,l.Fg)(),v=(0,l.yK)((e=>({linkbox:{...(0,E.OD)({source:o,isMobile:g}),display:"flex",alignItems:"center",fontSize:14,...u&&{color:e.mediumTextColor},paddingTop:2,paddingBottom:6,marginBottom:0},highlight:{backgroundColor:e.accentColors.yellow[50],paddingLeft:4,paddingRight:4,borderRadius:2,color:e.accentColors.yellow[500],maxWidth:"100%",...M.Z.textOverflowStyle}})),[g,o,u]),p=(0,c.VK)((()=>n?(0,C.IY)({environment:m,textValue:n?{value:n,spaceId:i.id}:void 0,parentStore:i,disableHover:!0,disableStyleAnnotations:u,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:r,theme:h,emojiType:(0,R.e_)(m),katex:m.KatexStore.getKatex(),formulaValueTypes:[]}):s()(H,{store:t})),[t,i,m,n,r,h,u]);return s()("div",{style:v.linkbox},void 0,s()("div",{style:{maxWidth:"100%",borderLeftWidth:2,borderLeftColor:h.accentColors.yellow[500],borderLeftStyle:"solid",paddingLeft:4}},void 0,s()("div",{style:v.highlight},void 0,p)))}function j(e){let{databaseType:t,authorCount:i,authorPhrase:o,commentCount:r}=e;switch(t){case m.iS:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a task} other {{authorOrAuthors} commented on a task}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentTaskActivity.standardizedHeader"});case m.wW:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a project} other {{authorOrAuthors} commented on a project}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentProjectActivity.standardizedHeader"});case m.zU:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a document} other {{authorOrAuthors} commented on a document}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentDocActivity.standardizedHeader"});case m.GZ:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a wiki} other {{authorOrAuthors} commented on a wiki}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentWikiActivity.standardizedHeader"});case m.Fi:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a meeting note} other {{authorOrAuthors} commented on a meeting note}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentMeetingActivity.standardizedHeader"});case m.nG:case m.p$:case m.Be:case void 0:return s()(h.FormattedMessage,1===i?{defaultMessage:"{author} {commentCount, plural, one {left a comment} other {left comments}}",values:{author:o,commentCount:r},id:"activity.commentActivity.standardizedGroupedHeader.singleAuthor"}:{defaultMessage:"{authors} {commentCount, plural, one {left a comment} other {left comments}}",values:{authors:o,commentCount:r},id:"activity.commentActivity.standardizedGroupedHeader.multipleAuthors"});default:(0,S.t1)(t)}}const J=n.memo(z)},80821:(e,t,i)=>{i.d(t,{Z:()=>p});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(5366),u=i(99108),m=i(51925),g=i(17022),h=i(69616),v=i(56162);const p=function(e){window.__c={n:"EmailEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{tab:p,notification:b}=o,f=(0,d.O7)(),y=(0,u.hI)(t.edits??[]),A=(0,c.VK)((()=>(0,h.P6)({edits:y,rootStore:i})),[y,i]),S=(0,c.VK)((()=>(0,h.XW)(A)),[A]),{oldEmail:M,newEmail:_}=(0,c.VK)((()=>{const e=y[0];return{oldEmail:e?e.old_email:"",newEmail:e?e.new_email:""}}),[y]),R="pageUpdatesSidebar"===p;return n.createElement(v.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,s()(l.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} changed email from {oldEmail} to {newEmail}} other {{authorOrAuthors} changed email from {oldEmail} to {newEmail}}}",values:{numberOfAuthors:A.length,authorOrAuthors:S,oldEmail:M,newEmail:_},id:"activity.emailEdited.header"})),isLast:a,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:b,icon:s()(m.BE,{authors:A}),showSnapshotButton:R},(0,g.h9)({notification:b,activity:t,environment:f,tab:p})))}},66602:(e,t,i)=>{i.d(t,{Z:()=>C});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(15145),u=i(21202),m=i(54584),g=i(5366),h=i(33929),v=i(57559),p=i(84076),b=i(63381),f=i(51925),y=i(17022),A=i(69616),S=i(12472),M=i(22649),_=i(78976),R=i(56162);function C(e){window.__c={n:"GroupMentionedActivity"};const{activity:t,rootStore:i,isLast:o,tabArgs:a}=e,{tab:C,notification:w,source:O}=a,k=(0,d.O7)(),I=t.edits??[],B=I.length>0,K=I[0],V=v.G.createChildStore(i,{table:u.iU,id:K.navigable_block_id}),T=(0,c.VK)((()=>V.isDefined()),[V]),Z=v.G.createChildStore(i,{table:u.iU,id:t.mentioned_block_id}),P=(0,c.VK)((()=>Z.isDefined()),[Z]),x=(0,c.VK)((()=>{const e=Z.getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:l.tY.Notification})}),[Z,i]),q=(0,c.VK)((()=>i.getModel()),[i]),F=(0,c.VK)((()=>(0,m.QH)(h.default.getIntl(),q,t.mentioned_group_id)),[q,t]),L=(0,c.VK)((()=>(0,A.P6)({edits:t.edits||[],rootStore:i})),[t,i]),E=(0,c.VK)((()=>(0,A.XW)(L)),[L]),D=k.device.isMobile,U=(0,c.VK)((()=>(0,A.jC)({recordId:V.id,recordType:u.iU,tab:C,rootStore:i,environment:k})),[V,C,i,k]);if(!(B&&T&&P&&x))return null;const z=s()(_.Z,{titledRecordStore:V,activity:t,tabArgs:a,getRecordModel:i.getRecordModel});return n.createElement(R.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,s()(g.FormattedMessage,{defaultMessage:"{authorOrAuthors} mentioned {groupName} in a page",values:{authorOrAuthors:E,groupName:F},id:"activity.groupMentionActivity.standardizedHeader"})),isLast:o,isPrivate:U,rootStore:i,prominentTitleLink:z,navigableBlockId:V.id,showRecordPath:!0,notification:w,icon:s()(f.BE,{authors:L}),showSnapshotButton:!1},(0,y.h9)({notification:w,activity:t,environment:k,tab:C})),s()(p.Z,{href:x,onClick:()=>(0,y.dG)({environment:k,activity:t,...a}),innerStyle:(0,M.OD)({source:O,isMobile:D})},void 0,s()(b.Z,{edit:K,rootStore:i,highlightCurrentUser:!0})),s()(S.Z,{tabArgs:a,activity:t,isMobile:D,environment:k,rootStore:i}))}},85893:(e,t,i)=>{i.d(t,{Z:()=>S});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(66897),u=i(5366),m=i(21202),g=i(19889),h=i(33929),v=i(57559),p=i(51925),b=i(17022),f=i(69616),y=i(78976),A=i(56162);const S=function(e){window.__c={n:"PrivateContentTransferredActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{tab:S,notification:M}=o,_=(0,d.O7)(),R=(0,n.useMemo)((()=>t.edits??[]),[t]),C=(0,c.VK)((()=>(0,f.P6)({edits:R,rootStore:i})),[R,i]),w=(0,c.VK)((()=>(0,f.XW)(C)),[C]),O=v.G.createChildStore(i,{table:m.iU,id:t.navigable_block_id}),k=(0,c.VK)((()=>O.isDefined()),[O]),I=(0,c.VK)((()=>(0,f.jC)({recordId:O.id,recordType:m.iU,tab:S,rootStore:i,environment:_})),[O,S,i,_]),B=R[0],K=(0,c.VK)((()=>(0,f.N8)(B.from_user_id,i)),[B,i]),V=(0,c.VK)((()=>(0,f.N8)(B.to_user_id,i)),[B,i]);if(!(R.length>0&&K&&V&&k))return null;const T=(0,l.$4)(h.default.getIntl(),(0,l.LU)({table:g.KJ,value:K})),Z=s()(y.Z,{titledRecordStore:O,activity:t,tabArgs:o,getRecordModel:i.getRecordModel});return n.createElement(A.Z,r()({timestamp:parseInt(t.end_time),header:s()(u.FormattedMessage,{defaultMessage:"{authorPhrase} transferred private content from {fromUserName} to you",values:{authorPhrase:w,fromUserName:T},id:"activity.privateContentTransferred.standardizedHeader"}),isLast:a,prominentTitleLink:Z,isPrivate:I,rootStore:i,notification:o.notification,icon:s()(p.BE,{authors:C}),showSnapshotButton:!1,showRecordPath:!1},(0,b.h9)({notification:M,activity:t,environment:_,tab:S})))}},70690:(e,t,i)=>{i.d(t,{Z:()=>M});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(15145),u=i(21202),m=i(5366),g=i(57559),h=i(84076),v=i(63381),p=i(51925),b=i(17022),f=i(69616),y=i(22649),A=i(78976),S=i(56162);function M(e){window.__c={n:"ReminderActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{notification:M,tab:_,source:R}=o,C=(0,d.O7)(),w=t.edits??[],O=w.length>0,k=g.G.createChildStore(i,{table:u.iU,id:w[0].navigable_block_id}),I=(0,c.VK)((()=>k.isDefined()),[k]),B=g.G.createChildStore(i,{table:u.iU,id:t.reminder_block_id}),K=(0,c.VK)((()=>B.isDefined()),[B]),V=(0,c.VK)((()=>{const e=B.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:l.tY.Notification})}),[B,i]),T=(0,c.VK)((()=>(0,f.jC)({recordId:k.id,recordType:u.iU,tab:_,rootStore:i,environment:C})),[k,_,i,C]);if(!(O&&I&&K&&V))return null;const Z=C.device.isMobile,P=s()(A.Z,{titledRecordStore:k,getRecordModel:i.getRecordModel,activity:t,tabArgs:o});return n.createElement(S.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,s()(m.FormattedMessage,{defaultMessage:"Reminder in {pageTitle}",id:"activity.reminderInActivity.header",values:{pageTitle:P}})),isLast:a,isPrivate:T,rootStore:i,navigableBlockId:k.id,showRecordPath:!0,notification:M,icon:s()(p.hZ,{}),showSnapshotButton:!1},(0,b.h9)({notification:M,activity:t,environment:C,tab:_})),s()(h.Z,{href:V,onClick:()=>(0,b.dG)({environment:C,activity:t,...o}),innerStyle:(0,y.OD)({source:R,isMobile:Z})},void 0,s()(v.Z,{edit:w[0],rootStore:i})))}},64540:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(29369),u=i(5366),m=i(57559),g=i(51925),h=i(17022),v=i(69616),p=i(87147),b=i(56162);function f(e){window.__c={n:"TeamMembershipEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{notification:f,tab:y}=o,A=(0,d.O7)(),S=t.edits??[],M=S.length>0,_=(0,c.VK)((()=>(0,v.P6)({edits:t.edits||[],rootStore:i})),[t,i]),R=(0,c.VK)((()=>(0,v.XW)(_)),[_]),C=S[0],w=m.zX.createChildStore(i,{table:l.e0,id:C.team_id}),O=(0,c.VK)((()=>w.isDefined()),[w]);return M&&O?n.createElement(b.Z,r()({timestamp:parseInt(t.end_time),header:s()(u.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:_.length,authorOrAuthors:R},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),prominentTitleLink:s()(p.Z,{titledRecordStore:w,rootStore:i,activity:t,tabArgs:o}),isLast:a,isPrivate:!1,rootStore:i,notification:f,showRecordPath:!1,icon:s()(g.BE,{authors:_}),showSnapshotButton:!1},(0,h.h9)({notification:f,activity:t,environment:A,tab:y}))):null}},30582:(e,t,i)=>{i.d(t,{Z:()=>x});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(24405),u=i(66897),m=i(15145),g=i(45433),h=i(55061),v=i(5366),p=i(21202),b=i(84683),f=i(15047),y=i(94044),A=i(97880),S=i(63143),M=i(57559),_=i(84076),R=i(51925),C=i(17022),w=i(69616),O=i(36081),k=i(22649),I=i(87147),B=i(56162);function K(e){window.__c={n:"UserInvitedActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{notification:l,tab:m}=o,g=(0,d.O7)(),h=(t.edits??[])[0],v=P({rootStore:i,edit:h}),p=function(e){let{data:t,spaceId:i,tab:o,rootStore:r}=e;const a=(0,d.O7)();return(0,c.VK)((()=>{let e,s;if(!t)return!1;if("block"===(null==t?void 0:t.type))e=t.block.id,s="block";else if("space"===(null==t?void 0:t.type)||"group"===(null==t?void 0:t.type)){if(!i)return!1;e=i,s="space"}else(0,A.t1)(t);return(0,w.jC)({recordId:e,recordType:s,tab:o,rootStore:r,environment:a})}),[t,a,r,i,o])}({data:v,spaceId:h.space_id,tab:m,rootStore:i}),b=(0,c.VK)((()=>(0,w.P6)({edits:t.edits??[],rootStore:i})),[t.edits,i]),f=(0,n.useMemo)((()=>(0,C.h9)({notification:l,environment:g,tab:m,activity:t})),[t,g,l,m]);if(!t.edits||0===t.edits.length||!v)return null;const y=parseInt(t.end_time),S=0===b.filter(u.uC).length,M=S?void 0:s()(R.BE,{authors:b});return n.createElement(B.Z,r()({timestamp:y,header:s()("span",{},void 0,s()(T,{data:v,authors:b,isFromBot:S,spaceId:h.space_id})),prominentTitleLink:s()(V,{data:v,rootStore:i,activity:t,tabArgs:o}),isLast:a,isPrivate:p,rootStore:i,navigableBlockId:t.navigable_block_id,showRecordPath:!1,notification:l,icon:M,showSnapshotButton:!1},f),n.createElement(Z,r()({},e,{edit:h})))}function V(e){let{data:t,rootStore:i,activity:o,tabArgs:r}=e;switch(t.type){case"block":return s()(I.Z,{tabArgs:r,titledRecordStore:t.block,rootStore:i,activity:o});case"group":return null;case"space":return s()(I.Z,{tabArgs:r,titledRecordStore:t.space,rootStore:i,activity:o});default:(0,A.t1)(t)}}function T(e){let{data:t,authors:i,isFromBot:o,spaceId:r}=e;window.__c={n:"UserInviteSimplifiedHeader"};const a=(0,c.VK)((()=>(0,w.XW)(i)),[i]),n=(0,c.VK)((()=>{var e;return"block"===t.type?null===(e=t.block.getAssociatedCollectionStore())||void 0===e?void 0:e.getDatabaseType():void 0}),[t]);switch(t.type){case"block":if(o)switch(n){case g.wW:return s()(v.FormattedMessage,{defaultMessage:"You were added to a project",id:"activity.userInvitedActivityProjectByBot.standardizedHeader"});case g.iS:return s()(v.FormattedMessage,{defaultMessage:"You were added to a task",id:"activity.userInvitedActivityTaskByBot.standardizedHeader"});case g.zU:return s()(v.FormattedMessage,{defaultMessage:"You were added to a document",id:"activity.userInvitedActivityDocByBot.standardizedHeader"});case g.Fi:return s()(v.FormattedMessage,{defaultMessage:"You were added to a meeting",id:"activity.userInvitedActivityMeetingByBot.standardizedHeader"});case g.p$:return s()(v.FormattedMessage,{defaultMessage:"You were added to a sprint",id:"activity.userInvitedActivitySprintByBot.standardizedHeader"});case g.GZ:return s()(v.FormattedMessage,{defaultMessage:"You were added to a wiki",id:"activity.userInvitedActivityWikiByBot.standardizedHeader"});default:return s()(v.FormattedMessage,{defaultMessage:"You were added to a page",id:"activity.userInvitedActivityNavigableBlockByBot.standardizedHeader"})}else switch(n){case g.wW:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a project} other {{authorOrAuthors} added you to a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityProject.standardizedHeader"});case g.iS:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a task} other {{authorOrAuthors} added you to a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityTask.standardizedHeader"});case g.zU:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a document} other {{authorOrAuthors} added you to a document}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityDoc.standardizedHeader"});case g.Fi:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a meeting} other {{authorOrAuthors} added you to a meeting}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityMeeting.standardizedHeader"});case g.p$:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a sprint} other {{authorOrAuthors} added you to a sprint}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivitySprint.standardizedHeader"});case g.GZ:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a wiki} other {{authorOrAuthors} added you to a wiki}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityWiki.standardizedHeader"});default:return s()(v.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a page} other {{authorOrAuthors} added you to a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityNavigableBlock.standardizedHeader"})}case"group":const e=s()(O.Z,{permissionGroup:t.group,spaceId:r});return s()(v.FormattedMessage,o?{defaultMessage:"You were added to group {groupName}",values:{groupName:e},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader"}:{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to group {groupName}} other {{authorOrAuthors} added you to group {groupName}}}",values:{numberOfAuthors:i.length,authorOrAuthors:a,groupName:e},id:"activity.userInvitedActivityGroupId.standardizedHeader"});case"space":return s()(v.FormattedMessage,o?{defaultMessage:"You were added to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader"}:{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a workspace} other {{authorOrAuthors} added you to a workspace}}",values:{numberOfAuthors:i.length,authorOrAuthors:a},id:"activity.userInvitedActivityOtherInvite.standardizedHeader"});default:(0,A.t1)(t)}}function Z(e){let{edit:t,activity:i,rootStore:o,tabArgs:r}=e;window.__c={n:"InviteDetail"};const a=(0,d.O7)(),{isMobile:n}=a.device,{source:u}=r,g=(0,l.yK)((()=>({inviteMessage:{paddingLeft:(0,k.c3)({source:u,isMobile:n}),paddingTop:8,paddingBottom:8,paddingRight:12,fontSize:14}})),[n,u]),h=P({rootStore:o,edit:t}),v=parseInt(i.end_time),p=(0,c.VK)((()=>{if("block"!==(null==h?void 0:h.type))return;const e=h.block;return null!=e&&e.isDefined()?e.getModel():void 0}),[h]),f=(0,c.VK)((()=>{if(p)return(0,C.ME)(p.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m.tY.Notification}))}),[p,o.getRecordModel]),A=(0,c.VK)((()=>{if(!p)return{isValid:!1};const e=p&&(0,y.$e)(p,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:b.Tu,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=v+5*S.hM?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,v,p,o]);return null!=A&&A.isValid?s()(_.Z,{href:f,onClick:()=>(0,C.dG)({...r,environment:a,activity:i,mightCloseTab:!0}),innerStyle:g.inviteMessage},void 0,A.message):null}function P(e){let{rootStore:t,edit:i}=e;return(0,c.VK)((()=>{if(i)return i.navigable_block_id?{type:"block",block:M.G.createChildStore(t,{table:p.iU,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,h.Bg)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",space:M.H2.createChildStore(t,{table:f.bx,id:i.space_id})}}),[i,t])}const x=n.memo(K)},87383:(e,t,i)=>{i.d(t,{Z:()=>C});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(15145),u=i(45433),m=i(70921),g=i(21202),h=i(5366),v=i(57559),p=i(84076),b=i(63381),f=i(51925),y=i(17022),A=i(69616),S=i(12472),M=i(22649),_=i(78976),R=i(56162);function C(e){window.__c={n:"UserMentionedActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{source:C,tab:w,notification:O}=o,k=(0,d.O7)(),I=t.edits??[],B=I.length>0,K=I[0],V=v.G.createChildStore(i,{table:g.iU,id:K.navigable_block_id}),T=(0,c.VK)((()=>V.isDefined()),[V]),Z=v.G.createChildStore(i,{table:g.iU,id:t.mentioned_block_id}),P=v.WJ.createChildStore(i,{table:m.TY,id:t.id,spaceId:t.space_id}),x=(0,c.VK)((()=>P.getStandardizedMentionedPropertyURI()),[P]),q=(0,c.VK)((()=>Z.isDefined()),[Z]),F=(0,c.VK)((()=>{const e=Z.getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:l.tY.Notification})}),[Z,i]),L=(0,c.VK)((()=>(0,A.P6)({edits:t.edits||[],rootStore:i})),[t,i]),E=(0,c.VK)((()=>(0,A.XW)(L)),[L]),D=(0,c.VK)((()=>(0,A.jC)({recordId:V.id,recordType:"block",tab:w,rootStore:i,environment:k})),[V,w,i,k]);if(!(B&&T&&q&&F))return null;const U=k.device.isMobile,z=s()(_.Z,{titledRecordStore:V,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),G=function(e,t,i){switch(e){case u.Es.Assign:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionTaskActivity.standardizedHeader"});case u.zI.People:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a project} other {{authorOrAuthors} mentioned you in a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionProjectActivity.standardizedHeader"});default:return s()(h.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a page} other {{authorOrAuthors} mentioned you in a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionActivity.standardizedHeader"})}}(x,E,L);return n.createElement(R.Z,r()({timestamp:parseInt(t.end_time),header:s()("span",{},void 0,G),isLast:a,isPrivate:D,rootStore:i,navigableBlockId:V.id,prominentTitleLink:z,notification:O,icon:s()(f.BE,{authors:L}),showRecordPath:!0,showSnapshotButton:!1},(0,y.h9)({notification:O,activity:t,environment:k,tab:w})),s()(p.Z,{href:F,onClick:()=>(0,y.dG)({environment:k,activity:t,...o}),innerStyle:(0,M.OD)({source:C,isMobile:U})},void 0,s()(b.Z,{edit:K,rootStore:i,highlightCurrentUser:!0})),s()(S.Z,{tabArgs:o,activity:t,isMobile:U,environment:k,rootStore:i}))}},62987:(e,t,i)=>{i.d(t,{Z:()=>_});var o=i(10434),r=i.n(o),a=i(23174),s=i.n(a),n=i(67294),d=i(480),c=i(86628),l=i(80951),u=i(21202),m=i(6287),g=i(5366),h=i(16402),v=i(57559),p=i(51925),b=i(17022),f=i(69616),y=i(12472),A=i(22649),S=i(78976),M=i(56162);function _(e){window.__c={n:"VerificationExpiredActivity"};const{activity:t,rootStore:i,tabArgs:o,isLast:a}=e,{tab:_,source:R,notification:C}=o,w=(0,d.O7)(),O=v.G.createChildStore(i,{table:u.iU,id:t.navigable_block_id}),k=(0,c.VK)((()=>O.isDefined()),[O]),I=v.NW.createChildStore(i,{table:m.v,id:t.collection_id,spaceId:t.space_id}),B=(0,c.VK)((()=>I.isDefined()),[I]),K=(0,c.VK)((()=>{const e=I.getSchema(),t=Object.keys(e).find((t=>{var i;return"verification"===(null===(i=e[t])||void 0===i?void 0:i.type)}));let o=s()(g.FormattedMessage,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(t){const e=O.getPropertyValue(t),r=l._w(e);if(r){const e=r[0],t=(0,f.uA)(e,i);t&&t.asActor&&(o=(0,f.XW)([t]))}}return o}),[O,I,i]),V=(0,c.VK)((()=>(0,f.jC)({recordId:O.id,recordType:"block",tab:_,rootStore:i,environment:w})),[O,_,i,w]);if(!k||!B)return null;const T=s()(S.Z,{titledRecordStore:O,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),Z=s()(g.FormattedMessage,{defaultMessage:"Verification expired for <boldtext>{pageTitle}</boldtext>",values:{pageTitle:T,boldtext:e=>s()("span",{style:{fontWeight:500}},void 0,e)},id:"activity.verificationExpired.header"}),P=parseInt(t.start_time),x=parseInt(t.end_time),q=w.device.isMobile,F=s()("div",{style:{fontSize:14,...(0,A.OD)({source:R,isMobile:q})}},void 0,s()(g.FormattedMessage,P&&x?{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:K,startDate:(0,h.gs)(parseInt(t.start_time)),endDate:(0,h.gs)(parseInt(t.end_time))},id:"activity.verificationExpired.contentWithTimestamp"}:{defaultMessage:"Last verified by {person}",values:{person:K},id:"activity.verificationExpired.contentWithoutTimestamp"}));return n.createElement(M.Z,r()({timestamp:parseInt(t.end_time),header:Z,isLast:a,isPrivate:V,rootStore:I,navigableBlockId:t.navigable_block_id,notification:C,icon:s()(p.of,{}),showRecordPath:!0,showSnapshotButton:!1},(0,b.h9)({notification:C,activity:t,environment:w,tab:_})),F,s()(y.Z,{tabArgs:o,activity:t,isMobile:w.device.isMobile,environment:w,rootStore:i}))}}}]);