"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116,4931],{33796:(e,t,n)=>{n.r(t),n.d(t,{ConfigureIntegrationModal:()=>K});var i=n(23174),o=n.n(i),a=n(67294),r=n(480),s=n(86628),l=n(24405),d=n(64275),g=n(5366),c=n(9844),u=n(35794),p=n(94826),m=n(64002),f=n(98688),h=n(47307),b=n(64964),M=n(61202),v=n(1790),C=n(33929),y=n(80444),w=n(74021),I=n(57559),S=n(39132),k=n(61061),x=n(73063),Z=n(74194);const _=(0,g.defineMessages)({toggleSecretVisibility:{id:"integrations.configureIntegrationShowSecret.toggleSecretVisibility",defaultMessage:"Toggle secret visibility"}});function N(e){const{secret:t,onChange:n,submit:i,placeholder:r}=e,[s,l]=a.useState(!1);return o()(Z.Z,{type:s?"text":"password",value:t,onChange:n,placeholder:r,style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:e=>{"Enter"===e.key&&i()},right:t&&o()("div",{style:{display:"flex"}},void 0,o()(x.Z,{icon:s?S.c:k.B,onClick:()=>{l(!s)},ariaLabel:C.default.formatMessage(_.toggleSecretVisibility),isBlue:!0,iconStyle:{height:18,width:18},style:{height:18}}))})}var F=n(64453),L=n(78144),T=n(42922),B=n(68785),U=n(92660),V=n(13490);const P=(0,g.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",defaultMessage:"Paste webhook URL"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",defaultMessage:"Paste secret code"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",defaultMessage:"Update"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",defaultMessage:"Connect"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",defaultMessage:"Failed to connect {integration}. Please contact support."},closeModalAriaLabel:{id:"integrations.configureIntegrationModal.closeButtonLabel",defaultMessage:"Close integration configuration modal"}});function K(){var e;window.__c={n:"ConfigureIntegrationModal"};const t=(0,r.O7)(),n=(0,l.yK)((e=>({errorText:{color:e.errorText,fontSize:12},input:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:360},helpInfo:{display:"inline-flex",marginLeft:2}})),[]),i=(0,L.useConnectIntegrationModalStyles)(),S=(0,s.VK)((()=>w.Z.state.open?w.Z.state.integrationId:void 0),[]),k=(0,s.VK)((()=>w.Z.state.open?w.Z.state.webhookSubscriptionId:void 0),[]),_=(0,s.VK)((()=>y.default.state.currentSpaceStore),[]),K=S&&_?I.y2.createChildStore(_,{id:S,table:c.K2}):void 0,D=k&&_?I.n4.createChildStore(_,{id:k,table:u.b,spaceId:_.id}):void 0;(0,a.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==D?void 0:D.getWebhookUrl())||"",webhookSecret:(null==D?void 0:D.getWebhookSecret())||""};O(e),z(t)}),[D]);const[W,O]=a.useState(""),[A,z]=a.useState(""),[E,H]=a.useState(!1),[R,j]=a.useState(!1),[q,$]=a.useState(!1),J=(0,s.VK)((()=>{if(K)return K.getModel()}),[K]),Y=(0,p.RW)(S),G=null==Y||null===(e=Y.customization)||void 0===e||null===(e=e.headers)||void 0===e?void 0:e.hmac,Q=(0,s.VK)((()=>null==J?void 0:J.getInfo()),[J]),X=(0,a.useCallback)((e=>{e&&Q&&($(!1),h.showErrorMessage(C.default.formatMessage(P.errorOccurred,{integration:Q.developer_name})))}),[Q]),ee=(0,a.useCallback)((async()=>{if(!q){if(!(0,m.yn)(W))return H(!0),void $(!1);if(H(!1),G&&!A)return j(!0),void $(!1);$(!0),J&&(await v.E({environment:t,integration:J,webhookUrl:W,webhookSecret:A,webhookSubscriptionId:k,onError:X,onSuccess:()=>b.oV({label:o()(g.FormattedMessage,{id:"configureIntegrationModal.snackbar.title",defaultMessage:"Added {integrationName} to your workspace",values:{integrationName:J.name}})})}),await M.pJ({environment:t}),await f.v({environment:t}),ne())}}),[t,X,J,q,A,G,k,W]),te=(0,a.useCallback)((e=>z(e.target.value)),[]),ne=()=>{w.Z.setState({open:!1}),O(""),z(""),H(!1),j(!1),$(!1)};return J&&Y&&_?o()(U.Z,{innerStyle:i.modal,requireOnline:!0,modalStore:w.Z,onDismiss:ne,render:()=>o()("div",{style:i.mobileModal},void 0,o()("div",{style:i.innerModal},void 0,o()(x.Z,{icon:d.D,onClick:ne,style:i.cancelButton,hoveredStyle:i.hovered,ariaLabel:C.default.formatMessage(P.closeModalAriaLabel)}),o()(F.P,{integrationModel:J,integrationConfig:Y,spaceStore:_}),o()("div",{style:n.input},void 0,o()(V.Z,{style:{display:"flex",alignItems:"center",marginTop:40}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",defaultMessage:"Webhook URL"})),o()(Z.Z,{type:"text",style:{padding:"4px 8px"},value:W,onChange:e=>{O(e.target.value),H(!1)},placeholder:C.default.formatMessage(P.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await ee()}}),E?o()("div",{style:{marginTop:5,...n.errorText}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",defaultMessage:"Invalid webhook URL"})):null),Y.acceptsSecretToken&&o()("div",{style:n.input},void 0,o()(V.Z,{style:{display:"flex",alignItems:"center",marginTop:24}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",defaultMessage:"Secret code"})),o()(N,{secret:A,onChange:te,submit:ee,placeholder:C.default.formatMessage(P.webhookSecretPlaceholder)}),R?o()("div",{style:{marginTop:5,...n.errorText}},void 0,o()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidSecret",defaultMessage:"Webhook secret is required."})):null),o()(T.Z,{style:i.connect,onClick:ee,disabled:""===W||G&&""===A},void 0,q?o()(B.Z,{}):o()("span",{},void 0,k?C.default.formatMessage(P.updateButton):C.default.formatMessage(P.createButton)))))}):null}},64453:(e,t,n)=>{n.d(t,{P:()=>p});var i=n(23174),o=n.n(i),a=(n(57658),n(67294)),r=n(86628),s=n(24405),l=n(15070),d=n(5366),g=n(82990),c=n(12981),u=n(64369);function p(e){window.__c={n:"ConnectIntegrationHeader"};const{integrationModel:t,integrationConfig:n,spaceStore:i}=e,p=(0,s.yK)((e=>({integrationIcon:{width:40,height:40,borderRadius:6,overflow:"hidden"},title:{marginTop:4,fontSize:17,fontWeight:590,lineHeight:"22px"},subTitle:{fontWeight:g.Z.fontWeight.regular,fontSize:g.Z.fontSize.UISmall.desktop,color:e.lightTextColor,lineHeight:"17px",marginTop:6.5}})),[]),h=(0,r.VK)((()=>t.getName()||"Unknown"),[t]),b=(0,r.VK)((()=>t.getCapabilities()),[t]),M=(0,r.VK)((()=>i.getName()),[i]);let v;(0,l.ms)(b)&&b.webhooks?v=o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionDlp",defaultMessage:"Connect to {integrationName} for real-time monitoring and protection of sensitive content.",values:{integrationName:h}}):b.webhooks&&(v=o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionSiem",defaultMessage:"Connect to {integrationName} for real-time monitoring, alerting, and analysis of your workspace event logs.",values:{integrationName:h}}));const C=(0,l.ms)(b);return a.createElement(a.Fragment,null,o()("div",{style:p.integrationIcon},void 0,o()(c.Z,{style:p.integrationIcon,src:n.icon})),o()(u.Z,{style:p.title},void 0,o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",defaultMessage:"Connect {integrationName} to Notion",values:{integrationName:h}})),o()(u.Z,{style:p.subTitle,isMultiline:!0},void 0,o()("div",{},void 0,v)),o()(u.Z,{style:p.subTitle,isMultiline:!0},void 0,o()("div",{},void 0,b.webhooks&&a.createElement(a.Fragment,null,o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.webhooks",defaultMessage:"{integrationName} will be authorized to receive event logs on all activity in {spaceName}.",values:{integrationName:h,spaceName:M}})," "),C&&a.createElement(a.Fragment,null,o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.contentCapabilities",defaultMessage:"{hasPrevious, select, true {For <b>all</b> pages, {integrationName} will also be able to {formattedContentCapabilities}} other {For <b>all</b> pages, {integrationName} will be able to {formattedContentCapabilities}}}.",values:{hasPrevious:b.webhooks,b:e=>o()("span",{style:{fontWeight:g.Z.fontWeight.semibold}},void 0,e),integrationName:h,formattedContentCapabilities:m(b)}})," "),b.read_user_without_email&&o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.userCapabilities",defaultMessage:"{hasPrevious, select, true {{integrationName} will also be able to see basic information about all workspace members and guests, including their {formattedUserCapabilities}} other {{integrationName} will be able to see basic information about all workspace members and guests, including their {formattedUserCapabilities}}}.",values:{hasPrevious:b.webhooks||C,b:e=>o()("span",{style:{fontWeight:g.Z.fontWeight.semibold}},void 0,e),integrationName:h,formattedUserCapabilities:f(b)}}))))}function m(e){const t=[];return e.read_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readContent",defaultMessage:"view content"})),e.read_comment&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readComment",defaultMessage:"view comments"})),e.update_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateContent",defaultMessage:"edit content"})),e.insert_comment&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateComment",defaultMessage:"edit comments"})),e.insert_content&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertContent",defaultMessage:"create content"})),e.insert_comment&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertComment",defaultMessage:"create comments"})),o()(d.FormattedList,{value:t,type:"conjunction"})}function f(e){const t=[];return e.read_user_without_email&&(t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readUserNames",defaultMessage:"names"})),t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readUserProfileImages",defaultMessage:"profile images"}))),e.read_user_with_email&&t.push(o()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readUserEmails",defaultMessage:"email addresses"})),o()(d.FormattedList,{value:t,type:"conjunction"})}},78144:(e,t,n)=>{n.r(t),n.d(t,{ConnectOAuthIntegrationModal:()=>_,useConnectIntegrationModalStyles:()=>N});var i=n(10434),o=n.n(i),a=n(23174),r=n.n(a),s=n(67294),l=n(480),d=n(86628),g=n(24405),c=n(64275);const u=(0,n(45238).I)("redirect",{viewBox:"0 0 13 13.5",svg:r()("path",{d:"M2.35742 13.2061H10.6357C11.374 13.2061 11.9323 13.0169 12.3105 12.6387C12.6888 12.265 12.8779 11.7135 12.8779 10.9844V2.66504C12.8779 1.93132 12.6888 1.3776 12.3105 1.00391C11.9323 0.630208 11.374 0.443359 10.6357 0.443359H2.35742C1.61914 0.443359 1.06087 0.630208 0.682617 1.00391C0.304362 1.3776 0.115234 1.93132 0.115234 2.66504V10.9844C0.115234 11.7135 0.304362 12.265 0.682617 12.6387C1.06087 13.0169 1.61914 13.2061 2.35742 13.2061ZM2.43945 11.8594C2.12044 11.8594 1.87663 11.7773 1.70801 11.6133C1.54395 11.4492 1.46191 11.2008 1.46191 10.8682V2.77441C1.46191 2.44629 1.54395 2.2002 1.70801 2.03613C1.87663 1.87207 2.12044 1.79004 2.43945 1.79004H10.5537C10.8682 1.79004 11.1097 1.87207 11.2783 2.03613C11.4469 2.2002 11.5312 2.44629 11.5312 2.77441V10.8682C11.5312 11.2008 11.4469 11.4492 11.2783 11.6133C11.1097 11.7773 10.8682 11.8594 10.5537 11.8594H2.43945ZM8.63965 8.5918C8.80827 8.5918 8.94271 8.53483 9.04297 8.4209C9.14779 8.30241 9.2002 8.15202 9.2002 7.96973V4.79785C9.2002 4.55632 9.13867 4.38086 9.01562 4.27148C8.89258 4.16211 8.72396 4.10742 8.50977 4.10742H5.31055C5.12826 4.10742 4.98014 4.15983 4.86621 4.26465C4.75684 4.36491 4.70215 4.49935 4.70215 4.66797C4.70215 4.8457 4.75684 4.9847 4.86621 5.08496C4.98014 5.18522 5.13053 5.23535 5.31738 5.23535H6.47266L7.40918 5.12598L6.39746 6.05566L3.99805 8.45508C3.87044 8.58268 3.80664 8.72624 3.80664 8.88574C3.80664 9.06803 3.86133 9.21387 3.9707 9.32324C4.08464 9.43262 4.22819 9.4873 4.40137 9.4873C4.58366 9.4873 4.73861 9.4235 4.86621 9.2959L7.25879 6.91016L8.1748 5.91211L8.07227 6.88965V7.97656C8.07227 8.16797 8.1224 8.31836 8.22266 8.42773C8.32747 8.53711 8.46647 8.5918 8.63965 8.5918Z",fill:"white"})});var p=n(5366),m=n(9844),f=n(94826),h=n(50906),b=n(42631),M=n(33929),v=n(80444),C=n(17549),y=n(57559),w=n(64453),I=n(42922),S=n(73063),k=n(26388),x=n(92660);const Z=(0,p.defineMessages)({createButton:{id:"integrations.connectOAuthIntegrationModal.submitButton.create",defaultMessage:"Connect to {integrationName}"},waiting:{id:"integrations.connectOAuthIntegrationModal.submitButton.waiting",defaultMessage:"Waiting for changes in {integrationName}"},waitingTooltip:{id:"integrations.connectOAuthIntegrationModal.submitButton.waitingTooltip",defaultMessage:"You need to complete some steps in {integrationName} to continue"},closeModalAriaLabel:{id:"integrations.connectOAuthIntegrationModal.closeButtonLabel",defaultMessage:"Close integration installation modal"}});function _(){window.__c={n:"ConnectOAuthIntegrationModal"};const e=(0,l.O7)(),t=N(),n=(0,d.VK)((()=>C.Z.state.open?C.Z.state.integrationId:void 0),[]),i=(0,d.VK)((()=>v.default.state.currentSpaceStore),[]),a=n&&i?y.y2.createChildStore(i,{id:n,table:m.K2}):void 0,[g,_]=s.useState(!1),F=(0,d.VK)((()=>{if(a)return a.getModel()}),[a]),L=(0,d.VK)((()=>null==F?void 0:F.getInfo()),[F]),T=(0,f.I$)(n);if(!(F&&L&&T&&i&&n))return null;const B=async()=>{g||(_(!0),await b.$$({environment:e,integration:F,spaceId:i.id,from:"compliance_connected_apps_settings"}),h.eRW(e,{integration_id:n,configuration_type:"oauth"}),U())},U=()=>{C.Z.setState({open:!1}),_(!1)};return r()(x.Z,{innerStyle:t.modal,requireOnline:!0,modalStore:C.Z,onDismiss:U,render:()=>r()("div",{style:t.mobileModal},void 0,r()("div",{style:t.innerModal},void 0,r()(S.Z,{icon:c.D,onClick:U,style:t.cancelButton,hoveredStyle:t.hovered,ariaLabel:M.default.formatMessage(Z.closeModalAriaLabel)}),r()(w.P,{integrationModel:F,integrationConfig:T,spaceStore:i}),r()(k.Z,{placement:k.Z.Placement.Top,renderTooltip:()=>s.createElement(p.FormattedMessage,o()({},Z.waitingTooltip,{values:{integrationName:L.developer_name}})),disableTooltip:!g,render:e=>s.createElement(I.Z,o()({style:t.connect,onClick:B,disabled:g},e),g?r()("span",{},void 0,M.default.formatMessage(Z.waiting,{integrationName:L.developer_name})):r()("span",{style:t.createButton},void 0,M.default.formatMessage(Z.createButton,{integrationName:L.developer_name}),u(t.redirectIcon)))})))})}function N(){return(0,g.yK)((e=>({modal:{maxWidth:400,padding:"40px 20px 24px",fontSize:14,textAlign:"center",borderRadius:10},connect:{marginTop:40,padding:"0px 12px",width:360,height:32},innerStyle:{borderRadius:10},mobileModal:{fontSize:14,textAlign:"center"},innerModal:{display:"flex",flexDirection:"column",alignItems:"center"},hovered:{background:e.buttonPressedBackground},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},createButton:{display:"flex",alignItems:"center"},redirectIcon:{width:14,height:14,marginLeft:8}})),[])}},92660:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(23174),o=n.n(i),a=(n(67294),n(83355)),r=n(50506),s=n(53437);class l extends a.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,n=this.props.modalStore.state;return t.isMobile?o()(s.ZP,{ariaLabel:this.props.ariaLabel,open:n.open,popupType:s.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):o()(r.Z,{ariaLabel:this.props.ariaLabel,open:n.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},74021:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const a=new o},17549:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const a=new o},39132:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(23174),o=n.n(i);n(67294);const a=(0,n(45238).I)("eye",{viewBox:"0 0 32 32",svg:o()("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})}}]);